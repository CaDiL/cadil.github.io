<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kubernetes on CaDiL&#39;s Blog</title>
    <link>https://cadil.github.io/categories/kubernetes/</link>
    <description>Recent content in Kubernetes on CaDiL&#39;s Blog</description>
    <image>
      <title>CaDiL&#39;s Blog</title>
      <url>https://cadil.github.io/static</url>
      <link>https://cadil.github.io/static</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>mn</language>
    <lastBuildDate>Thu, 14 Jan 2021 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://cadil.github.io/categories/kubernetes/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>GKE дээр Odoo-г суулгах</title>
      <link>https://cadil.github.io/posts/2021-01-14-gke-kubernetes/</link>
      <pubDate>Thu, 14 Jan 2021 00:00:00 +0000</pubDate>
      <guid>https://cadil.github.io/posts/2021-01-14-gke-kubernetes/</guid>
      <description>GKE дээр Odoo-г суулгах</description>
      <content:encoded><![CDATA[<h2 id="gke-дээр-helm-күбернетес-ашиглан-жишээ-апплкейшн-суулгаж-тохируулах">GKE дээр Helm, Күбернетес ашиглан жишээ апплкейшн суулгаж тохируулах</h2>
<ul>
<li>Google Kubernetes Engine дээр кластер үүсгэх</li>
<li>Helm, Tiller суулгах</li>
<li>TLS Key үүсгэх</li>
<li>Odoo-г суулгах</li>
</ul>
<h3 id="google-kubernetes-engine-дээр-кластер-үүсгэх">Google Kubernetes Engine дээр кластер үүсгэх</h3>
<p><a href="https://cloud.google.com">Google Cloud Platform</a> дээр Google Kubernetes Engine дээр кластер үүсгэх Helm Chart суулгаж TLS, Cert-Manager суулган тохируулж сүүлд нь Odoo-г суулгаж үзнэ.</p>
<ul>
<li><a href="https://cloud.google.com/sdk/docs/install">gcloud суулгах</a></li>
<li><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl">kubectl суулгах</a></li>
</ul>
<p><code>gcloud</code> дамжуулан GCP - тэй холбогдоно. Google Cloud Platform - бүртгэл байхгүй бол эхлээд бүртгүүлээрэй.</p>
<p><code>kubectl</code> gcloud суулгасан бол дээр байгаа гарын авлага ашиглахгүй kubectl суулгая гэвэл:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud components install kubectl
</span></span></code></pre></div><p>Кластер үүсгэхээсээ ѳмнѳ нэвтрэн орно:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud auth application-default login
</span></span></code></pre></div><p>Нэвтрэн орсон бол доорк коммандараар шинэ прожект үүсгэнэ:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud projects create <span style="color:#e6db74">${</span>PROJECT<span style="color:#e6db74">}</span>
</span></span></code></pre></div><p>Эсхүл заавал CLI-ээр үүсгэхгүй гэвэл GCP дээрээс browser дээрээс орон шинэ прожект үүсгэж болно. Терминал дээрээ ѳѳрийн тѳслийг default болгож zone тохиргоо хийх бол:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud config set project <span style="color:#e6db74">${</span>PROJECT<span style="color:#e6db74">}</span> 
</span></span><span style="display:flex;"><span>gcloud config set compute/zone <span style="color:#e6db74">${</span>ZONE<span style="color:#e6db74">}</span>
</span></span></code></pre></div><blockquote>
<p><strong>Zone жигсаалт авах бол</strong>: gcloud compute zones list</p>
</blockquote>
<p>Одоо шинээр үүсгэсэн тѳсѳл дотроо кластер үүсгэе. Google Kubernetes Engine -г идэвхжүүлээгүй бол эхлээд brwoser-ѳѳсѳѳ GCP -г ороод GKE-г enable хийх хийнэ. Kubernetes Engine -г ороод browser дээрээс анх удаа кластер үүсгэж байгаа хичээл болон жишиг кластер тохироог санал болгоно. Тэр аргаар нь үүсгэж болно. Эсхүл доор байгаа командаар үүсгэж болно.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud beta container --project <span style="color:#e6db74">${</span>PROJECT<span style="color:#e6db74">}</span> clusters create <span style="color:#e6db74">&#34;my-first-cluster-1&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --zone <span style="color:#e6db74">&#34;us-central1-c&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --no-enable-basic-auth <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --cluster-version <span style="color:#e6db74">&#34;1.16.15-gke.4901&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --machine-type <span style="color:#e6db74">&#34;e2-medium&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --image-type <span style="color:#e6db74">&#34;COS&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --disk-type <span style="color:#e6db74">&#34;pd-standard&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --disk-size <span style="color:#e6db74">&#34;100&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --scopes <span style="color:#e6db74">&#34;https://www.googleapis.com/auth/devstorage.read_only&#34;</span>,<span style="color:#e6db74">&#34;https://www.googleapis.com/auth/logging.write&#34;</span>,<span style="color:#e6db74">&#34;https://www.googleapis.com/auth/monitoring&#34;</span>,<span style="color:#e6db74">&#34;https://www.googleapis.com/auth/servicecontrol&#34;</span>,<span style="color:#e6db74">&#34;https://www.googleapis.com/auth/service.management.readonly&#34;</span>,<span style="color:#e6db74">&#34;https://www.googleapis.com/auth/trace.append&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --no-enable-cloud-logging <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --no-enable-cloud-monitoring <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --no-enable-ip-alias <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --network <span style="color:#e6db74">&#34;projects/</span><span style="color:#e6db74">${</span>PROJECT<span style="color:#e6db74">}</span><span style="color:#e6db74">/global/networks/default&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --subnetwork <span style="color:#e6db74">&#34;projects/</span><span style="color:#e6db74">${</span>PROJECT<span style="color:#e6db74">}</span><span style="color:#e6db74">/regions/us-central1/subnetworks/default&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --addons HorizontalPodAutoscaling <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --enable-autoupgrade <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --enable-autorepair <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --enable-autoscaling <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --num-nodes <span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --min-nodes <span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --max-nodes <span style="color:#e6db74">&#34;5&#34;</span>
</span></span></code></pre></div><p><code>zones</code>: Кластер үүсгэж байгаа сервверийн байршил.
<code>machine-type</code>: Кластерын үүсгэж байгаа тѳхѳѳрѳмжийн сонголт. Ямар тѳрлийн тѳхѳѳрѳмж сонгхож байгаагаас үнэ болон хэдэн node үүсгэх лимит зэрэгг тодорохйлогдоно. Дэлгэрэнгүй судлах бол: <a href="https://cloud.google.com/compute/docs/machine-types">Machine Types</a>.
<code>addons</code>: Автоматаар буюу ачаалал их болох үед node ѳргѳтгѳл хийх тохиргоо оруулав: <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/horizontal-pod-autoscaling">HorizontalPodAutoscaling</a>.
<code>min-node</code>: Автомат ѳргѳтгѳл хийж байх үед кластерт хамгийн бага байх node.
<code>max-node</code>: Автомат ѳргѳтгѳл хийж байх үед кластерт хамгийн их байх node.</p>
<p>Шинээр үүсгэсэн кластерт role binding тохируулна:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcloud container clusters get-credentials <span style="color:#e6db74">${</span>Кластер нэр<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl create clusterrolebinding cluster-admin-binding <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --clusterrole cluster-admin <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --user <span style="color:#66d9ef">$(</span>gcloud config get-value account<span style="color:#66d9ef">)</span>
</span></span></code></pre></div><h3 id="helm-суулгах">Helm суулгах</h3>
<p>Helm суулгах:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://raw.githubusercontent.com/helm/helm/master/scripts/get | bash
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create serviceaccount -n kube-system tiller 
</span></span><span style="display:flex;"><span>kubectl create clusterrolebinding tiller-cluster-rule <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --clusterrole<span style="color:#f92672">=</span>cluster-admin --serviceaccount<span style="color:#f92672">=</span>kube-system:tiller
</span></span></code></pre></div><p>to be continued&hellip;</p>
]]></content:encoded>
    </item>
    <item>
      <title>Helm Chart ашиглан Odoo-г локал орчинд суулгах</title>
      <link>https://cadil.github.io/posts/2021-01-13-kubernetes-with-odoo/</link>
      <pubDate>Wed, 13 Jan 2021 00:00:00 +0000</pubDate>
      <guid>https://cadil.github.io/posts/2021-01-13-kubernetes-with-odoo/</guid>
      <description>Helm Chart ашиглан Odoo-г локал орчинд суулгах</description>
      <content:encoded><![CDATA[<p><a href="https://github.com/helm/helm">Kubernetes Helm</a>-г ашиглан <a href="https://bitnami.com/">bitnami</a> тохируулсан апплкэйшнг Күбернетесд суулган үзье. Ингэснээр Күбернетес ажиллагааг энгийн хялбар аргаар харж туршиж болно.</p>
<p><code>minikube start</code>-г терминал дээр бичин күбернетэс кластераа ажилууллсан бол:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Bitnami Helm Chart рэпо-г эхлээд нэмнэ.</span>
</span></span><span style="display:flex;"><span>$ helm repo add bitnami https://charts.bitnami.com/bitnami
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Default namespace-т my-release - нэрэээр Odoo-г суулгана.</span>
</span></span><span style="display:flex;"><span>$ helm install my-release bitnami/odoo
</span></span></code></pre></div><p>Дээрх коммандууыг ажиллуусан бол output терминал дээр харуулна.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>NAME: my-release
</span></span><span style="display:flex;"><span>LAST DEPLOYED: ***
</span></span><span style="display:flex;"><span>NAMESPACE: default
</span></span><span style="display:flex;"><span>STATUS: deployed
</span></span><span style="display:flex;"><span>REVISION: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>TEST SUITE: None
</span></span><span style="display:flex;"><span>NOTES:
</span></span><span style="display:flex;"><span>*******************************************************************
</span></span><span style="display:flex;"><span>*** PLEASE BE PATIENT: Odoo may take a few minutes to install   ***
</span></span><span style="display:flex;"><span>*******************************************************************
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. Get the Odoo URL by running:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>** Please ensure an external IP is associated to the my-release-odoo service before proceeding **
</span></span><span style="display:flex;"><span>** Watch the status using: kubectl get svc --namespace default -w my-release-odoo **
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  export SERVICE_IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl get svc --namespace default my-release-odoo --template <span style="color:#e6db74">&#34;{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>  echo <span style="color:#e6db74">&#34;Odoo URL: http://</span>$SERVICE_IP<span style="color:#e6db74">/&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>2. Obtain the login credentials
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  export ODOO_EMAIL<span style="color:#f92672">=</span>user@example.com
</span></span><span style="display:flex;"><span>  export ODOO_PASSWORD<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl get secret --namespace default my-release-odoo -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{.data.odoo-password}&#34;</span> | base64 --decode<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  echo Email   : $ODOO_EMAIL
</span></span><span style="display:flex;"><span>  echo Password: $ODOO_PASSWORD
</span></span></code></pre></div><p>Output нь ойлгоход хялбар энгийн зааварчилгаа байгаа, терминал дээр зааврын дагуу хуулж ажилууллна.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get svc --namespace default -w my-release-odoo
</span></span></code></pre></div><p>Сервисын статусыг дээрх коммандаар харах боломжтой гэж output дээр тайлбарлсан байгаа. Гэхдээ локал орчинд minikube ашиглаж байгаа үед Load Balancer-н экстернал ip -г авч болохгүй шалтгаан нь Cloud Provider-ууд дээр байдаг шиг Minikube -д ѳѳрт нь Load Balancer layer - байхгүй.</p>
<p>Тиймээс minikube-д экстернал ip-г түр зүүр нээх хэрэгтэй болно. Доор байгаа коммандыг шинэ терминал нээгээд ажилууллна.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>minikube tunnel
</span></span></code></pre></div><p>Ажилуулах үед нууц үг асууна. Нууц үг хийснээр локал орчинд Load Balancer шинээр үүсгэнэ.</p>
<p>Эсхүл service.type -г <code>LoadBalancer</code> биш <code>NodePort</code> болгоод ажилуулах бас нэг арга бий. Жишээ нь:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm install odoo bitnami/odoo --set serviceType<span style="color:#f92672">=</span>NodePort
</span></span></code></pre></div><p><code>kubectl get svc --namespace default -w my-release-odoo</code> - г коммандыг дахин ажилууллаад үзээрэй. Экстернал IP хэсгийг тодорхойлсон байгаа. Одоо <code>SERVICE_IP</code> -г browser дээр хуулаад done.</p>
<h3 id="под-статус-шалгах">Под статус шалгах</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get pods
</span></span></code></pre></div><h3 id="release-устгаж-цэвэрлэх">release устгаж цэвэрлэх</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm uninstall my-release
</span></span></code></pre></div><p>Сервисийн параметруудыг ѳѳрчлѳх конфиг хийх бол <a href="https://github.com/bitnami/charts/tree/master/bitnami/odoo#service-parameters">эндээс</a> харж болох юм байна. Ѳѳр олон тохихруулга байгаа  болохоор <a href="https://github.com/bitnami/charts/tree/master/bitnami/odoo">заавартай</a> нь танилцаад аваарай.</p>
<h3 id="сурвалжууд--bookmarks">Сурвалжууд &amp; Bookmarks:</h3>
<ul>
<li><a href="https://github.com/helm/helm">https://github.com/helm/helm</a></li>
<li><a href="https://github.com/bitnami/charts">https://github.com/bitnami/charts</a></li>
<li><a href="https://github.com/bitnami/charts/tree/master/bitnami/odoo">https://github.com/bitnami/charts/tree/master/bitnami/odoo</a></li>
<li><a href="https://docs.bitnami.com/kubernetes/get-started-kubernetes/">https://docs.bitnami.com/kubernetes/get-started-kubernetes/</a></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Minikube болон kubectl суулгах</title>
      <link>https://cadil.github.io/posts/2021-01-12-kubernetes-install/</link>
      <pubDate>Tue, 12 Jan 2021 00:00:00 +0000</pubDate>
      <guid>https://cadil.github.io/posts/2021-01-12-kubernetes-install/</guid>
      <description>Minikube болон kubectl суулгах</description>
      <content:encoded><![CDATA[<h2 id="minikube-болон-kubectl-суулгах">Minikube болон kubectl суулгах</h2>
<p><code>Minikube</code> ашиглан локал Kubernetes Cluster үүсгэх үзье. Эхлээд minikube суулгана.</p>
<h3 id="minikube-суулгахдаа">Minikube суулгахдаа:</h3>
<p>Lunix:
Binary:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
</span></span><span style="display:flex;"><span> sudo install minikube-linux-amd64 /usr/local/bin/minikube
</span></span></code></pre></div><p>Debain Package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb
</span></span><span style="display:flex;"><span>sudo dpkg -i minikube_latest_amd64.deb
</span></span></code></pre></div><p>MacOS:
<a href="https://brew.sh">Homebrew</a> ашиглан суулгана.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install minikube
</span></span></code></pre></div><p>Бусад OS болон дэлгэрэнгүйг <a href="https://minikube.sigs.k8s.io/docs/start/">эндээс</a> ороод танилцаарай.</p>
<h3 id="kubectl-суулгахдаа">Kubectl суулгахдаа:</h3>
<p><code>kubectl</code> нь Kubernetes-н Command Line Tool ба cluster инспект хийх лог шалгах deploy хийх зэрэг бүхий л хэрэгтэй коммандууд ажилууллна. <a href="https://kubernetes.io/docs/reference/kubectl/overview/">Дэлгэрэнгүй</a></p>
<h3 id="minikube-асаах">Minikube асаах:</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>minikube start
</span></span></code></pre></div><p>MacOS дээр асаж буй лог:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>😄  minikube v1.15.1 on Darwin 10.15.7
</span></span><span style="display:flex;"><span>✨  Using the hyperkit driver based on existing profile
</span></span><span style="display:flex;"><span>👍  Starting control plane node minikube in cluster minikube
</span></span><span style="display:flex;"><span>🔄  Restarting existing hyperkit VM <span style="color:#66d9ef">for</span> <span style="color:#e6db74">&#34;minikube&#34;</span> ...
</span></span><span style="display:flex;"><span>    ... 
</span></span><span style="display:flex;"><span>🏄  Done! kubectl is now configured to use <span style="color:#e6db74">&#34;minikube&#34;</span> cluster and <span style="color:#e6db74">&#34;default&#34;</span> namespace by default
</span></span></code></pre></div><h3 id="minikube-унтраах">Minikube унтраах:</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>minikube stop
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Күбернетес Орчин</title>
      <link>https://cadil.github.io/posts/2021-01-11-kubernetes-environment/</link>
      <pubDate>Mon, 11 Jan 2021 00:00:00 +0000</pubDate>
      <guid>https://cadil.github.io/posts/2021-01-11-kubernetes-environment/</guid>
      <description>Күбернетес нь Cloud дэх кластер дээр түлхүү ажиллана. Гэхдээ ѳѳр олон тѳрлийн орчин байж болох байх.</description>
      <content:encoded><![CDATA[<h2 id="күбернетес-орчин">Күбернетес Орчин</h2>
<p>Хѳгжүүлэгч нарт илүү хѳнгѳн орчин, локал дээр ажиллах, тестийн орчин гэх мэт орчнуудад зориулан гаргасан хувилбарууд байна:</p>
<ul>
<li>
<p><a href="https://k3s.io">k3s</a>-н илүү хѳнгѳн бүтэцтэй болохоор Күбернетесд хэрэггүй гэсэн зүйлсийг хасаад зѳвхѳн чухал зүйлсийг авсан хувилбар байна. Яагаад ийм хувилбар хэрэгтэй болсон бэ гэхээр IoT, ARM суурьт CPU дээр ажиллах үед хѳнгѳн бүтэцтэй байхад хялбар ажиллагаа хурд чухал. Олон Raspberry Pi-г нэгтгээд тус тусд нь кластер болгоё гэж үзвэл k8s(Kubernetes)-с илүү k3s илүү тохиромжтой.</p>
</li>
<li>
<p><a href="https://kind.sigs.k8s.i">Kind</a> нь локал орчинд Kubernetes турших, хийсвэр кластер үүсгэх, хѳгжүүлэлт, туршилт хийх үед ашиглана.</p>
</li>
<li>
<p><a href="https://github.com/kubernetes/minikube">Minikube</a> - Kind-тай адилхан локал орчинд Күбернетесийг кластер дээр ажилууллах. Load Balancer, VM, container, docker, external ip, internal ip, tunnel гээд бүгдийг Күбернетес орчинд зориулад single node үүсгэнэ.</p>
</li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>Күбернетес тухай</title>
      <link>https://cadil.github.io/posts/2021-01-09-kubernetes-history/</link>
      <pubDate>Fri, 08 Jan 2021 00:00:00 +0000</pubDate>
      <guid>https://cadil.github.io/posts/2021-01-09-kubernetes-history/</guid>
      <description>2014 оны дунд үеэс Google-н Borg систем дээрээс суурь тавигдаж тухайн үедээ уг тѳсѳл дээр ажиллаж байсан хѳгжүүлэгч нар нэгдэн цааш хѳгжүүлэлт хийсэн байна.</description>
      <content:encoded><![CDATA[<h2 id="күбернетес-түүхээс">Күбернетес түүхээс</h2>
<p>2014 оны дунд үеэс Google-н <a href="https://en.wikipedia.org/wiki/Borg_(cluster_manager)">Borg</a> систем дээрээс суурь тавигдаж тухайн үедээ уг тѳсѳл дээр ажиллаж байсан хѳгжүүлэгч нар нэгдэн цааш хѳгжүүлэлт хийсэн байна. Google дэх уг тѳслийн анхдагч нэр Project 7 буюу Star Trek кинон дээрх зохиол дүрүүдийн хэсгээс нэр, логон санаа гарсан юм байна. Күбернетес цааш жѳгжүүлэлтийн явцад C++ хэлээс Go хэл рүү шилжин Kubernetes &ldquo;v1&rdquo; 2015 оны 7-р сард 10-нд release-ээ анх гарчээ.</p>
<h2 id="күбернетес-гэж-юу-вэ">Күбернетес гэж юу вэ?</h2>
<p>Товчоор Күбернетес нь контейнеруудыг удирдан зохион байгуулж кластер(ууд) доторх апплкэйшнг өргөтгөл хийх автоматжуулалт. Продакшн орчинг дагаад Хѳгжүүлэлтийн орчин автомэйшн хийгдэнэ (<a href="https://travis-ci.org">Travis</a>, <a href="https://github.com/features/actions">Github Actions</a>, <a href="https://www.jenkins.io">Jenkins</a> гэх мэт нэмэлт CI хэрэглэх байх).</p>
<figure>
    <img loading="lazy" src="/images/kubernetes-control-plane.png"/> 
</figure>

<blockquote>
<p><strong>Сурвалж</strong>: Kubernetes documentation</p>
</blockquote>
<h3 id="master-node-aka-control-plane">Master Node (aka: Control Plane)</h3>
<p>CLI, клинентаас илгээгдэж байгаа ѳгѳгдлүүд API - гаар дамжин Мастер node -д ирэн шийдвэрлэгдэнэ. Мастер Node -г ажиллагааг дэлгэрүүлбэл:</p>
<ul>
<li>kube-apiserver</li>
<li>etcd</li>
<li>kube-controller-manager</li>
<li>kube-scheduler</li>
</ul>
<p>Бүтцийн дагуу задлан авч үзвэл:</p>
<ul>
<li><code>kube-apiserver</code>: Күбернетес кластер доторх хүсэлтийг зохицуулан шийдвэрлэнэ. Жишээ нь под, репликас тохируулга, ѳргѳтгѳлүүд <code>kube-scheduler</code>, <code>kube-controller-manager</code> ирсэн хүсэлтүүд Күбернетес API серверээр дамжин кластер дах шинэчлэл ѳѳрчлѳлтийг хийж гүйцэтгэнэ.</li>
</ul>
<figure>
    <img loading="lazy" src="/images/kube-apiserver.png"/> 
</figure>

<ul>
<li><a href="https://etcd.io"><code>etcd</code></a>: Key Value Store нь kubernetes - тэй хоршиж ажиллахдаа кластер(ууд)-т ѳгѳгдлийг хадаглах backend ажиллагааг хангана.</li>
</ul>
<p>Доорх жишээнд мастер node дотор ectd -г под хэлбэрээр хоршин ажиллаж байна.</p>
<figure>
    <img loading="lazy" src="/images/kubernetes-etcd-stacked.png"/> 
</figure>

<blockquote>
<p><strong>Сурвалж</strong>: Kubernetes documentation</p>
</blockquote>
<p>Доорх жишээнд ectd -г экстернал кластер болгон мастер node - тэй хоршин ажиллаж байна. Ингэснээр хамгаалалт болон ѳргѳтгѳл хийхэд гэх мэт илүү уян хатан тѳлѳвтэй болно.</p>
<figure>
    <img loading="lazy" src="/images/kubernetes-etcd-external-cluster.png"/> 
</figure>

<blockquote>
<p><strong>Сурвалж</strong>: Kubernetes documentation</p>
</blockquote>
<p>Под үүсгэж буй ажиллагааг харуулсан зураг. Etcd - ажиллагааг ойлгоход хялбар зураг</p>
<figure>
    <img loading="lazy" src="/images/Kubernetes-create-pod.png"/> 
</figure>

<blockquote>
<p><strong>Сурвалж</strong>: blog.heptio.com</p>
</blockquote>
<ul>
<li><a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-controller-manager/"><code>kube-controller-manager</code></a>: Системийн хэвийн ажиллаж байгаа эсэхийг давтамжтайгаар шалгах процесс.</li>
<li><a href="https://kubernetes.io/docs/concepts/scheduling-eviction/kube-scheduler/"><code>kube-scheduler</code></a>: Күбернетес хуваарилагч нь аль под аль node руу хуваарилагдан очих ёстойг тодорхойлно. Хуваарилагчаас тодорхойлсон бүтцийн дагуу <code>kubelet</code> цааш хариуцан зѳѳвѳрлѳх үйлдийг хийнэ.</li>
</ul>
<h3 id="worker-node">Worker Node</h3>
<figure>
    <img loading="lazy" src="/images/Kubernetes-worker-node.png"/> 
</figure>

<ul>
<li>kubelet</li>
<li>kube-proxy</li>
<li>Container runtime</li>
</ul>
<p><code>kubelet</code>: Подтой холбогдон контейнер(ууд) хэвийн ажиллаж байгааг хянах, ажилууллах үйлдлийг API серверээр дамжуулан мастер node-тэй холбож ѳгдѳг. Ѳѳрѳѳр хэлбэл worker node-ыг мастер node-тэй холбох зуучлагч юм.</p>
<p><code>kube-proxy</code>: Сервис дээр worker node тус бүр дээр load balancer (ачаалал тэнцвэржүүлэгч) хийж IP хаяг болон сүлжээний урсгалыг зохицуулдаг.</p>
<p><code>Container runtime</code>: Контейнерын lifecycle-г тодорхойлж байдаг. <a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-node/container-runtimenter-iface.md">Күбернетэс CRI</a> нэвтрүүлж контейнерийн runtime-уудыг дэмжин ажиллана. Үүнд Docker, containerd, <a href="https://cri-o.io/#what-is-cri-o">CRI-O</a> гэх мэт.</p>
<p><code>Под</code>: Кластер дотор нэг эсхүл олон контейнеруудаас бүрдэн ажиллаж байгаа системийн илэрхийлэл бол под юм.</p>
<figure>
    <img loading="lazy" src="/images/Kubernetes-101-Pod.png"/> 
</figure>

<ul>
<li>Нэг подод нэг контейнер</li>
<li>Олон подод олон контейнерууд</li>
</ul>
<p>Под доторх контейнер(ууд) ѳѳрийн нѳѳц, нетворкийг хуваалцан ашиглана. Ѳѳрѳѳр хэлбэл нэг эсхүл олон контейнеруудыг холбон нэг подод оруулан (контейнерууд) хоорондоо холбогдон үйлдэл хийх боломжтой тусгаарлагдсан орчин үүсгэнэ.</p>
<h2 id="сурвалжууд--bookmarks">Сурвалжууд &amp; Bookmarks</h2>
<ul>
<li><a href="https://etcd.io/">https://etcd.io/</a></li>
<li><a href="https://github.com/k3s-io/k3s">https://github.com/k3s-io/k3s</a></li>
<li><a href="https://www.ibm.com/cloud/blog/kubernetes-ingress">https://www.ibm.com/cloud/blog/kubernetes-ingress</a></li>
<li><a href="https://k3s.io/">https://k3s.io/</a></li>
<li><a href="https://kind.sigs.k8s.io/">https://kind.sigs.k8s.io/</a></li>
<li><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">https://kubernetes.io/docs/concepts/services-networking/ingress/</a></li>
<li><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#configure-probes">https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#configure-probes</a>)</li>
<li><a href="https://kubernetes.io/docs/tasks/tools/">https://kubernetes.io/docs/tasks/tools/</a></li>
<li><a href="https://medium.com/@tumenzul/kubernetes-%D0%BD-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D0%B3%D0%B0%D0%B0%D0%BD%D1%8B-%D0%B7%D0%B0%D1%80%D1%87%D0%BC%D1%8B%D0%B3-%D0%BE%D0%B9%D0%BB%D0%B3%D0%BE%D1%85-%D0%BD%D1%8C-abc9c0b82d35">https://medium.com/@tumenzul/kubernetes-%D0%BD-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D0%B3%D0%B0%D0%B0%D0%BD%D1%8B-%D0%B7%D0%B0%D1%80%D1%87%D0%BC%D1%8B%D0%B3-%D0%BE%D0%B9%D0%BB%D0%B3%D0%BE%D1%85-%D0%BD%D1%8C-abc9c0b82d35</a></li>
<li><a href="https://medium.com/better-programming/a-closer-look-at-etcd-the-brain-of-a-kubernetes-cluster-788c8ea759a5">https://medium.com/better-programming/a-closer-look-at-etcd-the-brain-of-a-kubernetes-cluster-788c8ea759a5</a></li>
<li><a href="https://medium.com/faun/what-is-a-kubernetes-pod-67215193ed98">https://medium.com/faun/what-is-a-kubernetes-pod-67215193ed98</a></li>
<li><a href="https://medium.com/google-cloud">https://medium.com/google-cloud</a></li>
<li><a href="https://medium.com/google-cloud/understanding-kubernetes-networking-pods-7117dd28727">https://medium.com/google-cloud/understanding-kubernetes-networking-pods-7117dd28727</a></li>
<li><a href="https://medium.com/jorgeacetozi/kubernetes-master-components-etcd-api-server-controller-manager-and-scheduler-3a0179fc8186">https://medium.com/jorgeacetozi/kubernetes-master-components-etcd-api-server-controller-manager-and-scheduler-3a0179fc8186</a></li>
<li><a href="https://medium.com/swlh/kubernetes-architecture-explained-in-brief-6a07f59193e">https://medium.com/swlh/kubernetes-architecture-explained-in-brief-6a07f59193e</a></li>
<li><a href="https://mn.wikipedia.org/wiki/Load_balancing">https://mn.wikipedia.org/wiki/Load_balancing</a></li>
<li><a href="https://bells17.medium.com/kubernetes-ccm-d4d3c71ba523">https://bells17.medium.com/kubernetes-ccm-d4d3c71ba523</a></li>
<li><a href="https://www.cncf.io/blog/2020/12/14/kubernetes-101-an-introduction/">https://www.cncf.io/blog/2020/12/14/kubernetes-101-an-introduction/</a></li>
<li><a href="https://github.com/kodekloudhub/certified-kubernetes-administrator-course">https://github.com/kodekloudhub/certified-kubernetes-administrator-course</a></li>
</ul>
]]></content:encoded>
    </item>
  </channel>
</rss>
