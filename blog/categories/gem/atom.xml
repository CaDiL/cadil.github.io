<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: gem | CaDiL's blog]]></title>
  <link href="http://cadil.github.io/blog/categories/gem/atom.xml" rel="self"/>
  <link href="http://cadil.github.io/"/>
  <updated>2016-04-13T22:13:45+09:00</updated>
  <id>http://cadil.github.io/</id>
  <author>
    <name><![CDATA[CaDiL]]></name>
    <email><![CDATA[kkhoschuluu@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rspec-rails gem]]></title>
    <link href="http://cadil.github.io/blog/2016/04/13/rspec-rails-gem/"/>
    <updated>2016-04-13T20:32:33+09:00</updated>
    <id>http://cadil.github.io/blog/2016/04/13/rspec-rails-gem</id>
    <content type="html"><![CDATA[<h2>Танилцуулга</h2>

<p>Хамгийн хэрэгтэй гэсэн Development - gem - үүдээс эхнээс нь танилцаж явах болно. Мэдээж бид бүхэнд юуны ѳмнѳ rspec-rails gem хэрэгтэй. Rspec нь тест хийх зориулалттай framework ба олон талт боломжуудтай юм.</p>

<h3>Dev Gems</h3>

<pre><code class="ruby Gemfile">group :development, :test do
   gem 'better_errors'
   gem 'capybara-webkit'
   gem 'factory_girl_rails'
   gem 'ffaker'
   gem 'database_cleaner'
   gem 'letter_opener'
   gem 'rspec-rails' 
   gem 'pry'
   gem 'pry-nav'
   gem 'pry-rails', '~&gt; 0.3.2'
   gem 'simple_bdd'
   gem 'shoulda-matchers'
   gem 'spring'
 end
</code></pre>

<p>Дээр байгаа нийт 13 Development, test - gem - үүдийг нэг нэгээр нь дэлгэрэнгүй үзэх болно.
Энэ удаа бид gem &lsquo;rspec-rails&rsquo; дэлгэрэнгүй авч үзнэ. Rspec - ыг ажиллуулах үед <a href="https://github.com/thoughtbot/capybara-webkit">capybara-webkit</a> суулгахыг шаардана. Capybara-webkit-ыг суулгахын ѳмнѳ Qt libraries суулгасан байх шаардлагатай. <a href="https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit">Энд</a> дарж суулгах заавартай танилцаарай.</p>

<h3>rspec-rails</h3>

<p>rspec-rails нь Rails 3.x 4.x зориулсан testing framework юм.
Gemfile - ын group :development, :test do - дотор бичиж ѳгнѳ:</p>

<pre><code class="ruby Gemfile">group :development, :test do
   gem 'rspec-rails'
   gem 'capybara-webkit'
end
</code></pre>

<p>Дараагаар нь терминал дээр:</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ bundle install</span></code></pre></td></tr></table></div></figure></p>

<p>Bundle install хийгдэж дууссан бол, rspec - ээ суулгана. Терминал дээр:</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rails generate rspec:install</span></code></pre></td></tr></table></div></figure></p>

<p>/spec/rails_helper.rb замаар орон require ‘rspec/rails’ - ыг нэмнэ:</p>

<pre><code class="ruby /spec/rails_helper.rb">require 'rspec/rails'
</code></pre>

<h3>Home Spec</h3>

<p>/spec - фолдер дотор features - фолдер шинээр үүсгэнэ. Энэ фолдер дотор бид spec-үүдээ бичээд явах юм.</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd spec
</span><span class='line'>$ mkdir features</span></code></pre></td></tr></table></div></figure></p>

<p>Шинээр үүсгэсэн features - фолдер дотроо home_spec.rb - үүсгэж ѳгнѳ:</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vi /spec/features/home_spec.rb</span></code></pre></td></tr></table></div></figure></p>

<p>Энэ хичээлийн явцад <a href="https://en.wikipedia.org/wiki/Vim_(text_editor">Vim</a> ашиглах ба та ѳѳрийн дурын editor-ыг ашиглах боломжтой.</p>

<pre><code class="ruby /spec/features/home_spec.rb">require 'rails_helper'

feature "Home page уруу орох" do

  scenario "Хэрэглэгч, тавтай морилно уу гэсэн текст харах" do
    visit root_path
    expect(page).to have_text("Тавтай морилно уу CaDiL")
  end
end
</code></pre>

<h3>Spec - ыг ажиллуулах</h3>

<p>Бүх spec - ыг ажлуулах:</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rspec</span></code></pre></td></tr></table></div></figure></p>

<p>Фолдер дотор байгаа spec-үүдыг ажлуулах:</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rspec spec/features</span></code></pre></td></tr></table></div></figure></p>

<p>Нэг spec ажлуулах:</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rspec spec/features/home_spec.rb</span></code></pre></td></tr></table></div></figure></p>

<h2>Spec-ын дагуу</h2>

<p>rspec ажиллуулж үзэн гарсан алдааны мэдээллээр алдааг засаж үзье.</p>

<p>Home controller - ыг index method - той хамт үүсгэх:</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rails g controller Home index</span></code></pre></td></tr></table></div></figure></p>

<p>Home index - ыг үндсэн хуудсаар сонгож ѳгѳхын тулд app/config/routes.rb - уруу орон:</p>

<pre><code class="ruby app/config/routes.rb">root 'home#index'
</code></pre>

<p>бичиж ѳгнѳ.</p>

<p>Шинээр үүсгэсэн Home index үрүү орон доорх мѳрийг бичиж ѳгнѳ:</p>

<p>``` html app/views/home/index.html</p>

<p>Тавтай морилно уу CaDiL</p>


<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Devise gem]]></title>
    <link href="http://cadil.github.io/blog/2016/04/12/devise-gem/"/>
    <updated>2016-04-12T21:03:10+09:00</updated>
    <id>http://cadil.github.io/blog/2016/04/12/devise-gem</id>
    <content type="html"><![CDATA[<h1>Devise Gem</h1>

<p>Devise нь Rails дээр суурилсан уян хатан <code>authentication</code> шийдлийн нэг юм.</p>

<ul>
<li>Rack дээр суурилсан</li>
<li>Rails engine дээр суурилсан бүрэн MVC шийдэл юм</li>
<li>Нэг цагт олон моделиуд зэрэг хандалт хийх боломжтой</li>
</ul>


<h1>Инфо</h1>

<p>Devise ѳргѳн ашиглагддаг gem болохоор internet-ээс хайхад хүссэн мэдээллээ авах боломжтой. Доорх линкээр орон мэдээлэл авах боломжтой: <a href="https://github.com/plataformatec/devise">Devise</a></p>

<h1>Эхлэл</h1>

<p>Devise 4.0 нь Rails 4.2 болон 4.2 дээшээ загваруудыг дэмжин ажиллана. Gemfile дотор хуулж ѳгѳх:
<code>
gem 'devise'
</code></p>

<p>Хуулсан бол <code>bundle install</code> командыг ашиглан суулгана:
<code>
bundle install
</code></p>

<p>Gemfile дотроо хуулан bundle install хийсэн бол <code>generate</code> хийн суулгах хэрэгтэй:
<code>
rails generate devise:install
</code></p>

<p>Generate хийх явцад тохиргооны хэсэг гарч ирэх ба тэдгээрийг зааврын дагуу суулгах шаардлагатай. Тохиргоог хийж дууссан бол generate ашиглан Devise-д <code>модель</code> үүсгэж ѳгнѳ:
<code>
rails generate devise MODEL
</code></p>

<p><code>MODEL</code> - ын оронд апплкейшны хэрэглэгчийн классын нэрийг бичиж ѳгнѳ. Уг тохиолдолд <code>User</code> эсвэл <code>Admin</code> байж болно. Модель үүсгэсэн бол <code>rake db:migrate</code> хийж ѳгнѳ
<code>
rake db:migrate
</code></p>

<h1>Helper</h1>

<p>Devise нь controller болон views дотор <code>helper</code> үүсгэж ѳгсѳн байгаа. Controller хэсэгт user authentication оруулж ѳгѳх бол before_action (тухайн моделийг User гэж үзвэл)
<code>
before_action :authenticate_user!
</code></p>

<p>Devise model - т User - ээс ѳѳр утга оноож ѳгсѳн бол <code>“_user”</code> оронд <code>“_ѳѳрийн утга”</code>аа онож ѳгѳх зарчмаар явна.</p>

<p>Хэрэглэгч бүртгүүлсэн болохыг шалгах helper:
<code>
user_signed_in?
</code></p>

<p>Одоогоор нэвтрэн орсон хэрэглэгч:
<code>
current_user
</code></p>

<p>Session рүү энэ хүрээллээр нэвтрэх боломжтой:
<code>
user_session
</code></p>
]]></content>
  </entry>
  
</feed>
