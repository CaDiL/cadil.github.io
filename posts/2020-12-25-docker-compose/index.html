<!doctype html><html lang=mn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Odoo -г Docker-с ажилууллах | CaDiL's Blog</title>
<meta name=keywords content="Docker,Container,Odoo"><meta name=description content="Odoo -г Docker-с ажилууллах"><meta name=author content="CaDiL"><link rel=canonical href=https://cadil.github.io/posts/2020-12-25-docker-compose/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://cadil.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cadil.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cadil.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://cadil.github.io/apple-touch-icon.png><link rel=mask-icon href=https://cadil.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=mn href=https://cadil.github.io/posts/2020-12-25-docker-compose/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Odoo -г Docker-с ажилууллах"><meta property="og:description" content="Odoo -г Docker-с ажилууллах"><meta property="og:type" content="article"><meta property="og:url" content="https://cadil.github.io/posts/2020-12-25-docker-compose/"><meta property="og:image" content="https://cadil.github.io/static"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-12-25T00:00:00+00:00"><meta property="article:modified_time" content="2020-12-25T00:00:00+00:00"><meta property="og:site_name" content="CaDiL's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cadil.github.io/static"><meta name=twitter:title content="Odoo -г Docker-с ажилууллах"><meta name=twitter:description content="Odoo -г Docker-с ажилууллах"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://cadil.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Odoo -г Docker-с ажилууллах","item":"https://cadil.github.io/posts/2020-12-25-docker-compose/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Odoo -г Docker-с ажилууллах","name":"Odoo -г Docker-с ажилууллах","description":"Odoo -г Docker-с ажилууллах","keywords":["Docker","Container","Odoo"],"articleBody":"Odoo -г Docker-с ажилууллах Odoo -н тухай Bitnami-г ашиглан Bitnami-docker-odoo - ажилууллах docker-compose - коммандын талаар Docker Volume \u0026 persistent volume claim талаар Docker-compouse ажилууллах Odoo-н тухайд Нээлттэй эх дээрх бизнес апплкэйшн ERP нь вэб дээр бүрэн ажиллах, ѳѳр системтэй интеграци хийх боломж, l10n зэргийг шийдсэн цогц апплкэйшн юм.\nBitnami-н тухайд Нээлттэй эх дээр суурьтай OSS софтвейрыг хялбар аргаар хүссэн орчин дээр суулган ажилуулна. Клоуд хостинг хийж байгаа бол Helm Chart -г ашиглан күбэрнетес, клустер-г хялбархан тохируулна. Гэхдээ күбэрнетес, клустертэй ажиллаж байгаа үед гарын авлага, документ, тест зэргийг сайтар судалсны дараа турших хэрэгтэй.\nDocker Compose Compose нь нэгээс олон контейнеруудыг нэг дор ажилууллах үед YAML файл дотор тохируулсан бүтцийг ашиглан докер ажиллах процесс юм.\nДокэр Compose үндсэн бүтэц:\nDockerfile docker-compose.yml - апплкэйшн тус бүрийн бүтцийг тодорхойлох хэсэг. Файл дотор байгаа бүтцийн дагуу апплкэйшн серверүүдийг асааж тусгаарлагдсан орчин үүсгэнэ. version: '2' services: postgresql: image: 'docker.io/bitnami/postgresql:11-debian-10' environment: - ALLOW_EMPTY_PASSWORD=yes volumes: - 'postgresql_data:/bitnami/postgresql' odoo: image: 'docker.io/bitnami/odoo:14-debian-10' ports: - '80:8069' - '443:8071' volumes: - 'odoo_data:/bitnami' depends_on: - postgresql volumes: postgresql_data: driver: local odoo_data: driver: local Bitnami дах Odoo V14-н сервер, апплкэйшнг тодорхойлж байгаа docker-compose.yml -г задалж үзвэл postgresql, odoo гэсэн хоёр контейнераас services бүрдэж байна.\nALLOW_EMPTY_PASSWORD=yes - ѳгѳгдлийн санг нууц үггүйгээр хандалт хийдэг болгож байна (тест хийж байгаа үед тохиромжтой). Продакшн орчинд тохиромжгүй сонголт. ports - [host-port]:[container-port] Хостинг портыг 80, 443 контейнер дэх 8069, 8071 порттой холбож байна. CLI - рүү бичвэл: $ docker run -p 80:8069 --name odoo depends_on - Compose хийхдээ эхлээд postgresql тодорхойлсон байна. Үүний дараа Odoo-г тохируулж байна. Ингэснээр ялгаатай хоёр контейнерээс хамааралтай байх нѳхцлийг тодорхойлж ѳгнѳ. Ѳѳрѳѳр хэлбэл нетворкинг хийж байгаа үед дарааллыг тодорхойлж ѳгѳх ба Odoo асахаас ѳмнѳ нь заавал Postgresql ассан байх ёстойг compose-д сануулж байна гэж хэлж болох юм. volumes - compose хийгдэж байгаа YAML-г CLI -руу хѳрвүүлбэл: $ docker volume create --driver local --name postgresql_data $ docker volume create --driver local --name odoo_data буюу [Докэр хост] дотор odoo_data, postgresql_data гэсэн нэртэй local volume үүсгэж ѳгнѳ. Докэр хост-г дэлгэрүүлбэл:\nДокэр ажиллах бүтэц нь Docker Engine тѳвтэй ба дараах гурван хэсгээс бүрдэнэ.\nDocker daemon - Docker API хүсэлтүүд хүлээн авч image, container, network, volume - зэргийн зохион байгуулалт хийх, бусад Docker Service-үүдтэй deamon -ѳѳр дамжин холбогдох гэх мэт. Docker CLI (Command Line Interface) REST API - Клиенттай холбогдох, Docker deamon-той уялдан харилцана. Ѳѳрѳѳр хэлбэл докэр дотор ажиллаж байгааг image-с тусад нь volume үүсгэн ѳгч байна. Ингэснээр тухайн контейнер унтарсан ч дата персист тѳлѳвтэй дахин ашиглаж болно гэсэн юм. –driver гэдэг нь Докэр plugin ашиглаад зѳвхѳн Докэр роот-с хандалт хийх эрх локал volume үүсгэж байна. Датаг холбох ѳѳр нэг арга нь docker-compose дотор хостинг directory-г оноох боломжтой. Гэхдээ non-root хэрэглэгчийн хувьд харгалзах хандах эрх байгааг нягтлан шалгах хэрэгтэй. Жишээ нь хост direcory-г тодорхойж буй:\nvolumes: - 'odoo_data:/bitnami' #Docker Host-с дотор тодорхойлсон volume. - './extra-addons:/bitnami/odoo/addons' # Хост directory-г Container руу оруулж байна. odoo_data:/bitnami дотор Odoo-г ажиллаж байх үеийн filestore -д Docker Host дотор odoo_data volume-д үүснэ. Docker volume руу зѳвхѳн Docker hosting хийж байгаа root хэрэглэгч хандах боломжтойг анхаарна уу.\n./extra-addons:/bitnami/odoo/addons - ./extra-addons, directory -г Odoo контейнер дах /bitnami/odoo/addons руу оруулж байна. Ингэснээр гуравдагч эдгээдийн модиуль болон хѳгжүүлэлтийн орчин дах нэмэлт модиулыг суулган ажиллуулах боломжтой болно.\n/bitnami/odoo/addons-г conf файл дотор тодорхойлж ѳгсѳн эсэхийг шалгах:\n$ docker exec -it cat /opt/bitnami/odoo/odoo-server.conf Bitnami -г дах Dockerfile болон нэмэлт pkg суух үед Odoo-гийн коор модиулидын directory болон нэмэлтээр суулгах модиулын directory-г тодорхойлон .conf файлд тохируулсан байгааг харж болно.\n[options] addons_path = /opt/bitnami/odoo/odoo/addons,/opt/bitnami/odoo/addons ... docker-compose.yml - файл сүүлийн байдлаар:\nversion: '2' services: postgresql: image: 'docker.io/bitnami/postgresql:11-debian-10' environment: - ALLOW_EMPTY_PASSWORD=yes volumes: - 'postgresql_data:/bitnami/postgresql' odoo: image: 'docker.io/bitnami/odoo:14-debian-10' ports: - '80:8069' - '443:8071' volumes: - 'odoo_data:/bitnami' - './extra-addons:/bitnami/odoo/addons' depends_on: - postgresql volumes: postgresql_data: driver: local odoo_data: driver: local Бүтэц:\n... # tree /bitnami-odoo/ |-- extra-addons |-- docker-compose.yml ... Docker-compose ажилууллах: $ docker-compose up -d Image-үүд татаж дуусан networking хийн done болсон бол:\nStatus: Downloaded newer image for bitnami/odoo:14-debian-10 Creating bitnami-odoo_postgresql_1 ... done Creating bitnami-odoo_odoo_1 ... done http://localhost/web/login хаягаар хандан bitnami -с тодорхойлсон нэвтрэх нэр: user@example.com нууц үг: bitnami, Odoo руу нэвтрэн орно. Эсхүл шинээр db тохируулах бол ‘http://localhost/web/database/selector - хаягаар орон тохируулж болно.\nDocker-compose унтраах: $ docker-compose down Volume шалгах: docker volume ls Volume устгах: docker volume rm ","wordCount":"683","inLanguage":"mn","datePublished":"2020-12-25T00:00:00Z","dateModified":"2020-12-25T00:00:00Z","author":{"@type":"Person","name":"CaDiL"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://cadil.github.io/posts/2020-12-25-docker-compose/"},"publisher":{"@type":"Organization","name":"CaDiL's Blog","logo":{"@type":"ImageObject","url":"https://cadil.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://cadil.github.io/ accesskey=h title="CaDiL's Blog (Alt + H)">CaDiL's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://cadil.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://cadil.github.io/bookmark/ title=Bookmark><span>Bookmark</span></a></li><li><a href=https://cadil.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://cadil.github.io/>Нүүр</a>&nbsp;»&nbsp;<a href=https://cadil.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Odoo -г Docker-с ажилууллах</h1><div class=post-description>Odoo -г Docker-с ажилууллах</div><div class=post-meta><span title='2020-12-25 00:00:00 +0000 UTC'>арван хоёрдугаар сар 25, 2020</span>&nbsp;·&nbsp;4 МИН&nbsp;·&nbsp;CaDiL</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Агуулга</span></summary><div class=inner><ul><li><a href=#odoo--%d0%b3-docker-%d1%81-%d0%b0%d0%b6%d0%b8%d0%bb%d1%83%d1%83%d0%bb%d0%bb%d0%b0%d1%85 aria-label="Odoo -г Docker-с ажилууллах">Odoo -г Docker-с ажилууллах</a></li><li><a href=#odoohttpsgithubcomodooodoo-%d0%bd-%d1%82%d1%83%d1%85%d0%b0%d0%b9%d0%b4 aria-label="Odoo-н тухайд">Odoo-н тухайд</a></li><li><a href=#bitnamihttpsgithubcombitnami-%d0%bd-%d1%82%d1%83%d1%85%d0%b0%d0%b9%d0%b4 aria-label="Bitnami-н тухайд">Bitnami-н тухайд</a></li><li><a href=#docker-compose aria-label="Docker Compose">Docker Compose</a></li><li><a href=#docker-compose-%d0%b0%d0%b6%d0%b8%d0%bb%d1%83%d1%83%d0%bb%d0%bb%d0%b0%d1%85 aria-label="Docker-compose ажилууллах:">Docker-compose ажилууллах:</a></li><li><a href=#docker-compose-%d1%83%d0%bd%d1%82%d1%80%d0%b0%d0%b0%d1%85 aria-label="Docker-compose унтраах:">Docker-compose унтраах:</a></li><li><a href=#volume-%d1%88%d0%b0%d0%bb%d0%b3%d0%b0%d1%85 aria-label="Volume шалгах:">Volume шалгах:</a></li><li><a href=#volume-%d1%83%d1%81%d1%82%d0%b3%d0%b0%d1%85 aria-label="Volume устгах:">Volume устгах:</a></li></ul></div></details></div><div class=post-content><h3 id=odoo--г-docker-с-ажилууллах>Odoo -г Docker-с ажилууллах<a hidden class=anchor aria-hidden=true href=#odoo--г-docker-с-ажилууллах>#</a></h3><ul><li><code>Odoo</code> -н тухай</li><li><a href=https://bitnami.com>Bitnami</a>-г ашиглан <a href=https://github.com/bitnami/bitnami-docker-odoo>Bitnami-docker-odoo</a> - ажилууллах</li><li><code>docker-compose</code> - коммандын талаар</li><li>Docker Volume & persistent volume claim талаар</li><li>Docker-compouse ажилууллах</li></ul><h3 id=odoohttpsgithubcomodooodoo-н-тухайд><a href=https://github.com/odoo/odoo>Odoo</a>-н тухайд<a hidden class=anchor aria-hidden=true href=#odoohttpsgithubcomodooodoo-н-тухайд>#</a></h3><p>Нээлттэй эх дээрх бизнес апплкэйшн <a href=https://en.wikipedia.org/wiki/Enterprise_resource_planning>ERP</a> нь вэб дээр бүрэн ажиллах, ѳѳр системтэй интеграци хийх боломж, <a href=https://en.wikipedia.org/wiki/Internationalization_and_localization>l10n</a> зэргийг шийдсэн цогц апплкэйшн юм.</p><h3 id=bitnamihttpsgithubcombitnami-н-тухайд><a href=https://github.com/bitnami>Bitnami</a>-н тухайд<a hidden class=anchor aria-hidden=true href=#bitnamihttpsgithubcombitnami-н-тухайд>#</a></h3><p>Нээлттэй эх дээр суурьтай <a href=https://en.wikipedia.org/wiki/Open-source_software>OSS</a> софтвейрыг хялбар аргаар хүссэн орчин дээр суулган ажилуулна. Клоуд хостинг хийж байгаа бол Helm Chart -г ашиглан күбэрнетес, клустер-г хялбархан тохируулна. Гэхдээ күбэрнетес, клустертэй ажиллаж байгаа үед гарын авлага, документ, тест зэргийг сайтар судалсны дараа турших хэрэгтэй.</p><h3 id=docker-compose>Docker Compose<a hidden class=anchor aria-hidden=true href=#docker-compose>#</a></h3><p>Compose нь нэгээс олон контейнеруудыг нэг дор ажилууллах үед <a href=https://en.wikipedia.org/wiki/YAML>YAML</a> файл дотор тохируулсан бүтцийг ашиглан докер ажиллах процесс юм.</p><p>Докэр Compose үндсэн бүтэц:</p><ul><li><code>Dockerfile</code></li><li><code>docker-compose.yml</code> - апплкэйшн тус бүрийн бүтцийг тодорхойлох хэсэг. Файл дотор байгаа бүтцийн дагуу апплкэйшн серверүүдийг асааж тусгаарлагдсан орчин үүсгэнэ.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>version: <span style=color:#e6db74>&#39;2&#39;</span>
</span></span><span style=display:flex><span>services:
</span></span><span style=display:flex><span> postgresql:
</span></span><span style=display:flex><span>   image: <span style=color:#e6db74>&#39;docker.io/bitnami/postgresql:11-debian-10&#39;</span>
</span></span><span style=display:flex><span>   environment:
</span></span><span style=display:flex><span>     - ALLOW_EMPTY_PASSWORD<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>   volumes:
</span></span><span style=display:flex><span>     - <span style=color:#e6db74>&#39;postgresql_data:/bitnami/postgresql&#39;</span>
</span></span><span style=display:flex><span> odoo:
</span></span><span style=display:flex><span>   image: <span style=color:#e6db74>&#39;docker.io/bitnami/odoo:14-debian-10&#39;</span>
</span></span><span style=display:flex><span>   ports:
</span></span><span style=display:flex><span>     - <span style=color:#e6db74>&#39;80:8069&#39;</span>
</span></span><span style=display:flex><span>     - <span style=color:#e6db74>&#39;443:8071&#39;</span>
</span></span><span style=display:flex><span>   volumes:
</span></span><span style=display:flex><span>     - <span style=color:#e6db74>&#39;odoo_data:/bitnami&#39;</span>
</span></span><span style=display:flex><span>   depends_on:
</span></span><span style=display:flex><span>     - postgresql
</span></span><span style=display:flex><span>volumes:
</span></span><span style=display:flex><span> postgresql_data:
</span></span><span style=display:flex><span>   driver: local
</span></span><span style=display:flex><span> odoo_data:
</span></span><span style=display:flex><span>   driver: local
</span></span></code></pre></div><p>Bitnami дах Odoo V14-н сервер, апплкэйшнг тодорхойлж байгаа docker-compose.yml -г задалж үзвэл <a href=https://github.com/bitnami/bitnami-docker-postgresql><code>postgresql</code></a>, <code>odoo</code> гэсэн хоёр контейнераас <code>services</code> бүрдэж байна.</p><ul><li><code>ALLOW_EMPTY_PASSWORD=yes</code> - ѳгѳгдлийн санг нууц үггүйгээр хандалт хийдэг болгож байна (тест хийж байгаа үед тохиромжтой). Продакшн орчинд тохиромжгүй сонголт.</li><li><code>ports</code> - [host-port]:[container-port] Хостинг портыг <code>80</code>, <code>443</code> контейнер дэх <code>8069</code>, <code>8071</code> порттой холбож байна. CLI - рүү бичвэл:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker run -p 80:8069 --name odoo
</span></span></code></pre></div><ul><li><code>depends_on</code> - Compose хийхдээ эхлээд postgresql тодорхойлсон байна. Үүний дараа Odoo-г тохируулж байна. Ингэснээр ялгаатай хоёр контейнерээс хамааралтай байх нѳхцлийг тодорхойлж ѳгнѳ. Ѳѳрѳѳр хэлбэл нетворкинг хийж байгаа үед дарааллыг тодорхойлж ѳгѳх ба Odoo асахаас ѳмнѳ нь заавал Postgresql ассан байх ёстойг compose-д сануулж байна гэж хэлж болох юм.</li><li><code>volumes</code> - compose хийгдэж байгаа YAML-г CLI -руу хѳрвүүлбэл:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker volume create --driver local --name postgresql_data
</span></span><span style=display:flex><span>$ docker volume create --driver local --name odoo_data
</span></span></code></pre></div><p>буюу [Докэр хост] дотор odoo_data, postgresql_data гэсэн нэртэй local volume үүсгэж ѳгнѳ. Докэр хост-г дэлгэрүүлбэл:</p><p>Докэр ажиллах бүтэц нь Docker Engine тѳвтэй ба дараах гурван хэсгээс бүрдэнэ.</p><ul><li>Docker daemon - Docker API хүсэлтүүд хүлээн авч image, container, network, volume - зэргийн зохион байгуулалт хийх, бусад Docker Service-үүдтэй deamon -ѳѳр дамжин холбогдох гэх мэт.</li><li>Docker CLI (Command Line Interface)</li><li>REST API - Клиенттай холбогдох, Docker deamon-той уялдан харилцана.</li></ul><p>Ѳѳрѳѳр хэлбэл докэр дотор ажиллаж байгааг image-с тусад нь volume үүсгэн ѳгч байна. Ингэснээр тухайн контейнер унтарсан ч дата персист тѳлѳвтэй дахин ашиглаж болно гэсэн юм. &ndash;driver гэдэг нь Докэр plugin ашиглаад зѳвхѳн Докэр роот-с хандалт хийх эрх локал volume үүсгэж байна. Датаг холбох ѳѳр нэг арга нь docker-compose дотор хостинг directory-г оноох боломжтой. Гэхдээ non-root хэрэглэгчийн хувьд харгалзах хандах эрх байгааг нягтлан шалгах хэрэгтэй. Жишээ нь хост direcory-г тодорхойж буй:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>volumes:
</span></span><span style=display:flex><span>  - <span style=color:#e6db74>&#39;odoo_data:/bitnami&#39;</span> <span style=color:#75715e>#Docker Host-с дотор тодорхойлсон volume.</span>
</span></span><span style=display:flex><span>  - <span style=color:#e6db74>&#39;./extra-addons:/bitnami/odoo/addons&#39;</span> <span style=color:#75715e># Хост directory-г Container руу оруулж байна.</span>
</span></span></code></pre></div><p><code>odoo_data:/bitnami</code> дотор Odoo-г ажиллаж байх үеийн filestore -д Docker Host дотор <code>odoo_data</code> volume-д үүснэ. Docker volume руу зѳвхѳн Docker hosting хийж байгаа root хэрэглэгч хандах боломжтойг анхаарна уу.</p><p><code>./extra-addons:/bitnami/odoo/addons</code> - ./extra-addons, directory -г Odoo контейнер дах /bitnami/odoo/addons руу оруулж байна. Ингэснээр гуравдагч эдгээдийн модиуль болон хѳгжүүлэлтийн орчин дах нэмэлт модиулыг суулган ажиллуулах боломжтой болно.</p><p><code>/bitnami/odoo/addons</code>-г conf файл дотор тодорхойлж ѳгсѳн эсэхийг шалгах:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker exec -it &lt;container-name&gt; cat /opt/bitnami/odoo/odoo-server.conf
</span></span></code></pre></div><p>Bitnami -г дах Dockerfile болон нэмэлт pkg суух үед Odoo-гийн коор модиулидын directory болон нэмэлтээр суулгах модиулын directory-г тодорхойлон .conf файлд тохируулсан байгааг харж болно.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>options<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>addons_path <span style=color:#f92672>=</span> /opt/bitnami/odoo/odoo/addons,/opt/bitnami/odoo/addons
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>docker-compose.yml - файл сүүлийн байдлаар:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>version: <span style=color:#e6db74>&#39;2&#39;</span>
</span></span><span style=display:flex><span>services:
</span></span><span style=display:flex><span>  postgresql:
</span></span><span style=display:flex><span>    image: <span style=color:#e6db74>&#39;docker.io/bitnami/postgresql:11-debian-10&#39;</span>
</span></span><span style=display:flex><span>    environment:
</span></span><span style=display:flex><span>      - ALLOW_EMPTY_PASSWORD<span style=color:#f92672>=</span>yes
</span></span><span style=display:flex><span>    volumes:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;postgresql_data:/bitnami/postgresql&#39;</span>
</span></span><span style=display:flex><span>  odoo:
</span></span><span style=display:flex><span>    image: <span style=color:#e6db74>&#39;docker.io/bitnami/odoo:14-debian-10&#39;</span>
</span></span><span style=display:flex><span>    ports:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;80:8069&#39;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;443:8071&#39;</span>
</span></span><span style=display:flex><span>    volumes:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;odoo_data:/bitnami&#39;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#39;./extra-addons:/bitnami/odoo/addons&#39;</span>
</span></span><span style=display:flex><span>    depends_on:
</span></span><span style=display:flex><span>      - postgresql
</span></span><span style=display:flex><span>volumes:
</span></span><span style=display:flex><span>  postgresql_data:
</span></span><span style=display:flex><span>    driver: local
</span></span><span style=display:flex><span>  odoo_data:
</span></span><span style=display:flex><span>    driver: local
</span></span></code></pre></div><p><a href=https://github.com/CaDiL/docker-101/tree/main/bitnami-odoo>Бүтэц:</a></p><pre tabindex=0><code>...
# tree
/bitnami-odoo/
|-- extra-addons
|-- docker-compose.yml
...
</code></pre><h3 id=docker-compose-ажилууллах>Docker-compose ажилууллах:<a hidden class=anchor aria-hidden=true href=#docker-compose-ажилууллах>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose up -d
</span></span></code></pre></div><p>Image-үүд татаж дуусан networking хийн done болсон бол:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Status: Downloaded newer image <span style=color:#66d9ef>for</span> bitnami/odoo:14-debian-10
</span></span><span style=display:flex><span>Creating bitnami-odoo_postgresql_1 ... <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>Creating bitnami-odoo_odoo_1       ... <span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p><code>http://localhost/web/login</code> хаягаар хандан bitnami -с тодорхойлсон нэвтрэх нэр: <a href=mailto:user@example.com>user@example.com</a> нууц үг: bitnami, Odoo руу нэвтрэн орно. Эсхүл шинээр db тохируулах бол &lsquo;<code>http://localhost/web/database/selector</code> - хаягаар орон тохируулж болно.</p><h3 id=docker-compose-унтраах>Docker-compose унтраах:<a hidden class=anchor aria-hidden=true href=#docker-compose-унтраах>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker-compose down
</span></span></code></pre></div><h3 id=volume-шалгах>Volume шалгах:<a hidden class=anchor aria-hidden=true href=#volume-шалгах>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker volume ls
</span></span></code></pre></div><h3 id=volume-устгах>Volume устгах:<a hidden class=anchor aria-hidden=true href=#volume-устгах>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker volume rm &lt;volume-name&gt;
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://cadil.github.io/tags/docker/>Docker</a></li><li><a href=https://cadil.github.io/tags/container/>Container</a></li><li><a href=https://cadil.github.io/tags/odoo/>Odoo</a></li></ul><nav class=paginav><a class=prev href=https://cadil.github.io/posts/2021-01-09-kubernetes-history/><span class=title>« Ѳмнѳх</span><br><span>Күбернетес тухай</span>
</a><a class=next href=https://cadil.github.io/posts/2020-12-21-nginx-container/><span class=title>Дараах »</span><br><span>Localhost дээр Nginx ажилууллах</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://cadil.github.io/>CaDiL's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="хуулах";function s(){t.innerHTML="хуулсан!",setTimeout(()=>{t.innerHTML="хуулах"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>